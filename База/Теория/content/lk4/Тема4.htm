<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:st1="urn:schemas-microsoft-com:office:smarttags"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1251">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 11">
<meta name=Originator content="Microsoft Word 11">
<link rel=File-List href="Тема4.files/filelist.xml">
<link rel=Edit-Time-Data href="Тема4.files/editdata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]-->
<title>Тема-4:</title>
<o:SmartTagType namespaceuri="urn:schemas-microsoft-com:office:smarttags"
 name="metricconverter"/>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>Неизвестный</o:Author>
  <o:Template>Normal</o:Template>
  <o:LastAuthor>Бранцевич</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>5</o:TotalTime>
  <o:Created>2015-03-06T14:13:00Z</o:Created>
  <o:LastSaved>2015-03-06T14:13:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>6947</o:Words>
  <o:Characters>69825</o:Characters>
  <o:Lines>2493</o:Lines>
  <o:Paragraphs>1827</o:Paragraphs>
  <o:CharactersWithSpaces>74945</o:CharactersWithSpaces>
  <o:Version>11.9999</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:AutoHyphenation/>
  <w:HyphenationZone>17</w:HyphenationZone>
  <w:DrawingGridHorizontalSpacing>6 пт</w:DrawingGridHorizontalSpacing>
  <w:DrawingGridVerticalSpacing>6 пт</w:DrawingGridVerticalSpacing>
  <w:DisplayVerticalDrawingGridEvery>0</w:DisplayVerticalDrawingGridEvery>
  <w:UseMarginsForDrawingGridOrigin/>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:Compatibility>
   <w:SpaceForUL/>
   <w:BalanceSingleByteDoubleByteWidth/>
   <w:DoNotLeaveBackslashAlone/>
   <w:ULTrailSpace/>
   <w:DoNotExpandShiftReturn/>
   <w:UsePrinterMetrics/>
   <w:WW6BorderRules/>
   <w:FootnoteLayoutLikeWW8/>
   <w:ShapeLayoutLikeWW8/>
   <w:AlignTablesRowByRow/>
   <w:ForgetLastTabAlignment/>
   <w:AutoSpaceLikeWord95/>
   <w:LayoutRawTableWidth/>
   <w:LayoutTableRowsApart/>
   <w:UseWord97LineBreakingRules/>
   <w:SelectEntireFieldWithStartOrEnd/>
   <w:UseWord2002TableStyleRules/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]--><!--[if !mso]><object
 classid="clsid:38481807-CA0E-42D2-BF39-B33AF135CC4D" id=ieooui></object>
<style>
st1\:*{behavior:url(#ieooui) }
</style>
<![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Helvetica;
	panose-1:2 11 6 4 2 2 2 2 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:Courier;
	panose-1:2 7 3 9 2 2 5 2 4 4;
	mso-font-charset:0;
	mso-generic-font-family:modern;
	mso-font-format:other;
	mso-font-pitch:fixed;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Tms Rmn";
	panose-1:2 2 6 3 4 5 5 2 3 4;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:Helv;
	panose-1:2 11 6 4 2 2 2 3 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"New York";
	panose-1:2 4 5 3 6 5 6 2 3 4;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:System;
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:"MS Mincho";
	panose-1:2 2 6 9 4 2 5 8 3 4;
	mso-font-alt:"Kozuka Mincho Pro R";
	mso-font-charset:128;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:fixed;
	mso-font-signature:1 134676480 16 0 131072 0;}
@font-face
	{font-family:Batang;
	panose-1:2 3 6 0 0 1 1 1 1 1;
	mso-font-alt:\BC14\D0D5;
	mso-font-charset:129;
	mso-generic-font-family:auto;
	mso-font-format:other;
	mso-font-pitch:fixed;
	mso-font-signature:1 151388160 16 0 524288 0;}
@font-face
	{font-family:SimSun;
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-alt:\5B8B\4F53;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:1 135135232 16 0 262144 0;}
@font-face
	{font-family:PMingLiU;
	panose-1:2 1 6 1 0 1 1 1 1 1;
	mso-font-alt:\65B0\7D30\660E\9AD4;
	mso-font-charset:136;
	mso-generic-font-family:auto;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:1 134742016 16 0 1048576 0;}
@font-face
	{font-family:"MS Gothic";
	panose-1:2 11 6 9 7 2 5 8 2 4;
	mso-font-alt:"\FF2D\FF33 \30B4\30B7\30C3\30AF";
	mso-font-charset:128;
	mso-generic-font-family:modern;
	mso-font-format:other;
	mso-font-pitch:fixed;
	mso-font-signature:1 134676480 16 0 131072 0;}
@font-face
	{font-family:Dotum;
	panose-1:2 11 6 0 0 1 1 1 1 1;
	mso-font-alt:\B3CB\C6C0;
	mso-font-charset:129;
	mso-generic-font-family:modern;
	mso-font-format:other;
	mso-font-pitch:fixed;
	mso-font-signature:1 151388160 16 0 524288 0;}
@font-face
	{font-family:SimHei;
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-alt:\9ED1\4F53;
	mso-font-charset:134;
	mso-generic-font-family:modern;
	mso-font-format:other;
	mso-font-pitch:fixed;
	mso-font-signature:1 135135232 16 0 262144 0;}
@font-face
	{font-family:MingLiU;
	panose-1:2 1 6 9 0 1 1 1 1 1;
	mso-font-alt:\7D30\660E\9AD4;
	mso-font-charset:136;
	mso-generic-font-family:modern;
	mso-font-format:other;
	mso-font-pitch:fixed;
	mso-font-signature:1 134742016 16 0 1048576 0;}
@font-face
	{font-family:Mincho;
	panose-1:2 2 6 9 4 3 5 8 3 5;
	mso-font-alt:\660E\671D;
	mso-font-charset:128;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:fixed;
	mso-font-signature:1 134676480 16 0 131072 0;}
@font-face
	{font-family:Gulim;
	panose-1:2 11 6 0 0 1 1 1 1 1;
	mso-font-alt:\AD74\B9BC;
	mso-font-charset:129;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:fixed;
	mso-font-signature:1 151388160 16 0 524288 0;}
@font-face
	{font-family:Century;
	panose-1:2 4 6 3 5 7 5 2 3 3;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Angsana New";
	panose-1:2 2 6 3 5 4 5 2 3 4;
	mso-font-charset:222;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:16777217 0 0 0 65536 0;}
@font-face
	{font-family:"Cordia New";
	panose-1:2 11 3 4 2 2 2 2 2 4;
	mso-font-charset:222;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:16777217 0 0 0 65536 0;}
@font-face
	{font-family:Mangal;
	panose-1:0 0 4 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:32771 0 0 0 1 0;}
@font-face
	{font-family:Latha;
	panose-1:2 0 4 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:1048579 0 0 0 1 0;}
@font-face
	{font-family:Sylfaen;
	panose-1:1 10 5 2 5 3 6 3 3 3;
	mso-font-charset:204;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:67110535 0 0 0 159 0;}
@font-face
	{font-family:Vrinda;
	panose-1:1 1 6 0 1 1 1 1 1 1;
	mso-font-charset:0;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:65539 0 0 0 1 0;}
@font-face
	{font-family:Raavi;
	panose-1:2 0 5 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:131075 0 0 0 1 0;}
@font-face
	{font-family:Shruti;
	panose-1:2 0 5 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:262147 0 0 0 1 0;}
@font-face
	{font-family:Sendnya;
	panose-1:0 0 4 0 0 0 0 0 0 0;
	mso-font-charset:1;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:0 0 0 0 0 0;}
@font-face
	{font-family:Gautami;
	panose-1:2 0 5 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:2097155 0 0 0 1 0;}
@font-face
	{font-family:Tunga;
	panose-1:0 0 4 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:4194307 0 0 0 1 0;}
@font-face
	{font-family:"Estrangelo Edessa";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:script;
	mso-font-pitch:variable;
	mso-font-signature:-2147459005 0 128 0 1 0;}
@font-face
	{font-family:Kartika;
	panose-1:2 2 5 3 3 4 4 6 2 3;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:8388611 0 0 0 1 0;}
@font-face
	{font-family:"Arial Unicode MS";
	panose-1:2 11 6 4 2 2 2 2 2 4;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;
	mso-font-charset:204;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:-1610611985 1073750139 0 0 159 0;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;
	mso-font-charset:204;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:1627421319 -2147483648 8 0 66047 0;}
@font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;
	mso-font-charset:204;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:536871559 0 0 0 415 0;}
@font-face
	{font-family:"Times New Roman Cyr";
	panose-1:2 2 6 3 5 4 5 2 3 4;
	mso-font-charset:204;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:513 0 0 0 4 0;}
@font-face
	{font-family:"Calibri Light";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Kozuka Mincho Pro R";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:128;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:515 134676480 16 0 131077 0;}
@font-face
	{font-family:"Adobe Caslon Pro Bold";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:135 0 0 0 155 0;}
@font-face
	{font-family:"Adobe Caslon Pro";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:135 0 0 0 155 0;}
@font-face
	{font-family:"Adobe Garamond Pro Bold";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:135 0 0 0 155 0;}
@font-face
	{font-family:"Adobe Garamond Pro";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:135 0 0 0 155 0;}
@font-face
	{font-family:"Arno Pro";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Arno Pro Caption";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Arno Pro Display";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Arno Pro SmText";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Arno Pro Subhead";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Arno Pro Light Display";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Arno Pro Smbd";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Arno Pro Smbd Caption";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Arno Pro Smbd Display";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Arno Pro Smbd SmText";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Arno Pro Smbd Subhead";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Bell Gothic Std Black";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Bell Gothic Std Light";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Bickham Script Pro Regular";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:script;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:7 0 0 0 147 0;}
@font-face
	{font-family:"Bickham Script Pro Semibold";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:script;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:7 0 0 0 147 0;}
@font-face
	{font-family:"Birch Std";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:modern;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Blackoak Std";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:modern;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Brush Script Std";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:modern;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Chaparral Pro";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:135 0 0 0 155 0;}
@font-face
	{font-family:"Charlemagne Std";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:modern;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Cooper Std Black";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Eccentric Std";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:modern;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Garamond Premr Pro";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Garamond Premr Pro Smbd";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Giddyup Std";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:modern;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Hobo Std";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:modern;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Kozuka Gothic Pro B";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:128;
	mso-generic-font-family:swiss;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:515 134676480 16 0 131077 0;}
@font-face
	{font-family:"\@Kozuka Gothic Pro B";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:128;
	mso-generic-font-family:swiss;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:515 134676480 16 0 131077 0;}
@font-face
	{font-family:"Kozuka Gothic Pro EL";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:128;
	mso-generic-font-family:swiss;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:515 134676480 16 0 131077 0;}
@font-face
	{font-family:"\@Kozuka Gothic Pro EL";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:128;
	mso-generic-font-family:swiss;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:515 134676480 16 0 131077 0;}
@font-face
	{font-family:"Kozuka Gothic Pro H";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:128;
	mso-generic-font-family:swiss;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:515 134676480 16 0 131077 0;}
@font-face
	{font-family:"\@Kozuka Gothic Pro H";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:128;
	mso-generic-font-family:swiss;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:515 134676480 16 0 131077 0;}
@font-face
	{font-family:"Kozuka Gothic Pro L";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:128;
	mso-generic-font-family:swiss;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:515 134676480 16 0 131077 0;}
@font-face
	{font-family:"\@Kozuka Gothic Pro L";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:128;
	mso-generic-font-family:swiss;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:515 134676480 16 0 131077 0;}
@font-face
	{font-family:"Kozuka Gothic Pro M";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:128;
	mso-generic-font-family:swiss;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:515 134676480 16 0 131077 0;}
@font-face
	{font-family:"\@Kozuka Gothic Pro M";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:128;
	mso-generic-font-family:swiss;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:515 134676480 16 0 131077 0;}
@font-face
	{font-family:"Kozuka Gothic Pro R";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:128;
	mso-generic-font-family:swiss;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:515 134676480 16 0 131077 0;}
@font-face
	{font-family:"\@Kozuka Gothic Pro R";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:128;
	mso-generic-font-family:swiss;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:515 134676480 16 0 131077 0;}
@font-face
	{font-family:"Kozuka Mincho Pro B";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:128;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:515 134676480 16 0 131077 0;}
@font-face
	{font-family:"\@Kozuka Mincho Pro B";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:128;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:515 134676480 16 0 131077 0;}
@font-face
	{font-family:"Kozuka Mincho Pro EL";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:128;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:515 134676480 16 0 131077 0;}
@font-face
	{font-family:"\@Kozuka Mincho Pro EL";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:128;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:515 134676480 16 0 131077 0;}
@font-face
	{font-family:"Kozuka Mincho Pro H";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:128;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:515 134676480 16 0 131077 0;}
@font-face
	{font-family:"\@Kozuka Mincho Pro H";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:128;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:515 134676480 16 0 131077 0;}
@font-face
	{font-family:"Kozuka Mincho Pro L";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:128;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:515 134676480 16 0 131077 0;}
@font-face
	{font-family:"\@Kozuka Mincho Pro L";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:128;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:515 134676480 16 0 131077 0;}
@font-face
	{font-family:"Kozuka Mincho Pro M";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:128;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:515 134676480 16 0 131077 0;}
@font-face
	{font-family:"\@Kozuka Mincho Pro M";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:128;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:515 134676480 16 0 131077 0;}
@font-face
	{font-family:"\@Kozuka Mincho Pro R";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:128;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:515 134676480 16 0 131077 0;}
@font-face
	{font-family:"Letter Gothic Std";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:modern;
	mso-font-format:other;
	mso-font-pitch:fixed;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Lithos Pro Regular";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:decorative;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:135 0 0 0 155 0;}
@font-face
	{font-family:"Mesquite Std";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:modern;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Minion Pro";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Minion Pro Cond";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Minion Pro Med";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Minion Pro SmBd";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Myriad Pro";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Myriad Pro Cond";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Myriad Pro Light";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Nueva Std Cond";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:modern;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"OCR A Std";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:modern;
	mso-font-format:other;
	mso-font-pitch:fixed;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Orator Std";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:modern;
	mso-font-format:other;
	mso-font-pitch:fixed;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Poplar Std";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:modern;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Prestige Elite Std";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:modern;
	mso-font-format:other;
	mso-font-pitch:fixed;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Rosewood Std Regular";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:modern;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Stencil Std";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:modern;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Tekton Pro";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:135 0 0 0 155 0;}
@font-face
	{font-family:"Tekton Pro Cond";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:135 0 0 0 155 0;}
@font-face
	{font-family:"Tekton Pro Ext";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:135 0 0 0 155 0;}
@font-face
	{font-family:"Trajan Pro";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:135 0 0 0 155 0;}
@font-face
	{font-family:Marlett;
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:"Lucida Console";
	panose-1:2 11 6 9 4 5 4 2 2 4;
	mso-font-charset:204;
	mso-generic-font-family:modern;
	mso-font-pitch:fixed;
	mso-font-signature:-2147482993 6144 0 0 31 0;}
@font-face
	{font-family:"Lucida Sans Unicode";
	panose-1:2 11 6 2 3 5 4 2 2 4;
	mso-font-charset:204;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:-2147476737 14699 0 0 63 0;}
@font-face
	{font-family:"Arial Black";
	panose-1:2 11 10 4 2 1 2 2 2 4;
	mso-font-charset:204;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Comic Sans MS";
	panose-1:3 15 7 2 3 3 2 2 2 4;
	mso-font-charset:204;
	mso-generic-font-family:script;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:Impact;
	panose-1:2 11 8 6 3 9 2 5 2 4;
	mso-font-charset:204;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:Georgia;
	panose-1:2 4 5 2 5 4 5 2 3 3;
	mso-font-charset:204;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Franklin Gothic Medium";
	panose-1:2 11 6 3 2 1 2 2 2 4;
	mso-font-charset:204;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Palatino Linotype";
	panose-1:2 4 5 2 5 5 5 3 3 4;
	mso-font-charset:204;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-536870009 1073741843 0 0 415 0;}
@font-face
	{font-family:"Trebuchet MS";
	panose-1:2 11 6 3 2 2 2 2 2 4;
	mso-font-charset:204;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:Webdings;
	panose-1:5 3 1 2 1 5 9 6 7 3;
	mso-font-charset:2;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:"MV Boli";
	mso-font-charset:0;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 0 256 0 1 0;}
@font-face
	{font-family:"Microsoft Sans Serif";
	panose-1:2 11 6 4 2 2 2 2 2 4;
	mso-font-charset:204;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:1627421663 -2147483648 8 0 66047 0;}
@font-face
	{font-family:"Agency FB";
	panose-1:2 11 5 3 2 2 2 2 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Arial Rounded MT Bold";
	panose-1:2 15 7 4 3 5 4 3 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Blackadder ITC";
	panose-1:4 2 5 5 5 16 7 2 13 2;
	mso-font-charset:0;
	mso-generic-font-family:decorative;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Bodoni MT";
	panose-1:2 7 6 3 8 6 6 2 2 3;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Bodoni MT Black";
	panose-1:2 7 10 3 8 6 6 2 2 3;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Bodoni MT Condensed";
	panose-1:2 7 6 6 8 6 6 2 2 3;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Book Antiqua";
	panose-1:2 4 6 2 5 3 5 3 3 4;
	mso-font-charset:204;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Bookman Old Style";
	panose-1:2 5 6 4 5 5 5 2 2 4;
	mso-font-charset:204;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Bradley Hand ITC";
	panose-1:3 7 4 2 5 3 2 3 2 3;
	mso-font-charset:0;
	mso-generic-font-family:script;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Calisto MT";
	panose-1:2 4 6 3 5 5 5 3 3 4;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:Castellar;
	panose-1:2 10 4 2 6 4 6 1 3 1;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Century Gothic";
	panose-1:2 11 5 2 2 2 2 2 2 4;
	mso-font-charset:204;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Century Schoolbook";
	panose-1:2 4 6 4 5 5 5 2 3 4;
	mso-font-charset:204;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Copperplate Gothic Bold";
	panose-1:2 14 7 5 2 2 6 2 4 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Copperplate Gothic Light";
	panose-1:2 14 5 7 2 2 6 2 4 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Curlz MT";
	panose-1:4 4 4 4 5 7 2 2 2 2;
	mso-font-charset:0;
	mso-generic-font-family:decorative;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Edwardian Script ITC";
	panose-1:3 3 3 2 4 7 7 13 8 4;
	mso-font-charset:0;
	mso-generic-font-family:script;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:Elephant;
	panose-1:2 2 9 4 9 5 5 2 3 3;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Engravers MT";
	panose-1:2 9 7 7 8 5 5 2 3 4;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Eras Bold ITC";
	panose-1:2 11 9 7 3 5 4 2 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Eras Demi ITC";
	panose-1:2 11 8 5 3 5 4 2 8 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Eras Light ITC";
	panose-1:2 11 4 2 3 5 4 2 8 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Eras Medium ITC";
	panose-1:2 11 6 2 3 5 4 2 8 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Felix Titling";
	panose-1:4 6 5 5 6 2 2 2 10 4;
	mso-font-charset:0;
	mso-generic-font-family:decorative;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:Forte;
	panose-1:3 6 9 2 4 5 2 7 2 3;
	mso-font-charset:0;
	mso-generic-font-family:script;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Franklin Gothic Book";
	panose-1:2 11 5 3 2 1 2 2 2 4;
	mso-font-charset:204;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Franklin Gothic Demi";
	panose-1:2 11 7 3 2 1 2 2 2 4;
	mso-font-charset:204;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Franklin Gothic Demi Cond";
	panose-1:2 11 7 6 3 4 2 2 2 4;
	mso-font-charset:204;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Franklin Gothic Heavy";
	panose-1:2 11 9 3 2 1 2 2 2 4;
	mso-font-charset:204;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Franklin Gothic Medium Cond";
	panose-1:2 11 6 6 3 4 2 2 2 4;
	mso-font-charset:204;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"French Script MT";
	panose-1:3 2 4 2 4 6 7 4 6 5;
	mso-font-charset:0;
	mso-generic-font-family:script;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:Garamond;
	panose-1:2 2 4 4 3 3 1 1 8 3;
	mso-font-charset:204;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:Gigi;
	panose-1:4 4 5 4 6 16 7 2 13 2;
	mso-font-charset:0;
	mso-generic-font-family:decorative;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Gill Sans MT Ext Condensed Bold";
	panose-1:2 11 9 2 2 1 4 2 2 3;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:7 0 0 0 3 0;}
@font-face
	{font-family:"Gill Sans MT";
	panose-1:2 11 5 2 2 1 4 2 2 3;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:7 0 0 0 3 0;}
@font-face
	{font-family:"Gill Sans MT Condensed";
	panose-1:2 11 5 6 2 1 4 2 2 3;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:7 0 0 0 3 0;}
@font-face
	{font-family:"Gill Sans Ultra Bold";
	panose-1:2 11 10 2 2 1 4 2 2 3;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:7 0 0 0 3 0;}
@font-face
	{font-family:"Gill Sans Ultra Bold Condensed";
	panose-1:2 11 10 6 2 1 4 2 2 3;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:7 0 0 0 3 0;}
@font-face
	{font-family:"Gloucester MT Extra Condensed";
	panose-1:2 3 8 8 2 6 1 1 1 1;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Goudy Old Style";
	panose-1:2 2 5 2 5 3 5 2 3 3;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Goudy Stout";
	panose-1:2 2 9 4 7 3 11 2 4 1;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:Haettenschweiler;
	panose-1:2 11 7 6 4 9 2 6 2 4;
	mso-font-charset:204;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Imprint MT Shadow";
	panose-1:4 2 6 5 6 3 3 3 2 2;
	mso-font-charset:0;
	mso-generic-font-family:decorative;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Lucida Sans";
	panose-1:2 11 6 2 3 5 4 2 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Lucida Sans Typewriter";
	panose-1:2 11 5 9 3 5 4 3 2 4;
	mso-font-charset:0;
	mso-generic-font-family:modern;
	mso-font-pitch:fixed;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Maiandra GD";
	panose-1:2 14 5 2 3 3 8 2 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Monotype Corsiva";
	panose-1:3 1 1 1 1 2 1 1 1 1;
	mso-font-charset:204;
	mso-generic-font-family:script;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"OCR A Extended";
	panose-1:2 1 5 9 2 1 2 1 3 3;
	mso-font-charset:0;
	mso-generic-font-family:modern;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Palace Script MT";
	panose-1:3 3 3 2 2 6 7 12 11 5;
	mso-font-charset:0;
	mso-generic-font-family:script;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:Papyrus;
	panose-1:3 7 5 2 6 5 2 3 2 5;
	mso-font-charset:0;
	mso-generic-font-family:script;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:Perpetua;
	panose-1:2 2 5 2 6 4 1 2 3 3;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Perpetua Titling MT";
	panose-1:2 2 5 2 6 5 5 2 8 4;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:Pristina;
	panose-1:3 6 4 2 4 4 6 8 2 4;
	mso-font-charset:0;
	mso-generic-font-family:script;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Rage Italic";
	panose-1:3 7 5 2 4 5 7 7 3 4;
	mso-font-charset:0;
	mso-generic-font-family:script;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:Rockwell;
	panose-1:2 6 6 3 2 2 5 2 4 3;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Rockwell Condensed";
	panose-1:2 6 6 3 5 4 5 2 1 4;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Rockwell Extra Bold";
	panose-1:2 6 9 3 4 5 5 2 4 3;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Script MT Bold";
	panose-1:3 4 6 2 4 6 7 8 9 4;
	mso-font-charset:0;
	mso-generic-font-family:script;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"Tw Cen MT";
	panose-1:2 11 6 2 2 1 4 2 6 3;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:7 0 0 0 3 0;}
@font-face
	{font-family:"Tw Cen MT Condensed";
	panose-1:2 11 6 6 2 1 4 2 2 3;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:7 0 0 0 3 0;}
@font-face
	{font-family:"Wingdings 2";
	panose-1:5 2 1 2 1 5 7 7 7 7;
	mso-font-charset:2;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:"Wingdings 3";
	panose-1:5 4 1 2 1 8 7 7 7 7;
	mso-font-charset:2;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:"Bookshelf Symbol 7";
	panose-1:5 1 1 1 1 1 1 1 1 1;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:"MS Reference Sans Serif";
	panose-1:2 11 6 4 3 5 4 4 2 4;
	mso-font-charset:204;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:536871559 0 0 0 415 0;}
@font-face
	{font-family:"MS Reference Specialty";
	panose-1:5 0 5 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:"Tw Cen MT Condensed Extra Bold";
	panose-1:2 11 8 3 2 2 2 2 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:7 0 0 0 3 0;}
@font-face
	{font-family:"Arial Narrow";
	panose-1:2 11 6 6 2 2 2 3 2 4;
	mso-font-charset:204;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:647 2048 0 0 159 0;}
@font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;
	mso-font-charset:204;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-1610611985 1073741899 0 0 159 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;
	mso-font-charset:204;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-1610611985 1107304683 0 0 159 0;}
@font-face
	{font-family:Candara;
	panose-1:2 14 5 2 3 3 3 2 2 4;
	mso-font-charset:204;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:-1610611985 1073750091 0 0 159 0;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;
	mso-font-charset:204;
	mso-generic-font-family:modern;
	mso-font-pitch:fixed;
	mso-font-signature:-1610611985 1073750091 0 0 159 0;}
@font-face
	{font-family:Constantia;
	panose-1:2 3 6 2 5 3 6 3 3 3;
	mso-font-charset:204;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-1610611985 1073750091 0 0 159 0;}
@font-face
	{font-family:Corbel;
	panose-1:2 11 5 3 2 2 4 2 2 4;
	mso-font-charset:204;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:-1610611985 1073750091 0 0 159 0;}
@font-face
	{font-family:PromtImperial;
	panose-1:2 11 5 3 0 0 0 2 0 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:515 0 0 0 5 0;}
@font-face
	{font-family:"Andale Mono IPA";
	panose-1:2 11 5 4 2 1 4 2 2 3;
	mso-font-charset:2;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:"Arial Cyr";
	panose-1:2 11 6 4 2 2 2 2 2 4;
	mso-font-charset:204;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:513 0 0 0 4 0;}
@font-face
	{font-family:Nina;
	panose-1:2 11 6 6 3 5 4 4 2 4;
	mso-font-charset:204;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"Segoe Condensed";
	panose-1:2 11 6 6 4 2 0 2 2 3;
	mso-font-charset:204;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"MT Extra";
	panose-1:5 5 1 2 1 2 5 2 2 2;
	mso-font-charset:2;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-2147483648 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:Euclid;
	panose-1:2 2 5 3 6 5 5 2 3 3;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-2147483601 10 0 0 1 0;}
@font-face
	{font-family:"Euclid Symbol";
	panose-1:5 5 1 2 1 7 6 2 5 7;
	mso-font-charset:2;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-2147483648 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:"Euclid Extra";
	panose-1:2 5 5 2 0 5 5 2 3 3;
	mso-font-charset:2;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-2147483648 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:"Euclid Fraktur";
	panose-1:3 1 6 1 1 1 1 1 1 1;
	mso-font-charset:0;
	mso-generic-font-family:script;
	mso-font-pitch:variable;
	mso-font-signature:-2147483645 268435464 0 0 -2147483647 0;}
@font-face
	{font-family:"Euclid Math One";
	panose-1:5 5 6 1 1 1 1 1 1 1;
	mso-font-charset:2;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-2147483648 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:"Euclid Math Two";
	panose-1:2 5 6 1 1 1 1 1 1 1;
	mso-font-charset:2;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-2147483648 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:Fences;
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:Tiger;
	panose-1:2 7 3 0 2 2 5 2 4 4;
	mso-font-charset:204;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-1610611793 268466431 0 0 415 0;}
@font-face
	{font-family:"Tiger Expert";
	panose-1:2 7 3 0 2 2 5 2 4 4;
	mso-font-charset:204;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-1610611793 268466431 0 0 415 0;}
@font-face
	{font-family:ZWAdobeF;
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:204;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:536885895 0 0 0 511 0;}
@font-face
	{font-family:"Euro Sign";
	panose-1:2 11 6 3 2 2 1 2 1 1;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:3 2 0 0 1 0;}
@font-face
	{font-family:"‚l‚r –ѕ’©";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:auto;
	mso-font-signature:0 0 0 0 0 0;}
@font-face
	{font-family:TimesNewRoman;
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-alt:"Times New Roman";
	mso-font-charset:204;
	mso-generic-font-family:auto;
	mso-font-format:other;
	mso-font-pitch:auto;
	mso-font-signature:515 0 0 0 5 0;}
@font-face
	{font-family:TimesNewRomanPS-BoldItalicMT;
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-alt:"Times New Roman";
	mso-font-charset:204;
	mso-generic-font-family:auto;
	mso-font-format:other;
	mso-font-pitch:auto;
	mso-font-signature:515 0 0 0 5 0;}
@font-face
	{font-family:TimesNewRomanPS-BoldMT;
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-alt:"Times New Roman";
	mso-font-charset:204;
	mso-generic-font-family:auto;
	mso-font-format:other;
	mso-font-pitch:auto;
	mso-font-signature:515 0 0 0 5 0;}
@font-face
	{font-family:Times-Bold;
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-alt:"Kozuka Mincho Pro R";
	mso-font-charset:128;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:auto;
	mso-font-signature:1 134676480 16 0 131072 0;}
@font-face
	{font-family:Times-Roman;
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-alt:"Kozuka Mincho Pro R";
	mso-font-charset:128;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:auto;
	mso-font-signature:1 134676480 16 0 131072 0;}
@font-face
	{font-family:TimesNewRomanPSMT;
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-alt:"Times New Roman";
	mso-font-charset:204;
	mso-generic-font-family:auto;
	mso-font-format:other;
	mso-font-pitch:auto;
	mso-font-signature:515 0 0 0 5 0;}
@font-face
	{font-family:FreeSansBold;
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:204;
	mso-generic-font-family:auto;
	mso-font-format:other;
	mso-font-pitch:auto;
	mso-font-signature:513 0 0 0 4 0;}
@font-face
	{font-family:"Arial\,Bold";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:204;
	mso-generic-font-family:auto;
	mso-font-format:other;
	mso-font-pitch:auto;
	mso-font-signature:513 0 0 0 4 0;}
@font-face
	{font-family:NewtonC-Italic;
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:204;
	mso-generic-font-family:auto;
	mso-font-format:other;
	mso-font-pitch:auto;
	mso-font-signature:513 0 0 0 4 0;}
@font-face
	{font-family:NewtonC-Bold;
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:204;
	mso-generic-font-family:auto;
	mso-font-format:other;
	mso-font-pitch:auto;
	mso-font-signature:513 0 0 0 4 0;}
@font-face
	{font-family:TimesNewRomanPS-ItalicMT;
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-alt:"Times New Roman";
	mso-font-charset:204;
	mso-generic-font-family:auto;
	mso-font-format:other;
	mso-font-pitch:auto;
	mso-font-signature:515 0 0 0 5 0;}
@font-face
	{font-family:NewtonC;
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:204;
	mso-generic-font-family:auto;
	mso-font-format:other;
	mso-font-pitch:auto;
	mso-font-signature:513 0 0 0 4 0;}
@font-face
	{font-family:PragmaticaC-Bold;
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:204;
	mso-generic-font-family:auto;
	mso-font-format:other;
	mso-font-pitch:auto;
	mso-font-signature:513 0 0 0 4 0;}
@font-face
	{font-family:"TimesNewRoman\,BoldItalic";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:204;
	mso-generic-font-family:auto;
	mso-font-format:other;
	mso-font-pitch:auto;
	mso-font-signature:513 0 0 0 4 0;}
@font-face
	{font-family:"TimesNewRoman\,Bold";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-alt:"Times New Roman";
	mso-font-charset:204;
	mso-generic-font-family:auto;
	mso-font-format:other;
	mso-font-pitch:auto;
	mso-font-signature:515 0 0 0 5 0;}
@font-face
	{font-family:MyriadPro-Bold;
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:204;
	mso-generic-font-family:swiss;
	mso-font-format:other;
	mso-font-pitch:auto;
	mso-font-signature:513 0 0 0 4 0;}
@font-face
	{font-family:"\@Arial Unicode MS";
	mso-font-charset:128;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:-1 -369098753 63 0 4129279 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:14.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
h1
	{mso-style-next:Обычный;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:1;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:16.0pt;
	font-family:Arial;
	mso-font-kerning:16.0pt;
	font-weight:bold;}
h2
	{mso-style-next:Обычный;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:2;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:14.0pt;
	font-family:Arial;
	font-weight:bold;
	font-style:italic;}
h3
	{mso-style-next:Обычный;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:3;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:13.0pt;
	font-family:Arial;
	font-weight:bold;}
h4
	{mso-style-next:Обычный;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:4;
	font-size:14.0pt;
	font-family:"Times New Roman";
	mso-ansi-language:EN-US;
	mso-fareast-language:EN-US;
	font-weight:bold;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{mso-style-update:auto;
	mso-style-noshow:yes;
	mso-style-next:Обычный;
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:14.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{mso-style-update:auto;
	mso-style-noshow:yes;
	mso-style-next:Обычный;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:14.0pt;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:14.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{mso-style-update:auto;
	mso-style-noshow:yes;
	mso-style-next:Обычный;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:28.0pt;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:14.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoFootnoteText, li.MsoFootnoteText, div.MsoFootnoteText
	{mso-style-noshow:yes;
	mso-style-link:"Знак Знак";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:Calibri;
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"Знак Знак3";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	tab-stops:center 233.85pt right 467.75pt;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:14.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"Знак Знак2";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	tab-stops:center 207.65pt right 415.3pt;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:14.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
span.MsoFootnoteReference
	{mso-style-noshow:yes;
	vertical-align:super;}
p.MsoList, li.MsoList, div.MsoList
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:14.15pt;
	margin-bottom:.0001pt;
	text-indent:-14.15pt;
	mso-pagination:widow-orphan;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoList2, li.MsoList2, div.MsoList2
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:28.3pt;
	margin-bottom:.0001pt;
	text-indent:-14.15pt;
	mso-pagination:widow-orphan;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoBodyText, li.MsoBodyText, div.MsoBodyText
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoBodyTextIndent, li.MsoBodyTextIndent, div.MsoBodyTextIndent
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:14.15pt;
	mso-pagination:widow-orphan;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:14.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoBodyTextFirstIndent, li.MsoBodyTextFirstIndent, div.MsoBodyTextFirstIndent
	{mso-style-parent:"Основной текст";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-indent:10.5pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoBodyText2, li.MsoBodyText2, div.MsoBodyText2
	{margin:0cm;
	margin-bottom:.0001pt;
	text-indent:35.4pt;
	mso-pagination:widow-orphan;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:14.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;
	text-underline:single;}
p.MsoPlainText, li.MsoPlainText, div.MsoPlainText
	{margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:10.0pt;
	font-family:"Courier New";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
p
	{mso-margin-top-alt:auto;
	margin-right:0cm;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
code
	{font-family:"Courier New";
	mso-ascii-font-family:"Courier New";
	mso-fareast-font-family:"Times New Roman";
	mso-hansi-font-family:"Courier New";
	mso-bidi-font-family:"Courier New";}
tt
	{font-family:"Courier New";
	mso-ascii-font-family:"Courier New";
	mso-fareast-font-family:"Times New Roman";
	mso-hansi-font-family:"Courier New";
	mso-bidi-font-family:"Courier New";}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-noshow:yes;
	mso-style-link:"Знак Знак1";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:8.0pt;
	font-family:Tahoma;
	mso-fareast-font-family:"Times New Roman";}
span.a
	{mso-style-name:"Знак Знак";
	mso-style-noshow:yes;
	mso-style-locked:yes;
	mso-style-link:"Текст сноски";
	font-family:Calibri;
	mso-ascii-font-family:Calibri;
	mso-hansi-font-family:Calibri;
	mso-ansi-language:RU;
	mso-fareast-language:RU;
	mso-bidi-language:AR-SA;}
span.3
	{mso-style-name:"Знак Знак3";
	mso-style-noshow:yes;
	mso-style-locked:yes;
	mso-style-link:"Верхний колонтитул";
	mso-ansi-font-size:14.0pt;
	mso-ansi-language:RU;
	mso-fareast-language:RU;
	mso-bidi-language:AR-SA;}
span.2
	{mso-style-name:"Знак Знак2";
	mso-style-locked:yes;
	mso-style-link:"Нижний колонтитул";
	mso-ansi-font-size:14.0pt;
	mso-ansi-language:RU;
	mso-fareast-language:RU;
	mso-bidi-language:AR-SA;}
span.1
	{mso-style-name:"Знак Знак1";
	mso-style-noshow:yes;
	mso-style-locked:yes;
	mso-style-link:"Текст выноски";
	mso-ansi-font-size:8.0pt;
	mso-bidi-font-size:8.0pt;
	font-family:Tahoma;
	mso-ascii-font-family:Tahoma;
	mso-hansi-font-family:Tahoma;
	mso-bidi-font-family:Tahoma;
	mso-ansi-language:RU;
	mso-fareast-language:RU;
	mso-bidi-language:AR-SA;}
p.Iauiue, li.Iauiue, div.Iauiue
	{mso-style-name:Iau?iue;
	mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.20, li.20, div.20
	{mso-style-name:"заголовок 2";
	mso-style-next:Обычный;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:Arial;
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";
	font-weight:bold;
	mso-bidi-font-weight:normal;
	font-style:italic;
	mso-bidi-font-style:normal;}
p.caaieiaie1, li.caaieiaie1, div.caaieiaie1
	{mso-style-name:"caaieiaie 1";
	mso-style-parent:Iau?iue;
	mso-style-next:Iau?iue;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:center;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:14.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.Iacaaiea, li.Iacaaiea, div.Iacaaiea
	{mso-style-name:Iacaaiea;
	mso-style-parent:Iau?iue;
	mso-style-next:Iau?iue;
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:14.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.Iniiaiieoaeno, li.Iniiaiieoaeno, div.Iniiaiieoaeno
	{mso-style-name:"Iniiaiie oaeno";
	mso-style-parent:Iau?iue;
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:14.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.caaieiaie3, li.caaieiaie3, div.caaieiaie3
	{mso-style-name:"caaieiaie 3";
	mso-style-parent:Iau?iue;
	mso-style-next:Iau?iue;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:center;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:15.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	text-transform:uppercase;}
p.Iniiaiieoaeno2, li.Iniiaiieoaeno2, div.Iniiaiieoaeno2
	{mso-style-name:"Iniiaiie oaeno 2";
	mso-style-parent:Iau?iue;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-indent:1.0cm;
	mso-pagination:none;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:14.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.caaieiaie4, li.caaieiaie4, div.caaieiaie4
	{mso-style-name:"caaieiaie 4";
	mso-style-parent:Iau?iue;
	mso-style-next:Iau?iue;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:14.2pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-indent:-14.2pt;
	mso-pagination:none;
	page-break-after:avoid;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:14.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.caaieiaie2, li.caaieiaie2, div.caaieiaie2
	{mso-style-name:"caaieiaie 2";
	mso-style-parent:Iau?iue;
	mso-style-next:Iau?iue;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:14.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:Arial;
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";
	font-weight:bold;
	mso-bidi-font-weight:normal;
	font-style:italic;
	mso-bidi-font-style:normal;}
p.caaieiaie5, li.caaieiaie5, div.caaieiaie5
	{mso-style-name:"caaieiaie 5";
	mso-style-parent:Iau?iue;
	mso-style-next:Iau?iue;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:14.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.caaieiaie6, li.caaieiaie6, div.caaieiaie6
	{mso-style-name:"caaieiaie 6";
	mso-style-parent:Iau?iue;
	mso-style-next:Iau?iue;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-indent:1.0cm;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:14.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.BodyText2, li.BodyText2, div.BodyText2
	{mso-style-name:"Body Text 2";
	mso-style-parent:Iau?iue;
	margin:0cm;
	margin-bottom:.0001pt;
	text-indent:35.4pt;
	mso-pagination:widow-orphan;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:14.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.Aaoieeeieiioeooe, li.Aaoieeeieiioeooe, div.Aaoieeeieiioeooe
	{mso-style-name:"Aa?oiee eieiioeooe";
	mso-style-parent:Iau?iue;
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	tab-stops:center 207.65pt right 415.3pt;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.Ieieeeieiioeooe, li.Ieieeeieiioeooe, div.Ieieeeieiioeooe
	{mso-style-name:"Ie?iee eieiioeooe";
	mso-style-parent:Iau?iue;
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	tab-stops:center 207.65pt right 415.3pt;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.Iaeeiaaiiuenienie, li.Iaeeiaaiiuenienie, div.Iaeeiaaiiuenienie
	{mso-style-name:"Ia?ee?iaaiiue nienie";
	mso-style-parent:Iau?iue;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:14.15pt;
	margin-bottom:.0001pt;
	text-indent:-14.15pt;
	mso-pagination:widow-orphan;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.11, li.11, div.11
	{mso-style-name:"заголовок 11";
	mso-style-next:Обычный;
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:14.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	mso-ansi-language:EN-US;}
p.10, li.10, div.10
	{mso-style-name:"заголовок 1";
	mso-style-next:Обычный;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:center;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:15.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	text-transform:uppercase;}
p.PlainText, li.PlainText, div.PlainText
	{mso-style-name:"Plain Text";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Courier New";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
p.a0, li.a0, div.a0
	{mso-style-name:"Абзац списка";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:36.0pt;
	mso-add-space:auto;
	line-height:115%;
	mso-pagination:widow-orphan;
	font-size:11.0pt;
	font-family:Calibri;
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
p.a0CxSpFirst, li.a0CxSpFirst, div.a0CxSpFirst
	{mso-style-name:"Абзац спискаCxSpFirst";
	mso-style-type:export-only;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	mso-add-space:auto;
	line-height:115%;
	mso-pagination:widow-orphan;
	font-size:11.0pt;
	font-family:Calibri;
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
p.a0CxSpMiddle, li.a0CxSpMiddle, div.a0CxSpMiddle
	{mso-style-name:"Абзац спискаCxSpMiddle";
	mso-style-type:export-only;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	mso-add-space:auto;
	line-height:115%;
	mso-pagination:widow-orphan;
	font-size:11.0pt;
	font-family:Calibri;
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
p.a0CxSpLast, li.a0CxSpLast, div.a0CxSpLast
	{mso-style-name:"Абзац спискаCxSpLast";
	mso-style-type:export-only;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:36.0pt;
	mso-add-space:auto;
	line-height:115%;
	mso-pagination:widow-orphan;
	font-size:11.0pt;
	font-family:Calibri;
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
span.a1
	{mso-style-name:"Основной шрифт";
	mso-style-parent:"";}
span.Iniiaiieoeoo
	{mso-style-name:"Iniiaiie o?eoo";
	mso-style-parent:"";}
span.iiianoaieou
	{mso-style-name:"iiia? no?aieou";
	mso-style-parent:"Iniiaiie o?eoo";}
span.a2
	{mso-style-name:"номер страницы";}
p.msonormalcxspmiddle, li.msonormalcxspmiddle, div.msonormalcxspmiddle
	{mso-style-name:msonormalcxspmiddle;
	mso-margin-top-alt:auto;
	margin-right:0cm;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
span.msoIns
	{mso-style-type:export-only;
	mso-style-name:"";
	text-decoration:underline;
	text-underline:single;
	color:teal;}
span.msoDel
	{mso-style-type:export-only;
	mso-style-name:"";
	text-decoration:line-through;
	color:red;}
 /* Page Definitions */
 @page
	{mso-footnote-separator:url("Тема4.files/header.htm") fs;
	mso-footnote-continuation-separator:url("Тема4.files/header.htm") fcs;
	mso-endnote-separator:url("Тема4.files/header.htm") es;
	mso-endnote-continuation-separator:url("Тема4.files/header.htm") ecs;}
@page Section1
	{size:21.0cm 842.0pt;
	margin:2.0cm 51.05pt 2.0cm 62.35pt;
	mso-header-margin:35.45pt;
	mso-footer-margin:39.7pt;
	mso-page-numbers:1;
	mso-title-page:yes;
	mso-even-footer:url("Тема4.files/header.htm") ef1;
	mso-footer:url("Тема4.files/header.htm") f1;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:817187122;
	mso-list-type:hybrid;
	mso-list-template-ids:-1703762092 68747265 68747267 68747269 68747265 68747267 68747269 68747265 68747267 68747269;}
@list l0:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	font-family:Symbol;}
@list l0:level2
	{mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level3
	{mso-level-tab-stop:108.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level4
	{mso-level-tab-stop:144.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level5
	{mso-level-tab-stop:180.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level6
	{mso-level-tab-stop:216.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level7
	{mso-level-tab-stop:252.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level8
	{mso-level-tab-stop:288.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level9
	{mso-level-tab-stop:324.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l1
	{mso-list-id:1912110372;
	mso-list-type:hybrid;
	mso-list-template-ids:-1438728648 68747281 68747289 68747291 68747279 68747289 68747291 68747279 68747289 68747291;}
@list l1:level1
	{mso-level-text:"%1\)";
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l1:level2
	{mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l1:level3
	{mso-level-tab-stop:108.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l1:level4
	{mso-level-tab-stop:144.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l1:level5
	{mso-level-tab-stop:180.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l1:level6
	{mso-level-tab-stop:216.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l1:level7
	{mso-level-tab-stop:252.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l1:level8
	{mso-level-tab-stop:288.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l1:level9
	{mso-level-tab-stop:324.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Обычная таблица";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
table.MsoTableGrid
	{mso-style-name:"Сетка таблицы";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	border:solid windowtext 1.0pt;
	mso-border-alt:solid windowtext .5pt;
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-border-insideh:.5pt solid windowtext;
	mso-border-insidev:.5pt solid windowtext;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	mso-layout-grid-align:none;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="3074"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body lang=RU link=blue vlink=purple style='tab-interval:1.0cm'>

<div class=Section1>

<h2><a name="_Toc215646291"><span style='mso-no-proof:yes'>4.1. Взаимодействие
между процессами</span></a><span style='mso-no-proof:yes'><o:p></o:p></span></h2>

<h3><a name="_Toc215646292"></a><a name="_Toc41918464"><span style='mso-bookmark:
_Toc215646292'><span style='text-transform:uppercase;mso-no-proof:yes'>4.1.1. В</span><span
style='mso-no-proof:yes'>заимодействие<span style='mso-spacerun:yes'> 
</span>процессов</span></span></a><span style='mso-bookmark:_Toc215646292'><span
style='mso-no-proof:yes'> через файлы</span></span><span style='mso-no-proof:
yes'><o:p></o:p></span></h3>

<p class=Iauiue style='text-indent:1.0cm'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Все файлы,
открытые в родительском процессе до системного вызова </span><span lang=EN-US
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'>fork</span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>(), будут открыты в процессе-сыне. Процесс-сын будет иметь
свою копию свызанных с файлами дескрипторами. Но указатель для чтения-записи
для каждого из таких файлов используется совместно процессами. Если процесс-сын
выполняет перезагрузку программы с помощью </span><span lang=EN-US
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'>exec</span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>(), то указатели чтения-записи остаются неизменными и
после выполнения </span><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>exec</span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>().
Существует специальный флаг, при установке которого при вызове </span><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>exec</span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>() все файловые дескрипторы закрываются.<o:p></o:p></span></p>

<p class=Iauiue style='text-indent:1.0cm'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iauiue style='text-indent:1.0cm'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><u><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>Пример</span></u></i><i
style='mso-bidi-font-style:normal'><u><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>:<o:p></o:p></span></u></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;unistd.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;fcntl.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>int fatal(char *s)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> 
</span>printf(“%s\n”,s);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>exit(1);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>int print_pos(const char*string,int fd)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>off_t pos;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>if
((pos=fseek(fd,0,SEEC_CUR))==-1) fatal(“</span></i><i style='mso-bidi-font-style:
normal'><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:
yes'>Ошибка</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'> </span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>вызова</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> lseek”);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> 
</span>printf(“%s%ld\n”,string,pos);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>void main()<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>int fp;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>pid_t pid;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>char buf[10];<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>if ((fd=open(“data”,O_RDONLY))==-1
fatal(“</span></i><i style='mso-bidi-font-style:normal'><span style='font-size:
14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Ошибка</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> </span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>вызова</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'> open”);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> 
</span>read(fd,buf[10])<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>print_pos(“</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>До</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'> </span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>вызова</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> fork”,fd);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>switch
(pid=fork())<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>    </span>case -1 :
fatal(“</span></i><i style='mso-bidi-font-style:normal'><span style='font-size:
14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Ошибка</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> </span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>вызова</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'> fork”); break;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>    </span>case</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>0 : </span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>print</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>_</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>pos</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>(“Процесс-сын
до чтения”,</span></i><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'>fd</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'>             </span><span
style='mso-spacerun:yes'>     </span></span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;
mso-ansi-language:EN-US;mso-no-proof:yes'>read</span></i><i style='mso-bidi-font-style:
normal'><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:
yes'>(</span></i><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'>fd</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>,</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>buf</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>,10);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'>                 </span></span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>print</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>_</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>pos</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>(“Процесс-сын
после чтения”); </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>break</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'>    </span></span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;
mso-ansi-language:EN-US;mso-no-proof:yes'>default</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>: </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>wait</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>();<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'>                 </span></span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>print</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>_</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>pos</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>(“Процесс-отец
после завершения процесса-сына”,</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>fd</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'>  </span>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<h3><a name="_Toc215646293"><span style='text-transform:uppercase;mso-no-proof:
yes'>4.1.2. В</span><span style='mso-no-proof:yes'>заимодействие<span
style='mso-spacerun:yes'>  </span>процессов через каналы</span></a><span
style='mso-no-proof:yes'><o:p></o:p></span></h3>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><u><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>Прототип:<o:p></o:p></span></u></i></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>#include
&lt;unistd.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>int
pipe(int fifo[2]);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><span lang=EN-US style='font-size:
14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Для
создания коммуникационного канала между процессами используется системный вызов
<b style='mso-bidi-font-weight:normal'>pipe</b>, который создаёт файл канала,
служащий временным буфером и использующийся для того, чтобы процесс мог
записывать туда данные для других процессов и читать данные для себя. Файлу
канала имя не присваивается, следовательно это “неименованный канал”. Канал
освобождается после того, как все процессы закроют дескриптор, ссылающийся на
этот канал.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Аргумент
pipe - массив из двух целых чисел.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>В
большинстве UNIX-систем каналы однонаправленные, т.е. для чтения данных из
канала используется <b style='mso-bidi-font-weight:normal'>fifo[0]</b>, а для
записи - <b style='mso-bidi-font-weight:normal'>fifo[1]</b><o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>К данным,
хранящимся в канале, доступ производится последовательно по принципу First In
First Out (</span><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>FIFO</span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>). Процесс
не может использовать функции позиционирования в канале. Данные удаляются из
канала сразу после считывания.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><!--[if mso & !supportInlineShapes & supportFields]><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-element:field-begin;mso-field-lock:
yes'></span><span style='mso-spacerun:yes'> </span>SHAPE <span
style='mso-spacerun:yes'> </span>\* MERGEFORMAT <span style='mso-element:field-separator'></span></span><![endif]--><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><!--[if gte vml 1]><v:group id="_x0000_s1620" editas="canvas"
 style='width:246pt;height:90pt;mso-position-horizontal-relative:char;
 mso-position-vertical-relative:line' coordorigin="2334,2276" coordsize="3690,1350">
 <o:lock v:ext="edit" aspectratio="t"/>
 <v:shapetype id="_x0000_t75" coordsize="21600,21600" o:spt="75"
  o:preferrelative="t" path="m@4@5l@4@11@9@11@9@5xe" filled="f" stroked="f">
  <v:stroke joinstyle="miter"/>
  <v:formulas>
   <v:f eqn="if lineDrawn pixelLineWidth 0"/>
   <v:f eqn="sum @0 1 0"/>
   <v:f eqn="sum 0 0 @1"/>
   <v:f eqn="prod @2 1 2"/>
   <v:f eqn="prod @3 21600 pixelWidth"/>
   <v:f eqn="prod @3 21600 pixelHeight"/>
   <v:f eqn="sum @0 0 1"/>
   <v:f eqn="prod @6 1 2"/>
   <v:f eqn="prod @7 21600 pixelWidth"/>
   <v:f eqn="sum @8 21600 0"/>
   <v:f eqn="prod @7 21600 pixelHeight"/>
   <v:f eqn="sum @10 21600 0"/>
  </v:formulas>
  <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
  <o:lock v:ext="edit" aspectratio="t"/>
 </v:shapetype><v:shape id="_x0000_s1621" type="#_x0000_t75" style='position:absolute;
  left:2334;top:2276;width:3690;height:1350' o:preferrelative="f">
  <v:fill o:detectmouseclick="t"/>
  <v:path o:extrusionok="t" o:connecttype="none"/>
 </v:shape><v:shapetype id="_x0000_t202" coordsize="21600,21600" o:spt="202"
  path="m,l,21600r21600,l21600,xe">
  <v:stroke joinstyle="miter"/>
  <v:path gradientshapeok="t" o:connecttype="rect"/>
 </v:shapetype><v:shape id="_x0000_s1622" type="#_x0000_t202" style='position:absolute;
  left:2784;top:2726;width:810;height:900'>
  <v:textbox>
   <![if !mso]>
   <table cellpadding=0 cellspacing=0 width="100%">
    <tr>
     <td><![endif]>
     <div>
     <p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>Fifo[1]<o:p></o:p></span></p>
     <p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'><o:p>&nbsp;</o:p></span></p>
     <p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>Fifo[0]<o:p></o:p></span></p>
     </div>
     <![if !mso]></td>
    </tr>
   </table>
   <![endif]></v:textbox>
 </v:shape><v:shape id="_x0000_s1623" type="#_x0000_t202" style='position:absolute;
  left:4674;top:2726;width:810;height:900'>
  <v:textbox>
   <![if !mso]>
   <table cellpadding=0 cellspacing=0 width="100%">
    <tr>
     <td><![endif]>
     <div>
     <p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>Fifo[1]<o:p></o:p></span></p>
     <p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'><o:p>&nbsp;</o:p></span></p>
     <p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>Fifo[0]<o:p></o:p></span></p>
     </div>
     <![if !mso]></td>
    </tr>
   </table>
   <![endif]></v:textbox>
 </v:shape><v:line id="_x0000_s1624" style='position:absolute' from="3594,2816"
  to="4674,2816"/>
 <v:line id="_x0000_s1625" style='position:absolute' from="3594,2996" to="4134,2997"/>
 <v:line id="_x0000_s1626" style='position:absolute' from="3594,3446" to="4674,3446"/>
 <v:line id="_x0000_s1627" style='position:absolute' from="3594,3266" to="4134,3266"/>
 <v:line id="_x0000_s1628" style='position:absolute' from="4314,2996" to="4674,2996"/>
 <v:line id="_x0000_s1629" style='position:absolute' from="4314,3266" to="4674,3266"/>
 <v:line id="_x0000_s1630" style='position:absolute' from="4134,2996" to="4134,3266"/>
 <v:line id="_x0000_s1631" style='position:absolute' from="4314,2996" to="4314,3266"/>
 <v:line id="_x0000_s1632" style='position:absolute' from="3684,2906" to="3774,2906">
  <v:stroke endarrow="block"/>
 </v:line><v:line id="_x0000_s1633" style='position:absolute' from="3864,2906"
  to="3954,2907">
  <v:stroke endarrow="block"/>
 </v:line><v:line id="_x0000_s1634" style='position:absolute' from="4404,3356"
  to="4494,3357">
  <v:stroke endarrow="block"/>
 </v:line><v:line id="_x0000_s1635" style='position:absolute' from="4584,3356"
  to="4674,3357">
  <v:stroke endarrow="block"/>
 </v:line><v:line id="_x0000_s1636" style='position:absolute' from="4044,2906"
  to="4134,2907">
  <v:stroke endarrow="block"/>
 </v:line><v:line id="_x0000_s1637" style='position:absolute;flip:x' from="4314,2906"
  to="4404,2907">
  <v:stroke endarrow="block"/>
 </v:line><v:line id="_x0000_s1638" style='position:absolute;flip:x' from="4494,2906"
  to="4584,2907">
  <v:stroke endarrow="block"/>
 </v:line><v:line id="_x0000_s1639" style='position:absolute;flip:x' from="3594,3356"
  to="3684,3357">
  <v:stroke endarrow="block"/>
 </v:line><v:line id="_x0000_s1640" style='position:absolute;flip:x' from="3774,3356"
  to="3864,3357">
  <v:stroke endarrow="block"/>
 </v:line><v:line id="_x0000_s1641" style='position:absolute;flip:x' from="3954,3356"
  to="4044,3357">
  <v:stroke endarrow="block"/>
 </v:line><v:line id="_x0000_s1642" style='position:absolute' from="4224,2996"
  to="4225,3086">
  <v:stroke endarrow="block"/>
 </v:line><v:line id="_x0000_s1643" style='position:absolute' from="4224,3176"
  to="4225,3266">
  <v:stroke endarrow="block"/>
 </v:line><v:shape id="_x0000_s1644" type="#_x0000_t202" style='position:absolute;
  left:2604;top:2276;width:1260;height:360' stroked="f">
  <v:textbox>
   <![if !mso]>
   <table cellpadding=0 cellspacing=0 width="100%">
    <tr>
     <td><![endif]>
     <div>
     <p class=MsoNormal>Процесс 1</p>
     </div>
     <![if !mso]></td>
    </tr>
   </table>
   <![endif]></v:textbox>
 </v:shape><v:shape id="_x0000_s1645" type="#_x0000_t202" style='position:absolute;
  left:4494;top:2276;width:1260;height:360' stroked="f">
  <v:textbox>
   <![if !mso]>
   <table cellpadding=0 cellspacing=0 width="100%">
    <tr>
     <td><![endif]>
     <div>
     <p class=MsoNormal>Процесс 2</p>
     </div>
     <![if !mso]></td>
    </tr>
   </table>
   <![endif]></v:textbox>
 </v:shape><w:wrap type="none"/>
 <w:anchorlock/>
</v:group><![endif]--><![if !vml]><img width=328 height=125
src="Тема4.files/image001.gif" v:shapes="_x0000_s1620 _x0000_s1621 _x0000_s1622 _x0000_s1623 _x0000_s1624 _x0000_s1625 _x0000_s1626 _x0000_s1627 _x0000_s1628 _x0000_s1629 _x0000_s1630 _x0000_s1631 _x0000_s1632 _x0000_s1633 _x0000_s1634 _x0000_s1635 _x0000_s1636 _x0000_s1637 _x0000_s1638 _x0000_s1639 _x0000_s1640 _x0000_s1641 _x0000_s1642 _x0000_s1643 _x0000_s1644 _x0000_s1645"><![endif]></span><!--[if mso & !supportInlineShapes & supportFields]><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><v:shape id="_x0000_i1025" type="#_x0000_t75" style='width:246pt;
 height:90pt'>
 <v:imagedata croptop="-65520f" cropbottom="65520f"/>
</v:shape><span style='mso-element:field-end'></span></span><![endif]--><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span lang=EN-US
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Можно
определить две типовые схемы взаимодействия.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>1. Родитель
- сын: родитель вызывает pipe для создания канала, а затем с помощью fork
порождает сына. Т.к. порожденный процесс имеет копию дескрипторов файлов
процесса-отца, то теперь процесс-отец и процесс-сын могут взаимодействовать через
<b style='mso-bidi-font-weight:normal'>fifo[0]</b> и <b style='mso-bidi-font-weight:
normal'>fifo[1]</b><o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>2. Брат -
брат: родитель вызывает pipe, а затем порождает 2 или более сыновей-братьев.
Процессы-браться взаимодействуют между собой через <b style='mso-bidi-font-weight:
normal'>fifo[0]</b> и <b style='mso-bidi-font-weight:normal'>fifo[1]<o:p></o:p></b></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><b
style='mso-bidi-font-weight:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></b></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><u><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>Пример:<o:p></o:p></span></u></i></p>

<p class=Iauiue><i style='mso-bidi-font-style:normal'><span style='font-size:
14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>/* <span style='mso-tab-count:
1'>    </span>родительский процесс читает сообщения порожденного<o:p></o:p></span></i></p>

<p class=Iauiue><i style='mso-bidi-font-style:normal'><span style='font-size:
14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'>       </span>процесса-сына с помощью дескриптора </span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>fifo</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'> */<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;stdio.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;unistd.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#defin MSG_SIZE 9<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>char *msg1=”</span></i><i style='mso-bidi-font-style:
normal'><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:
yes'>Данные</span></i><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'> <st1:metricconverter ProductID="1”" w:st="on">1”</st1:metricconverter>;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>char *msg2=”</span></i><i style='mso-bidi-font-style:
normal'><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:
yes'>Данные</span></i><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'> <st1:metricconverter ProductID="2”" w:st="on">2”</st1:metricconverter>;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>int main()<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>{ pid_t<span style='mso-spacerun:yes'>  </span>pid;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>int<span
style='mso-spacerun:yes'>  </span>fifo[2],j;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>char
inbuf[MSG_SIZE];<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>if (
pipe(fifo)==-1) printf (“\n</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Ошибка</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> <span lang=EN-US>pipe!”);
_exit(1);<o:p></o:p></span></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> 
</span>switch(pid=fork())<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>     </span>case -1 :
printf (“\n </span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Ошибка</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> fork!”);
_exit(2);<o:p></o:p></span></i></p>

<p class=Iauiue><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'><span style='mso-spacerun:yes'>     </span>case 0 :
close(fifo[0]); <o:p></o:p></span></i></p>

<p class=Iauiue style='margin-left:1.0cm;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'><span
style='mso-spacerun:yes'>  </span>write (fifo[1],msg1,MSG_SIZE); <o:p></o:p></span></i></p>

<p class=Iauiue style='margin-left:1.0cm;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'><span
style='mso-spacerun:yes'>  </span>write (fifo[1],msg1,MSG_SIZE); <o:p></o:p></span></i></p>

<p class=Iauiue style='margin-left:1.0cm;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'><span
style='mso-spacerun:yes'>  </span>close(fifo[1]); <o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>   </span>default:<span
style='mso-spacerun:yes'>  </span>close(fifo[1]);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>            </span><span
style='mso-spacerun:yes'>    </span>for (j=0;j&lt;2;j++)<o:p></o:p></span></i></p>

<p class=Iauiue style='margin-left:1.0cm;text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>{<span
style='mso-spacerun:yes'>  </span>read(fifo[0],inbuf,MSG_SIZE);<span
style='mso-spacerun:yes'>  </span>printf(“ %s \n”,inbuf); }<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>               
</span>close</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>(</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>fifo</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>[0]);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'>  </span>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'> </span></span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>exit</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>(0);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>}</span></i><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span style='mso-tab-count:1'>        </span>Буфер,
связанный с каналом, имеет конечный размер. Минимальный размер канала – 512
байт. При попытке записать данные в уже заполненный канал, ядро заблокирует
процесс до тех пор, пока другой процесс не считает из канала достаточное
количество данных, чтобы заблокированный процесс смог возобновить запись. Таким
образом ядро системы пытается организовать в канал запись данных неделимой
порцией.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><u><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>Пример<o:p></o:p></span></u></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>/* проверка
ограниченности размера канала */<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;unistd.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;signed.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;limits.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>int count;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>void alrm_action(int signo)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'>  </span></span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;
mso-ansi-language:EN-US;mso-no-proof:yes'>printf</span></i><i style='mso-bidi-font-style:
normal'><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:
yes'>(“Запись заблокирована после вывода %</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;
mso-ansi-language:EN-US;mso-no-proof:yes'>d</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;
mso-no-proof:yes'> </span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>символов\</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>n</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>’,</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>count</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'>  </span></span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;
mso-ansi-language:EN-US;mso-no-proof:yes'>exit(0);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>main()<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>{ int p[2],pipe_size;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>char c=’x’;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>static struct
sigaction act;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> 
</span>act.sg_handler=alarm_action;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> 
</span>sigfillset(&amp;(act.sg_mask));<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> 
</span>sigaction(SIGALRM,&amp;act,NULL);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>if
(pipe(p)==-1) { printf(“</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Ошибка</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> pipe!\n”);
exit(1); }<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>pipe_size=fpathconf(p[0],_PC_PIPE_BUF);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>printf</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>(“Максимальный размер канала %</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>d</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'> </span></i><i style='mso-bidi-font-style:
normal'><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:
yes'>байт\</span></i><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'>n</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>”,</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>pipe</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>_</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>size</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'>  </span></span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;
mso-ansi-language:EN-US;mso-no-proof:yes'>while (1)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>    </span>alarm(20);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>   
</span>write(p[1],&amp;c,1);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>    </span>alarm(0);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>    </span>if
((++count%1024)==0) printf(“</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>В</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> </span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>канале</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'> %d </span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>символов</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>\n”,count);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span></span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>В этом
примере использовалась функция </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>fpathconf</span></i><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'>, с помощью которой можно получить
ограничения для переменной или объекта, при этом второй аргумент указывает на
тип ограничения.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Количество
процессов, которые могут присоединиться к каналу, принципиально не ограничено.
Однако если два или более процессов записывают в канал данные, то величина
записи каждого из процессов ограничена определенной в системе величиной. Через
некоторое время найдется процесс, считывающий данные из канала, после этого
опять очередь перейдёт к данному процессу и он дозапишет информацию.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span style='mso-tab-count:1'>        </span>Для
предотвращения такого недостатка коммуникационный канал обычно делают
однонаправленным и используют его для связи между двумя процессами, причем один
процесс является отправителем, а другой </span><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;font-family:Symbol;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";mso-char-type:symbol;mso-symbol-font-family:
Symbol;mso-no-proof:yes'><span style='mso-char-type:symbol;mso-symbol-font-family:
Symbol'>&frac34;</span></span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'> получателем. Если оба процесса требуют при
взаимодействии как операции передачи, так и операции приема, то целесообразно
для связи между ними создать два канала.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><!--[if mso & !supportInlineShapes & supportFields]><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-element:field-begin;mso-field-lock:
yes'></span><span style='mso-spacerun:yes'> </span>SHAPE <span
style='mso-spacerun:yes'> </span>\* MERGEFORMAT <span style='mso-element:field-separator'></span></span><![endif]--><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><!--[if gte vml 1]><v:group id="_x0000_s1598" editas="canvas"
 style='width:246pt;height:90pt;mso-position-horizontal-relative:char;
 mso-position-vertical-relative:line' coordorigin="2334,2276" coordsize="3690,1350">
 <o:lock v:ext="edit" aspectratio="t"/>
 <v:shape id="_x0000_s1599" type="#_x0000_t75" style='position:absolute;left:2334;
  top:2276;width:3690;height:1350' o:preferrelative="f">
  <v:fill o:detectmouseclick="t"/>
  <v:path o:extrusionok="t" o:connecttype="none"/>
 </v:shape><v:shape id="_x0000_s1600" type="#_x0000_t202" style='position:absolute;
  left:2784;top:2726;width:810;height:900'>
  <v:textbox>
   <![if !mso]>
   <table cellpadding=0 cellspacing=0 width="100%">
    <tr>
     <td><![endif]>
     <div>
     <p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>F1[1]<o:p></o:p></span></p>
     <p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'><o:p>&nbsp;</o:p></span></p>
     <p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>F2[0]<o:p></o:p></span></p>
     </div>
     <![if !mso]></td>
    </tr>
   </table>
   <![endif]></v:textbox>
 </v:shape><v:shape id="_x0000_s1601" type="#_x0000_t202" style='position:absolute;
  left:4674;top:2726;width:810;height:900'>
  <v:textbox>
   <![if !mso]>
   <table cellpadding=0 cellspacing=0 width="100%">
    <tr>
     <td><![endif]>
     <div>
     <p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>F1[0]<o:p></o:p></span></p>
     <p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'><o:p>&nbsp;</o:p></span></p>
     <p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>F2[1]<o:p></o:p></span></p>
     </div>
     <![if !mso]></td>
    </tr>
   </table>
   <![endif]></v:textbox>
 </v:shape><v:line id="_x0000_s1602" style='position:absolute' from="3594,2816"
  to="4674,2816"/>
 <v:line id="_x0000_s1603" style='position:absolute' from="3594,2996" to="4674,2997"/>
 <v:line id="_x0000_s1604" style='position:absolute' from="3594,3446" to="4674,3446"/>
 <v:line id="_x0000_s1605" style='position:absolute' from="3594,3266" to="4674,3267"/>
 <v:line id="_x0000_s1606" style='position:absolute' from="3684,2906" to="3774,2906">
  <v:stroke endarrow="block"/>
 </v:line><v:line id="_x0000_s1607" style='position:absolute' from="3864,2906"
  to="3954,2907">
  <v:stroke endarrow="block"/>
 </v:line><v:line id="_x0000_s1608" style='position:absolute;flip:x' from="4314,3356"
  to="4404,3357">
  <v:stroke endarrow="block"/>
 </v:line><v:line id="_x0000_s1609" style='position:absolute;flip:x' from="4494,3356"
  to="4584,3357">
  <v:stroke endarrow="block"/>
 </v:line><v:line id="_x0000_s1610" style='position:absolute' from="4044,2906"
  to="4134,2907">
  <v:stroke endarrow="block"/>
 </v:line><v:line id="_x0000_s1611" style='position:absolute' from="4224,2906"
  to="4314,2907">
  <v:stroke endarrow="block"/>
 </v:line><v:line id="_x0000_s1612" style='position:absolute' from="4404,2906"
  to="4494,2907">
  <v:stroke endarrow="block"/>
 </v:line><v:line id="_x0000_s1613" style='position:absolute;flip:x' from="3594,3356"
  to="3684,3357">
  <v:stroke endarrow="block"/>
 </v:line><v:line id="_x0000_s1614" style='position:absolute;flip:x' from="3774,3356"
  to="3864,3357">
  <v:stroke endarrow="block"/>
 </v:line><v:line id="_x0000_s1615" style='position:absolute;flip:x' from="3954,3356"
  to="4044,3357">
  <v:stroke endarrow="block"/>
 </v:line><v:shape id="_x0000_s1616" type="#_x0000_t202" style='position:absolute;
  left:2604;top:2276;width:1260;height:360' stroked="f">
  <v:textbox>
   <![if !mso]>
   <table cellpadding=0 cellspacing=0 width="100%">
    <tr>
     <td><![endif]>
     <div>
     <p class=MsoNormal>Процесс 1</p>
     </div>
     <![if !mso]></td>
    </tr>
   </table>
   <![endif]></v:textbox>
 </v:shape><v:shape id="_x0000_s1617" type="#_x0000_t202" style='position:absolute;
  left:4494;top:2276;width:1260;height:360' stroked="f">
  <v:textbox>
   <![if !mso]>
   <table cellpadding=0 cellspacing=0 width="100%">
    <tr>
     <td><![endif]>
     <div>
     <p class=MsoNormal>Процесс 2</p>
     </div>
     <![if !mso]></td>
    </tr>
   </table>
   <![endif]></v:textbox>
 </v:shape><v:line id="_x0000_s1618" style='position:absolute' from="4584,2906"
  to="4674,2907">
  <v:stroke endarrow="block"/>
 </v:line><v:line id="_x0000_s1619" style='position:absolute;flip:x' from="4134,3356"
  to="4224,3357">
  <v:stroke endarrow="block"/>
 </v:line><w:wrap type="none"/>
 <w:anchorlock/>
</v:group><![endif]--><![if !vml]><img width=328 height=125
src="Тема4.files/image002.gif" v:shapes="_x0000_s1598 _x0000_s1599 _x0000_s1600 _x0000_s1601 _x0000_s1602 _x0000_s1603 _x0000_s1604 _x0000_s1605 _x0000_s1606 _x0000_s1607 _x0000_s1608 _x0000_s1609 _x0000_s1610 _x0000_s1611 _x0000_s1612 _x0000_s1613 _x0000_s1614 _x0000_s1615 _x0000_s1616 _x0000_s1617 _x0000_s1618 _x0000_s1619"><![endif]></span><!--[if mso & !supportInlineShapes & supportFields]><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><v:shape id="_x0000_i1026" type="#_x0000_t75" style='width:246pt;
 height:90pt'>
 <v:imagedata croptop="-65520f" cropbottom="65520f"/>
</v:shape><span style='mso-element:field-end'></span></span><![endif]--><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span lang=EN-US
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span style='mso-tab-count:1'>        </span>Если
дескриптора файла, связанного с записывающей стороной канала не существует, то
эта сторона считается закрытой и любой процесс, пытающиеся считать данные из
канала, получает оставшиеся в нем данные. Если все данные прочитаны, то
получает признак конца файла. Если же не существует дескриптора файла,
связанного с читающей стороной канала, а процесс пытается записать данные в
канал, то ядро формирует для данного канала сигнал SIGPIPE. Действие по
умолчанию на этот сигнал - завершение процесса.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Если
дескриптор для записи в канал установлен неблокирующим, то системный вызов
записи </span><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;
mso-ansi-language:EN-US;mso-no-proof:yes'>write</span><span lang=EN-US
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'> </span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>не будет
блокироваться, а будет возвращать -1 и </span><span lang=EN-US
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'>errno</span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>::=</span><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>EAGAIN</span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>. Если
дескриптор для чтения с канала установлен неблокирующим, то системный вызов
чтения </span><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;
mso-ansi-language:EN-US;mso-no-proof:yes'>read</span><span style='font-size:
14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'> в случае пустого канала
возврати -1 и </span><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>errno</span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>::=</span><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>EAGAIN</span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><u><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>Пример:<o:p></o:p></span></u></i></p>

<p class=Iauiue><i style='mso-bidi-font-style:normal'><span style='font-size:
14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>/* <span style='mso-tab-count:
1'>    </span>организация неблокирующего действия чтения-записи<span
style='mso-spacerun:yes'>   </span>*/<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;unistd.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;fcntl.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;errno.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#defin M_S 10<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>char</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'> *</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>msg</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>1=”Начало!!!”;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>char</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'> *</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>msg</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>2=”Окончание”;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>int parent(int p[2])<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>{ int n_read;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>char buf[M_S];<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>close[p[1]);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>for(;;)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>    </span>switch
(n_read=read(p[0],buf,M_S))<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>    </span>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>      </span>case -1 :
if (errno==EAGAIN)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>                    
</span>{ printf(“</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Канал</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> </span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>пуст</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>\n”); sleep(1); break; }<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>                   
</span>else { printf(“</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Ошибка</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> read\n”);
exit(1); }<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>      </span>case</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>0 : </span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>printf</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>(“Канал закрыт. Конец связи\</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>n</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>”); </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>exit</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>(0);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'>      </span></span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;
mso-ansi-language:EN-US;mso-no-proof:yes'>default: printf(“MSG=%s\n,buf);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>    </span>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>int child(int p[2])<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>{ int count;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>close(p[0]);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>for
(count=0;count&lt;3; count++)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>   
</span>write(p[1],msg1,M_S);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>     </span>sleep(3);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>write(p[1],msg2,M_S);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>exit(0);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>int main()<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>{ int pfd[2],j;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> </span><o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> </span>if (
pipe(fifo)==-1) printf (“\n</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Ошибка</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> pipe!”);
_exit(1);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>if
(fcntl(pfd[0],F_SETFL,O_NONBLOCK)==-1)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>{ printf(“</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>Ошибка</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'> fcntl\n”); exit(2); }<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>switch (fork())<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>     </span>case -1 :
printf (“\n </span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Ошибка</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> <span lang=EN-US>fork!”);
_exit(3);<o:p></o:p></span></span></i></p>

<p class=Iauiue><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'><span style='mso-spacerun:yes'>     </span>case 0<span
style='mso-spacerun:yes'>  </span>: child(pfd);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>     </span>defaut :
paret(pfd);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><u><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>Прототип</span></u></i><i style='mso-bidi-font-style:
normal'><u><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;
mso-ansi-language:EN-US;mso-no-proof:yes'>:<o:p></o:p></span></u></i></p>

<p class=Iauiue style='text-align:justify;text-indent:18.0pt'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>#include
&lt;sys/time.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='margin-left:18.0pt;text-align:justify'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>int select
(int nfds, fd_set * readfds, fd_set * writefds, fd_set * errorfds, struct
timeval *timeout)</span></i><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> - </span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>системный</span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'> </span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>вызов</span><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>, </span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>показывающий</span><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>, </span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>какие</span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> </span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>дескрипторы</span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'> </span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>из</span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> </span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>заданных</span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'> </span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>наборов</span><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> </span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>готовы</span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'> </span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>для</span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> </span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>чтения</span><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>, </span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>записи</span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> </span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>или</span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'> </span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>ожидают</span><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> </span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>обработку</span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'> </span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>ошибок</span><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>. <o:p></o:p></span></p>

<p class=Iauiue style='margin-left:1.0cm;text-align:justify'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='margin-left:1.0cm;text-align:justify'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>struct
timeval<o:p></o:p></span></i></p>

<p class=Iauiue style='margin-left:1.0cm;text-align:justify'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>{<o:p></o:p></span></i></p>

<p class=Iauiue style='margin-left:1.0cm;text-align:justify'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'><span
style='mso-spacerun:yes'>  </span>long tv_sec;<o:p></o:p></span></i></p>

<p class=Iauiue style='margin-left:1.0cm;text-align:justify'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'><span
style='mso-spacerun:yes'>  </span>long tv_usec;<o:p></o:p></span></i></p>

<p class=Iauiue style='margin-left:1.0cm;text-align:justify'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>}<o:p></o:p></span></i></p>

<p class=Iauiue style='margin-left:1.0cm;text-align:justify'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='margin-left:1.0cm;text-align:justify'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>void
FD_ZERO(fd_set *fdset);<span style='mso-spacerun:yes'>        </span>// </span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>инициализация</span></i><i style='mso-bidi-font-style:
normal'><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'> </span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>битовой</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> </span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>маски</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'> </span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>нулями</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'><o:p></o:p></span></i></p>

<p class=Iauiue style='margin-left:1.0cm;text-align:justify'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>void
FD_SET(int fd, fd_set *fdset)<span style='mso-spacerun:yes'>  </span>// </span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>установка</span></i><i style='mso-bidi-font-style:
normal'><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'> </span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>бита</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> fd ( </span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>в</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'> </span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>единицу</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> )<o:p></o:p></span></i></p>

<p class=Iauiue style='margin-left:1.0cm;text-align:justify'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>int
FD_ISSET(int fd,fd_set *fdset)<span style='mso-spacerun:yes'>  </span>// </span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>проверка</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'> </span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>бита</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> fd<o:p></o:p></span></i></p>

<p class=Iauiue style='margin-left:1.0cm;text-align:justify'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>void
FD_CLR(int fd,fd_set *fdse</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>е</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>) // </span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>сбить</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'> </span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>бит</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> fd ( </span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>нулём</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'> )<o:p></o:p></span></i></p>

<p class=Iauiue style='margin-left:18.0pt;text-align:justify;text-indent:10.35pt'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iauiue style='margin-left:18.0pt;text-align:justify;text-indent:10.35pt'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Первый
параметр – число дескрипторов файлов, которые могут представлять интерес для процесса.
Можно использовать </span><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>FD</span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>_</span><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>SETSIZE</span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'> ( максимальное число дескрипторов файлов, которые
могут быть переданы вызовом </span><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>select</span><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>
</span><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:
yes'>).По умолчанию уже существует три дескриптора – </span><span lang=EN-US
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'>stdin</span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>, </span><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>stdout</span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>, </span><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>stderr</span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>. Тип </span><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>fd</span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>_</span><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>set</span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'> используется для определения размера переменной для
хранения битового вектора ( маски ), в которой каждый бит соответствует
дескриптору файла ( 1 – да, 0 – нет ).<o:p></o:p></span></p>

<p class=Iauiue style='margin-left:18.0pt;text-align:justify;text-indent:10.35pt'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Если </span><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>struct</span><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'> </span><span lang=EN-US
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'>timeval</span><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'> </span><span style='font-size:
14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>равен нулю, то </span><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>select</span><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'> </span><span style='font-size:
14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>немедленно завершится, иначе
при не активных файловых дескрипторах возврат из вызова произойдёт через
указанное время.<o:p></o:p></span></p>

<p class=Iauiue style='margin-left:18.0pt;text-align:justify;text-indent:10.35pt'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Функция
возвращает -1 при ошибке, 0 при истечении интервала ожидания, или число
дескрипторов, обработанных процессом.<o:p></o:p></span></p>

<p class=Iauiue><i style='mso-bidi-font-style:normal'><span style='font-size:
14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><u><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>Пример:<o:p></o:p></span></u></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>/*
взаимодействие родительского процесса с 3 сыновьями через каналы */<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;sys/time.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;sys/wait.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#defin M_S 7<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>char *msg1=”</span></i><i style='mso-bidi-font-style:
normal'><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:
yes'>Привет</span></i><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'>”;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>char *msg2=”</span></i><i style='mso-bidi-font-style:
normal'><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:
yes'>Пока</span></i><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'>!!”;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>void parent(int p[3][2])<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>{ char buf[M_S],ch;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>fd_set
set,sset;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>int i;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>for
(i=0;i&lt;3;i++) close(p[i][1]); <o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> 
</span>FD_ZERO(&amp;sset);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> 
</span>FD_SET(0,&amp;sset);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>for
(i=0;i&lt;3;i++) FD_SET(p[i][0],&amp;sset);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>while
(set=sset,select(p[2][0]+1,&amp;set,NULL,NULL,NULL)&gt;0)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>    </span>if
(FD_ISSET(0,&amp;set)) printf(“</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Из</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> </span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>стандартного</span></i><i style='mso-bidi-font-style:
normal'><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'> </span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>ввода</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>\n”);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>   
</span>read(0,&amp;ch,1);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>   
</span>printf(“%c\n”,ch);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>    </span>for
(i=0;i&lt;3;i++)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>      </span>if
(FD_ISSET(p[i][0],&amp;set))<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>         </span>if
read(p[i][0].buf,M_S]&gt;0)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>            
</span>printf</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>(Сообщение
от сына %</span></i><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'>d</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>\</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>nMSG</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>=&amp;</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>s</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>\</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>n</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>”,</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>I</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>,</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>buf</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'>    </span></span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;
mso-ansi-language:EN-US;mso-no-proof:yes'>if (waitpid(-1,NULL,WNOHANG)==-1)
return;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>int child(int p[2])<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>{<span style='mso-spacerun:yes'>  </span>int i;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>close(p[0]);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>for
(i=0;i&lt;2;i++)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>   
</span>write(p[1],msg1,M_S);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>     </span>sleep(1);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> 
</span>write(p[1],msg2,M_S);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>exit(0);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>int main()<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>{ int pip[3][2],i;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>for
(i=0;i&lt;3;i++)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>    </span>pipe(pip[i]);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>    </span>switch
(fork())<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>    </span>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>      </span>case -1 :
printf(“</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Ошибка</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> fork\n”);
exit(1);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>      </span>case 0<span
style='mso-spacerun:yes'>  </span>: child(pip[i]);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>    </span>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> </span>parent(pip);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> </span>exit</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>(0)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>}<o:p></o:p></span></i></p>

<p class=Iauiue style='margin-left:18.0pt;text-align:justify;text-indent:10.35pt'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:21.3pt'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>С помощью именованых
каналов можно устанавливать связь не только с родственными процессами.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:21.3pt'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-tab-count:1'>        </span><u>Прототип</u></span></i><i
style='mso-bidi-font-style:normal'><u><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>:<o:p></o:p></span></u></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;sys/types.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;sys/stat.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>int mkfifol (const char *pathname, mode_t mode);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><u><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>Пример использования:<o:p></o:p></span></u></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>int</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>
</span></i><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'>fd</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>mkfifo</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>(“/</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>tmp</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>/</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>fifo</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>1”,0666);<o:p></o:p></span></i></p>

<p class=Iauiue style='margin-left:36.0pt;text-align:justify;text-indent:-18.0pt;
mso-list:l1 level1 lfo2;tab-stops:list 36.0pt'><![if !supportLists]><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'><span
style='mso-list:Ignore'>1)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span></span></i><![endif]><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>fd=open(“/tmp/fifo1”,O_WRONLY);<o:p></o:p></span></i></p>

<p class=Iauiue style='margin-left:36.0pt;text-align:justify;text-indent:-18.0pt;
mso-list:l1 level1 lfo2;tab-stops:list 36.0pt'><![if !supportLists]><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'><span
style='mso-list:Ignore'>2)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span></span></i><![endif]><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>if ((fd=open(“/tmp/fifo1”,O_WRONLY|O_NONBLOCK))==-1)<o:p></o:p></span></i></p>

<p class=Iauiue style='margin-left:2.0cm;text-align:justify'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>printf</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>(“Ошибка </span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;
mso-ansi-language:EN-US;mso-no-proof:yes'>open</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;
mso-no-proof:yes'> </span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>для канала </span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>FIFO</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>\</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>n</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>”);<o:p></o:p></span></i></p>

<p class=Iauiue style='margin-left:2.0cm;text-align:justify'><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Данные
команды будут по-разному себя вести. В первом случае процесс ожидает, пока другой
процесс не откроет канал для противоположного действия. Во втором случае в </span><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>errno</span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>::=</span><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>ENXIO</span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>Пример:<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>/*
использование именнованых каналов */<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;fcntl.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;stdio.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;errno.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#define M_S 64<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>char *fifo=”FIFO_1”<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>main(int argc, char *argv[])<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>{ int fd,j,n_w;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>char
ms_buf[M_S];<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>if</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'> (</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>argc</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>&lt;2) { </span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>printf</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>(“Нет передаваемого сообщения”\</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>n</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>”); </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>exit</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>(1); }<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'>  </span></span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;
mso-ansi-language:EN-US;mso-no-proof:yes'>if
((fd=open(fifo,O_WRONLY|O_NONBLOCK))&lt;0)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>{ printf(“</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>Ошибка</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'> </span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>вызова</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> open </span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>для</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'> fifo”); exit(2); };<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>for
(j=1;j&lt;argc;j++)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>    </span>if (strlen(argv[j])&gt;M_S-1)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>    </span></span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>{ </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>printf</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>(“Шлишком
длинное сообщение %</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>s</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>\</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>n</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>”,</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>argv</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>[</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>j</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>]); </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>continue</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>; };<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'>    </span></span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;
mso-ansi-language:EN-US;mso-no-proof:yes'>strcpy(ms_buf,argv[j]);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>    </span>if
((n_w=write(fd,ms_buf,M_S))==-1)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>    </span></span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>{ </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>printf</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>(“Ошибка
записи сообщения\</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>n</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>”); </span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>exit</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>(3); };<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'>  </span></span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;
mso-ansi-language:EN-US;mso-no-proof:yes'>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>exit(0);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>}<o:p></o:p></span></i></p>

<p class=Iauiue style='margin-left:82.35pt;text-align:justify'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>- - - -<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>main(int argc&lt; char *argv[])<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>{ int fd,i;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>char
ms_buf[M_S];<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>if
(mrfifo(fifo,0666)==-1)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>{ printf(“</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>Ошибка</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'> </span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>при</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> </span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>открытии</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'> fifo\n”); exit(2); }<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>for
(i=0;i&lt;20;i++)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>    </span>if
(read(fd,ms_buf,M_S)&lt;0)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>    </span></span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>{ </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>printf</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>(“Ошибка
чтения из канала\</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>n</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>”); </span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>exit</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>(3); }<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'>    </span></span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;
mso-ansi-language:EN-US;mso-no-proof:yes'>printf</span></i><i style='mso-bidi-font-style:
normal'><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:
yes'>(“Получено сообщение:%</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>s</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>\</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>n</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>”,</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>ms</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>buf</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'>  </span>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'>  </span></span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;
mso-ansi-language:EN-US;mso-no-proof:yes'>exit</span></i><i style='mso-bidi-font-style:
normal'><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:
yes'>(0);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>}<o:p></o:p></span></i></p>

<p class=11><span style='mso-ansi-language:RU;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<h3><a name="_Toc215646294"><span style='text-transform:uppercase;mso-no-proof:
yes'>4.1.3. В</span><span style='mso-no-proof:yes'>заимодействие<span
style='mso-spacerun:yes'>  </span>процессов с использованием сигналов</span></a><span
style='mso-no-proof:yes'><o:p></o:p></span></h3>

<p class=Iniiaiieoaeno style='text-align:justify;text-indent:1.0cm'><span
style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iniiaiieoaeno style='text-align:justify;text-indent:1.0cm'><span
style='mso-no-proof:yes'>Сигналы являются средством передачи уведомления о
некотором произошедшем событии между процессами или между ядром системы и
процессами. Сигналы рассматриваются как форма межпроцессорного взаимодействия,
хотя по сути напоминают прерывания, генерируемые при нарушении нормального
выполнения процесса. Каждый сигнал имеет уникальное имя и имеются два системных
вызова для генерации сигналов.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-tab-count:1'>        </span><u>Прототипы</u></span></i><i
style='mso-bidi-font-style:normal'><u><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>:<o:p></o:p></span></u></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;sys/types.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;signal.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>int kill (pid_t pid, int sig);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>int raise
(int sig);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify;text-indent:35.4pt'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Системный
вызов <b style='mso-bidi-font-weight:normal'>kill</b> посылает сигнал процессу
или группе процессов. Тип сигнала определяется аргументом <b style='mso-bidi-font-weight:
normal'>sig</b>, а первый аргумент определяет, кому посылается сигнал.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Если <i
style='mso-bidi-font-style:normal'>PID&gt;0</i>, сигнал посылается процессу,
идентификатор которого равен PID.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Если <i
style='mso-bidi-font-style:normal'>PID=0</i>, то сигнал посылается всем
процессам из группы процессов, к которой принадлежит процесс, посылающий
сигнал.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Если <i
style='mso-bidi-font-style:normal'>PID&lt;1</i>, то сигнал посылается всем
процессам, идентификатор группы которых равен абсолютному значению pid.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Второй
системный вызов <b style='mso-bidi-font-weight:normal'>raise</b>
предназначается для генерации сигнала <b style='mso-bidi-font-weight:normal'>sig</b>
для текущего процесса.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Системные
вызовы возвращают 0 в случае успешной посылки сигнала. <b style='mso-bidi-font-weight:
normal'>Kill</b> в случае ошибки возвращает –1, а <b style='mso-bidi-font-weight:
normal'>raise</b> – ненулевое значение. <o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>В случае
ошибки обнаруживаются ошибочные ситуации:<o:p></o:p></span></p>

<p class=caaieiaie5 style='text-indent:1.0cm'><i style='mso-bidi-font-style:
normal'><span style='mso-no-proof:yes'>EINVAL</span></i><span style='mso-no-proof:
yes'> - сигнал не является номером сигнала; <o:p></o:p></span></p>

<p class=caaieiaie5 style='text-indent:1.0cm'><i style='mso-bidi-font-style:
normal'><span style='mso-no-proof:yes'>EPERM</span></i><span style='mso-no-proof:
yes'> - процесс не правомочен посылать сигнал указанному принимающему процессу;<o:p></o:p></span></p>

<p class=caaieiaie5 style='text-indent:1.0cm'><i style='mso-bidi-font-style:
normal'><span style='mso-no-proof:yes'>ESRCH</span></i><span style='mso-no-proof:
yes'> - </span><span lang=EN-US style='mso-ansi-language:EN-US;mso-no-proof:
yes'>pid</span><span lang=EN-US style='mso-no-proof:yes'> </span><span
style='mso-no-proof:yes'>не является идентификатором процесса или группы
процессов.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>К генерации
сигнала могут привести следующие ситуации:<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>1. Ядро
посылает процессу или группе процессов сигнал при нажатии пользователем
определенных клавиш или их комбинаций (например, Ctrl-C).<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>2.
Аппаратные особые ситуации (деление на 0, обращение к недопустимой области
памяти, нарушение защиты памяти, отсутствие требуемой страницы в памяти и
т.д.). Обычно эти ситуации определяются аппаратурой машины, и ядру операционной
системы посылаются соответствующие уведомления, например, в виде прерывания, а
ядро реагирует на такое событие отправкой соответствующего сигнала процессу,
который находился в стадии выполнения, когда произошла особая ситуация.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>3.
Определенные программные состояния системы или ее компонентов. Эти причины
имеют чисто программный характер. К такой ситуации относится посылка сигнала по
срабатыванию таймера, установленного с помощью специального системного вызова <b
style='mso-bidi-font-weight:normal'>alarm</b>. <o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>При
получении сигнала может быть выбрано одно из следующих действий реагирования:<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>-
игнорирование сигнала;<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>- перехват
и самостоятельная обработка сигнала;<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>-
выполнение действия по умолчанию.<o:p></o:p></span></p>

<p class=Iniiaiieoaeno2><span style='mso-no-proof:yes'>Есть два сигнала
(SIGKILL и SIGSTOP), которые невозможно ни игнорировать, ни перехватывать.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Существует
определенный набор сигналов. В качестве действия по умолчанию при получении
сигнала могут быть:<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span style='mso-tab-count:1'>        </span>-
завершение текущего процесса;<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span style='mso-tab-count:1'>        </span>-
завершение и создание файла </span><b style='mso-bidi-font-weight:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>core</span></b><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'>;<o:p></o:p></span></p>

<p class=MsoNormal><span style='mso-no-proof:yes'><span style='mso-tab-count:
1'>        </span>- игнорирование.<o:p></o:p></span></p>

<p class=MsoNormal><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iauiue style='tab-stops:-99.25pt'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Таблица 1 - Основные сигналы ОС </span><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>UNIX</span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'><o:p></o:p></span></p>

<p class=Iauiue style='margin-left:36.0pt;text-align:justify;tab-stops:-99.25pt'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none;mso-border-alt:solid windowtext .75pt;
 mso-padding-alt:0cm 5.4pt 0cm 5.4pt;mso-border-insideh:.75pt solid windowtext;
 mso-border-insidev:.75pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
  <td width=45 valign=top style='width:26.7pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue align=center style='text-align:center'><span
  style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>
  </td>
  <td width=123 valign=top style='width:73.85pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue align=center style='text-align:center'><span
  style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Название<o:p></o:p></span></p>
  </td>
  <td width=173 valign=top style='width:103.7pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue align=center style='text-align:center'><span
  style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Действие
  по умолчанию<o:p></o:p></span></p>
  </td>
  <td width=457 valign=top style='width:274.3pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=caaieiaie1><span style='mso-no-proof:yes'>Комментарии<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1'>
  <td width=45 valign=top style='width:26.7pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue align=center style='text-align:center'><span
  style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>1<o:p></o:p></span></p>
  </td>
  <td width=123 valign=top style='width:73.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>SIGABRT<o:p></o:p></span></p>
  </td>
  <td width=173 valign=top style='width:103.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Завершить +core<o:p></o:p></span></p>
  </td>
  <td width=457 valign=top style='width:274.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Сигнал отправляется, если процесс
  вызывает системный вызов <b style='mso-bidi-font-weight:normal'>abort</b>.<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:2'>
  <td width=45 valign=top style='width:26.7pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue align=center style='text-align:center'><span
  style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>2<o:p></o:p></span></p>
  </td>
  <td width=123 valign=top style='width:73.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>SIGALRM<o:p></o:p></span></p>
  </td>
  <td width=173 valign=top style='width:103.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Завершить<o:p></o:p></span></p>
  </td>
  <td width=457 valign=top style='width:274.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Сигнал отправляется, когда
  срабатывает таймер, ранее установленный с помощью системного вызова <b
  style='mso-bidi-font-weight:normal'>alarm</b>. <o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:3'>
  <td width=45 valign=top style='width:26.7pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue align=center style='text-align:center'><span
  style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>3<o:p></o:p></span></p>
  </td>
  <td width=123 valign=top style='width:73.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>SIGBUS<o:p></o:p></span></p>
  </td>
  <td width=173 valign=top style='width:103.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Завершить +core<o:p></o:p></span></p>
  </td>
  <td width=457 valign=top style='width:274.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Сигнал свидетельствует о
  некоторой аппаратной ошибке. Обычно отправляется при обращении к допустимому
  виртуальному адресу, для которого отсутствует соответствующая физическая
  страница.<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:4'>
  <td width=45 valign=top style='width:26.7pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue align=center style='text-align:center'><span
  style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>4<o:p></o:p></span></p>
  </td>
  <td width=123 valign=top style='width:73.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>SIGCHLD<o:p></o:p></span></p>
  </td>
  <td width=173 valign=top style='width:103.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Игнорирование<o:p></o:p></span></p>
  </td>
  <td width=457 valign=top style='width:274.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Сигнал, посылаемый родительскому
  процессу при завершении выполнения его потомка.<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:5'>
  <td width=45 valign=top style='width:26.7pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue align=center style='text-align:center'><span
  style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>5<o:p></o:p></span></p>
  </td>
  <td width=123 valign=top style='width:73.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>SIGEVG<o:p></o:p></span></p>
  </td>
  <td width=173 valign=top style='width:103.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Завершить +core<o:p></o:p></span></p>
  </td>
  <td width=457 valign=top style='width:274.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Сигнал свидетельствует о попытке
  обращения к недопустимому адресу или к области памяти, для которой у процесса
  недостаточно привилегий.<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:6'>
  <td width=45 valign=top style='width:26.7pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue align=center style='text-align:center'><span
  style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>6<o:p></o:p></span></p>
  </td>
  <td width=123 valign=top style='width:73.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>SIGFPE<o:p></o:p></span></p>
  </td>
  <td width=173 valign=top style='width:103.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Завершить +core<o:p></o:p></span></p>
  </td>
  <td width=457 valign=top style='width:274.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Сигнал свидетельствует о
  возникновении особых ситуаций, таких, как деление на ноль или переполнение
  операций с плавающей точкой.<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:7'>
  <td width=45 valign=top style='width:26.7pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue align=center style='text-align:center'><span
  style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>7<o:p></o:p></span></p>
  </td>
  <td width=123 valign=top style='width:73.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>SIGHUP<o:p></o:p></span></p>
  </td>
  <td width=173 valign=top style='width:103.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Завершить<o:p></o:p></span></p>
  </td>
  <td width=457 valign=top style='width:274.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Сигнал посылается лидеру сеанса, связанному
  с управляющим терминалом, когда ядро обнаруживает, что терминал отсоединился.
  Сигнал также посылается всем процессам группы при завершении работы лидера.
  Этот сигнал может быть использован при необходимости передачи сообщений
  процессам-демонам.<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:8'>
  <td width=45 valign=top style='width:26.7pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue align=center style='text-align:center'><span
  style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>8<o:p></o:p></span></p>
  </td>
  <td width=123 valign=top style='width:73.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>SIGILL<o:p></o:p></span></p>
  </td>
  <td width=173 valign=top style='width:103.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Завершить +core<o:p></o:p></span></p>
  </td>
  <td width=457 valign=top style='width:274.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Сигнал посылается ядром, если
  процесс попытался выполнить недопустимую операцию.<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:9'>
  <td width=45 valign=top style='width:26.7pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue align=center style='text-align:center'><span
  style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>9<o:p></o:p></span></p>
  </td>
  <td width=123 valign=top style='width:73.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>SIGINT<o:p></o:p></span></p>
  </td>
  <td width=173 valign=top style='width:103.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Завершить<o:p></o:p></span></p>
  </td>
  <td width=457 valign=top style='width:274.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Сигнал посылается всем процессам
  данной группы при нажатии клавиш Ctrl-C или Del.<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:10'>
  <td width=45 valign=top style='width:26.7pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue align=center style='text-align:center'><span
  style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>10<o:p></o:p></span></p>
  </td>
  <td width=123 valign=top style='width:73.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>SIGKILL<o:p></o:p></span></p>
  </td>
  <td width=173 valign=top style='width:103.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Завершить<o:p></o:p></span></p>
  </td>
  <td width=457 valign=top style='width:274.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Сигнал, при получении которого
  выполнение процесса завершается. Его нельзя ни перехватывать, ни
  игнорировать. <o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:11'>
  <td width=45 valign=top style='width:26.7pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue align=center style='text-align:center'><span
  style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>11<o:p></o:p></span></p>
  </td>
  <td width=123 valign=top style='width:73.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>SIGPIPE<o:p></o:p></span></p>
  </td>
  <td width=173 valign=top style='width:103.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Завершить<o:p></o:p></span></p>
  </td>
  <td width=457 valign=top style='width:274.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Сигнал посылается при попытке
  записи в канал, получатель данных которого закрыл дескриптор (завершил свое выполнение).<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:12'>
  <td width=45 valign=top style='width:26.7pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue align=center style='text-align:center'><span
  style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>12<o:p></o:p></span></p>
  </td>
  <td width=123 valign=top style='width:73.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>SIGPOL</span><span lang=EN-US
  style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
  mso-no-proof:yes'>L</span><span style='font-size:14.0pt;mso-bidi-font-size:
  10.0pt;mso-no-proof:yes'><o:p></o:p></span></p>
  </td>
  <td width=173 valign=top style='width:103.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Завершить<o:p></o:p></span></p>
  </td>
  <td width=457 valign=top style='width:274.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Сигнал отправляется при
  наступлении определенного события для устройства, которое является
  опрашиваемым.<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:13'>
  <td width=45 valign=top style='width:26.7pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue align=center style='text-align:center'><span
  style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>13<o:p></o:p></span></p>
  </td>
  <td width=123 valign=top style='width:73.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>SIGPWR<o:p></o:p></span></p>
  </td>
  <td width=173 valign=top style='width:103.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Игнорирование<o:p></o:p></span></p>
  </td>
  <td width=457 valign=top style='width:274.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Сигнал генерируется при угрозе потери
  питания. Обычно отправляется, когда питание системы переключается на источник
  бесперебойного питания.<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:14'>
  <td width=45 valign=top style='width:26.7pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue align=center style='text-align:center'><span
  style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>14<o:p></o:p></span></p>
  </td>
  <td width=123 valign=top style='width:73.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>SIGQUIT<o:p></o:p></span></p>
  </td>
  <td width=173 valign=top style='width:103.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Завершить +core<o:p></o:p></span></p>
  </td>
  <td width=457 valign=top style='width:274.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Сигнал посылается ядром всем
  процессам группы при нажатии клавиш Ctrl-\.<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:15'>
  <td width=45 valign=top style='width:26.7pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue align=center style='text-align:center'><span
  style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>15<o:p></o:p></span></p>
  </td>
  <td width=123 valign=top style='width:73.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>SIGSTOP<o:p></o:p></span></p>
  </td>
  <td width=173 valign=top style='width:103.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Остановка<o:p></o:p></span></p>
  </td>
  <td width=457 valign=top style='width:274.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Сигнал отправляется всем
  процессам группы при нажатии клавиш Ctrl-Z. Получение сигнала вызывает
  остановку выполнения процесса.<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:16'>
  <td width=45 valign=top style='width:26.7pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue align=center style='text-align:center'><span
  style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>16<o:p></o:p></span></p>
  </td>
  <td width=123 valign=top style='width:73.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>SIGSYS<o:p></o:p></span></p>
  </td>
  <td width=173 valign=top style='width:103.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Завершить +core<o:p></o:p></span></p>
  </td>
  <td width=457 valign=top style='width:274.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Сигнал отправляется ядром при
  попытке недопустимого системного вызова.<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:17'>
  <td width=45 valign=top style='width:26.7pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue align=center style='text-align:center'><span
  style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>17<o:p></o:p></span></p>
  </td>
  <td width=123 valign=top style='width:73.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>SIGTERM<o:p></o:p></span></p>
  </td>
  <td width=173 valign=top style='width:103.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Завершить<o:p></o:p></span></p>
  </td>
  <td width=457 valign=top style='width:274.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Сигнал представляет собой
  предупреждение о том, что процесс вскоре будет уничтожен, что позволяет
  процессу подготовиться к своему завершению. <b style='mso-bidi-font-weight:
  normal'>Kill</b> (1) посылает такой сигнал.<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:18'>
  <td width=45 valign=top style='width:26.7pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue align=center style='text-align:center'><span
  style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>18<o:p></o:p></span></p>
  </td>
  <td width=123 valign=top style='width:73.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>SIGTTIN<o:p></o:p></span></p>
  </td>
  <td width=173 valign=top style='width:103.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Остановка<o:p></o:p></span></p>
  </td>
  <td width=457 valign=top style='width:274.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Сигнал генерируется ядром при попытке
  процесса фоновой группы осуществить чтение с управляющего терминала.<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:19'>
  <td width=45 valign=top style='width:26.7pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue align=center style='text-align:center'><span
  style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>19<o:p></o:p></span></p>
  </td>
  <td width=123 valign=top style='width:73.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>SIGTTOU<o:p></o:p></span></p>
  </td>
  <td width=173 valign=top style='width:103.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Остановка<o:p></o:p></span></p>
  </td>
  <td width=457 valign=top style='width:274.3pt;border:none;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-right-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Сигнал генерируется ядром при
  попытке процессов фоновой группы осуществить запись на управляющий терминал.<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:20;page-break-inside:avoid;height:8.15pt'>
  <td width=45 valign=top style='width:26.7pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:8.15pt'>
  <p class=Iauiue align=center style='text-align:center'><span
  style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>20<o:p></o:p></span></p>
  </td>
  <td width=123 valign=top style='width:73.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  8.15pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>SIGUSR1<o:p></o:p></span></p>
  </td>
  <td width=173 valign=top style='width:103.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  8.15pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Завершить<o:p></o:p></span></p>
  </td>
  <td width=457 valign=top style='width:274.3pt;border-top:solid windowtext 1.0pt;
  border-left:none;border-bottom:none;border-right:solid windowtext 1.0pt;
  mso-border-left-alt:solid windowtext .75pt;mso-border-top-alt:solid windowtext .75pt;
  mso-border-left-alt:solid windowtext .75pt;mso-border-right-alt:solid windowtext .75pt;
  padding:0cm 5.4pt 0cm 5.4pt;height:8.15pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Сигнал, предназначенный для
  прикладных задач, как средство межпроцессорного взаимодействия.<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:21;mso-yfti-lastrow:yes;page-break-inside:avoid;
  height:8.15pt'>
  <td width=45 valign=top style='width:26.7pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:8.15pt'>
  <p class=Iauiue align=center style='text-align:center'><span
  style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>21<o:p></o:p></span></p>
  </td>
  <td width=123 valign=top style='width:73.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  8.15pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>SIGUSR2<o:p></o:p></span></p>
  </td>
  <td width=173 valign=top style='width:103.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  8.15pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Завершить<o:p></o:p></span></p>
  </td>
  <td width=457 valign=top style='width:274.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-left-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-bottom-alt:solid windowtext .75pt;mso-border-right-alt:solid windowtext .75pt;
  padding:0cm 5.4pt 0cm 5.4pt;height:8.15pt'>
  <p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
  mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Сигнал, предназначенный для
  прикладных задач, как средство межпроцессорного взаимодействия.<o:p></o:p></span></p>
  </td>
 </tr>
</table>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span style='mso-tab-count:1'>        </span>Для
определения собственных обработчиков сигналов имеются специальные системные
вызовы. Самый простейший такой системный вызов </span><span lang=EN-US
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'>signal</span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-tab-count:1'>        </span><u>Прототип:<o:p></o:p></u></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>#</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>include</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'> &lt;</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>signal</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>.</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>h</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>void (* signal (int sig, void (* disp)(int)))(int);<o:p></o:p></span></i></p>

<p class=MsoBodyText><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=MsoBodyText style='margin-bottom:0cm;margin-bottom:.0001pt;text-indent:
1.0cm'><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:
yes'>Простейшим интерфейсом к сигналам является системная функция signal,
которая позволяет изменить предопределенную реакцию на сигнал, определенную ОС
UNIX. Порожденный вызовом fork процесс наследует установленную реакцию на
сигнал от своего отца. Но при выполнении exec эта реакция устанавливается по
умолчанию.<o:p></o:p></span></p>

<p class=MsoBodyText style='margin-bottom:0cm;margin-bottom:.0001pt;text-indent:
1.0cm'><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:
yes'>Применяя системный вызов signal процесс имеются слабые возможности
управления сигналами:<o:p></o:p></span></p>

<p class=MsoList style='margin-left:0cm;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>1. Процесс
не может заблокировать сигнал, т.е. отложить получение сигнала на период
выполнения критического участка кода.<o:p></o:p></span></p>

<p class=MsoList style='margin-left:0cm;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>2. Каждый
раз при получении сигнала реакция на этот сигнал устанавливается на действие по
умолчанию.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span style='mso-tab-count:1'>        </span><o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><u><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>Пример:<o:p></o:p></span></u></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>/*
установка действий на<span style='mso-spacerun:yes'>  </span>реагирование
сигналов */<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>static void sig_hndlr (int sig_no) //</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>функция</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'> </span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>обработки</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> </span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>сигнала</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>   </span>signal (SIGINT,sig_hndlr);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>   </span>printf (“</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>Получен</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'> </span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>сигнал</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> <span lang=EN-US>SIGINT\n”);<o:p></o:p></span></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>main( )<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>   </span>signal
(SIGINT,sig_hndlr);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>   </span></span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>signal (SIGUSR1,SIG_DFL);//установка на действие по
умолчанию системы<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'>   </span>signal (SIGUSR2,SIG_IGN); // установка на
игнорирование сигнала <o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'>   </span>while (1) pause ( );<span
style='mso-spacerun:yes'>                </span>// остновка программы до
получения сигнала<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Модель
сигналов в POSIX основана на понятии набора сигналов, описываемого переменной
типа sigset_t. Каждый бит этой переменной отвечает за один сигнал. Во многих системах
этот тип имеет длину 32 бита, т.е. имеется возможность использовать 32 сигнала.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Для
управления наборами сигналов применяются следующие функции:<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><u><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>Прототипы</span></u></i><i style='mso-bidi-font-style:
normal'><u><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;
mso-ansi-language:EN-US;mso-no-proof:yes'>:<o:p></o:p></span></u></i></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>#include
&lt;signal.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>int
sigemptyset (sigset_t *set);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>int
sigfillset (sigset_t *set);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>int sigaddset
(sigset_t *set, int signo);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>int
sigdelset (sigset_t *set, int signo);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>int
sigismember (sigset_t *set, int signo);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><span lang=EN-US style='font-size:
14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>1. Функция </span><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>sigemptyset</span></b><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>
</span><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:
yes'>инициализирует набор, очищая все биты.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>2.Функция <b
style='mso-bidi-font-weight:normal'>sigfillset</b> устанавливает в набор все сигналы,
известные системе.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>3. Функции <b
style='mso-bidi-font-weight:normal'>sigaddset</b> добавляет сигнал в набор.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>4. Функции <b
style='mso-bidi-font-weight:normal'>sigdelset</b> удаляет сигнал из набора.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>5. Функция <b
style='mso-bidi-font-weight:normal'>sigismember</b> проверяет, входит ли сигнал
signo в набор.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span style='mso-tab-count:1'>        </span><o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Стандартом </span><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>POSIX</span><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'> </span><span style='font-size:
14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>также определён системный
вызов<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>int
sigaction(int sig struct sigaction *act, struct sigaction *oact);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><span lang=EN-US style='font-size:
14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'>который позволяет установить
диспозицию сигнала, узнать её текущее значение или выполнить то и другое
одновременно. В этой функции вся необходимая информация передаётся через
указатель на структуру типа sigaction, которая имеет следующие поля:<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>struct sigaction<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>   </span>void<span
style='mso-spacerun:yes'>     </span>(*sa_handler)();<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>   </span>void<span
style='mso-spacerun:yes'>     </span>(*sa_sigaction)(int, siginfo_t *, void *);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>   </span>sigset_t
sa_mask;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>   </span>int<span
style='mso-spacerun:yes'>      </span>sa_flags;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span></span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=caaieiaie6><span style='mso-no-proof:yes'>Первое поле структуры определяет
обработчик сигналов, второе поле - обработка сигналов, если установлен флаг </span><span
lang=EN-US style='mso-ansi-language:EN-US;mso-no-proof:yes'>SA</span><span
style='mso-no-proof:yes'>_</span><span lang=EN-US style='mso-ansi-language:
EN-US;mso-no-proof:yes'>SIGINFO</span><span style='mso-no-proof:yes'>, третье поле
- маска сигналов, четвёртое поле - поле флагов.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Поле <b
style='mso-bidi-font-weight:normal'>sa_handler</b> </span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;font-family:Symbol;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
mso-char-type:symbol;mso-symbol-font-family:Symbol;mso-no-proof:yes'><span
style='mso-char-type:symbol;mso-symbol-font-family:Symbol'>&frac34;</span></span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'> определяет
действие, которое необходимо выполнить при получении сигналов. Может содержать
значения:<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span style='mso-tab-count:1'>        </span>SIG_IGN
- игнорировать сигнал;<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span style='mso-tab-count:1'>        </span>SIG_DFL
- обратботчик по умолчанию;<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span style='mso-tab-count:1'>        </span>&lt;АДРЕС&gt;
- адрес функции обработчика.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Если поля <b
style='mso-bidi-font-weight:normal'>sa_handler</b> и <b style='mso-bidi-font-weight:
normal'>sa_sigaction</b> не равны NULL то <b style='mso-bidi-font-weight:normal'>sa_mask</b>
содержит набор сигналов, которые будут добавлены к маске сигналов перед вызовом
обработчика.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span style='mso-tab-count:1'>        </span>Каждый
процесс имеет установленную маску сигналов, определяющая сигналы, доставка
которых должна быть заблокирована. Если бит маски установлен, то
соответствующий ему сигнал будет заблокирован. После возврата из функции
обработчика, значение маски возвращается в исходное состояние. Сигнал, для
которого установлен обработчик, также блокируется перед вызовом функции
обработки.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Поле <b
style='mso-bidi-font-weight:normal'>sa_flags</b> определяет флаги, которые
определяют способ доставки сигнала:<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>SA_ONSTACK</span></i><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'> </span><span style='font-size:
14.0pt;mso-bidi-font-size:10.0pt;font-family:Symbol;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";mso-char-type:symbol;mso-symbol-font-family:
Symbol;mso-no-proof:yes'><span style='mso-char-type:symbol;mso-symbol-font-family:
Symbol'>&frac34;</span></span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'> если определена функция-обработчик сигнала и с
помощью функции <b style='mso-bidi-font-weight:normal'>sigaltstack()</b> задан
альтернативный стек для функции-обработчика, то при обработке сигнала будет
использоваться этот стек. Если флаг не установлен, будет использоваться обычный
стек процесса;<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>SA_RESETHAND</span></i><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'> </span><span style='font-size:
14.0pt;mso-bidi-font-size:10.0pt;font-family:Symbol;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";mso-char-type:symbol;mso-symbol-font-family:
Symbol;mso-no-proof:yes'><span style='mso-char-type:symbol;mso-symbol-font-family:
Symbol'>&frac34;</span></span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'> если определена функция-обработчик, то реакция на
сигнал будет изменена на SIG_DFL и сигнал не будет блокироваться при запуске
обработчика. Если флаг не установлен, то реакция на сигнал не изменяется.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>SA_NODEFERR</span></i><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'> </span><span style='font-size:
14.0pt;mso-bidi-font-size:10.0pt;font-family:Symbol;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";mso-char-type:symbol;mso-symbol-font-family:
Symbol;mso-no-proof:yes'><span style='mso-char-type:symbol;mso-symbol-font-family:
Symbol'>&frac34;</span></span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'> если определена функция-обработчик, то сигнал
блокируется на время обработки только в том случае, когда он явно указан в поле
<b style='mso-bidi-font-weight:normal'>sa_mask</b>. Если флаг не установлен, то
в процессе обработки данный сигнал автоматически блокируется в процессе
обработки.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>SA_RESTART</span></i><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'> </span><span style='font-size:
14.0pt;mso-bidi-font-size:10.0pt;font-family:Symbol;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";mso-char-type:symbol;mso-symbol-font-family:
Symbol;mso-no-proof:yes'><span style='mso-char-type:symbol;mso-symbol-font-family:
Symbol'>&frac34;</span></span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'> если определена функция-обработчик, то ряд системных
вызовов, выполнение которых было прервано полученным сигналом, будет
автоматически запущен после обработки сигнала. К таким системным вызовам
относятся: write, read. Если флаг не установлен, то системный вызов возвращает
ошибку EINTR (ошибка прерывания).<o:p></o:p></span></p>

<p class=Iauiue style='margin-left:36.0pt;text-align:justify;text-indent:-18.0pt;
mso-list:l0 level1 lfo4;tab-stops:list 36.0pt'><![if !supportLists]><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;font-family:Symbol;
mso-fareast-font-family:Symbol;mso-bidi-font-family:Symbol;mso-no-proof:yes'><span
style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>SA_SIGINFO</span></i><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'> </span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;font-family:Symbol;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
mso-char-type:symbol;mso-symbol-font-family:Symbol;mso-no-proof:yes'><span
style='mso-char-type:symbol;mso-symbol-font-family:Symbol'>&frac34;</span></span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'> если указана
реакция на перехват сигнала, то вызывается функция обработчик определенная <b
style='mso-bidi-font-weight:normal'>sa_sigaction</b>. Если флаг не установлен,
то вызывается функция обработчик определенная полем <b style='mso-bidi-font-weight:
normal'>sa_handler</b>.<o:p></o:p></span></p>

<p class=Iauiue style='margin-left:36.0pt;text-align:justify;text-indent:-18.0pt;
mso-list:l0 level1 lfo4;tab-stops:list 36.0pt'><![if !supportLists]><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;font-family:Symbol;
mso-fareast-font-family:Symbol;mso-bidi-font-family:Symbol;mso-no-proof:yes'><span
style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>SA_NOC</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>H</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>LDWAIT</span></i><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'> </span><span style='font-size:
14.0pt;mso-bidi-font-size:10.0pt;font-family:Symbol;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";mso-char-type:symbol;mso-symbol-font-family:
Symbol;mso-no-proof:yes'><span style='mso-char-type:symbol;mso-symbol-font-family:
Symbol'>&frac34;</span></span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'> если указанный аргументом<span
style='mso-spacerun:yes'>  </span><b style='mso-bidi-font-weight:normal'>sig</b>
сигнал равен SIGCHLD, то при завершении потомки не будут переходить в состояние
“зомби”. Если процесс в дальнейшем вызовет одну из функций семейства wait, их
выполнение будет блокировано до завершения работы всех потомков данного
процесса.<o:p></o:p></span></p>

<p class=Iauiue style='margin-left:36.0pt;text-align:justify;text-indent:-18.0pt;
mso-list:l0 level1 lfo4;tab-stops:list 36.0pt'><![if !supportLists]><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;font-family:Symbol;
mso-fareast-font-family:Symbol;mso-bidi-font-family:Symbol;mso-no-proof:yes'><span
style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>SA_NOCLDSTOP</span></i><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'> </span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;font-family:Symbol;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
mso-char-type:symbol;mso-symbol-font-family:Symbol;mso-no-proof:yes'><span
style='mso-char-type:symbol;mso-symbol-font-family:Symbol'>&frac34;</span></span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'> если sig
равен SIGCHLD, то указанный сигнал не будет отправляться процессу при
завершении или остановке любого из его потомков.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span style='mso-tab-count:1'>        </span>Если
установлен SA_SIGINFO, то при получении сигнала будет вызван обработчик,
адресованный sa_sigaction. Обработчику передаётся номер сигнала и указатель на
структуру типа siginfo_t, содержащую информацию о причинах получения сигнала, а
также указатель на структуру типа ucontext_t, содержащую контекст процесса. Эта
<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Структура
siginfo_t включает следующие поля:<o:p></o:p></span></p>

<p class=Iauiue style='margin-left:18.0pt;text-align:justify'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-tab-count:1'>   </span></span><span lang=EN-US style='font-size:
14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>int</span><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>
</span><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;
mso-ansi-language:EN-US;mso-no-proof:yes'>si</span><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'>_</span><span lang=EN-US
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'>signo</span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'> - номер сигнала;<o:p></o:p></span></p>

<p class=Iauiue style='margin-left:18.0pt;text-align:justify'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-tab-count:1'>   </span></span><span lang=EN-US style='font-size:
14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>int</span><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>
</span><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:
yes'>si_errno - номер ошибки;<o:p></o:p></span></p>

<p class=Iauiue style='margin-left:18.0pt;text-align:justify'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-tab-count:1'>   </span></span><span lang=EN-US style='font-size:
14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>int</span><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>
</span><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:
yes'>si_code<span style='mso-spacerun:yes'>  </span>- причина отправления
сигнала.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Если <b
style='mso-bidi-font-weight:normal'>si_code</b> меньше или равно нулю, то
сигнал был отправлен прикладным процессом и структура siginfo_t<b
style='mso-bidi-font-weight:normal'> </b>содержит поля<b style='mso-bidi-font-weight:
normal'> :<o:p></o:p></b></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span lang=EN-US
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'>pid</span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>_</span><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>t</span><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>
</span><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:
yes'>si_id<span style='mso-spacerun:yes'>  </span>- идентификатор процесса </span><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>PID</span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>;<b style='mso-bidi-font-weight:normal'><o:p></o:p></b></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>uid_t
si_uid - идентификатор пользователя </span><span lang=EN-US style='font-size:
14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>UID</span><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>,<b
style='mso-bidi-font-weight:normal'><o:p></o:p></b></span></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'>которые адресуют процесс, пославший
сигнал. Если значение <b style='mso-bidi-font-weight:normal'>si_code</b> болеше
нуля, то оно указывает на причину отправления сигнала.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span style='mso-tab-count:1'>        </span>Системный
вызов <b style='mso-bidi-font-weight:normal'>sigprocmask</b> позволяет получить
и установить текущую маску сигналов: <o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>int sigprocmask
(int how, sigset_t *set, sigset_t *oset).<o:p></o:p></span></i></p>

<p class=Iniiaiieoaeno2><span style='mso-no-proof:yes'>Параметр how может
принимать значения:<o:p></o:p></span></p>

<p class=Iniiaiieoaeno2><span style='mso-no-proof:yes'>SIG_BLOCK<span
style='mso-spacerun:yes'>  </span><span style='mso-tab-count:1'> </span>-
результирующая маска получается путем объединения текущей маски сигналов и
набора сигналов set;<o:p></o:p></span></p>

<p class=Iniiaiieoaeno2><span style='mso-no-proof:yes'>SIG_UNBLOCK - результирующая
маска получается путем удаления набора сигналов set из текущей маски;<o:p></o:p></span></p>

<p class=Iniiaiieoaeno2><span style='mso-no-proof:yes'>SIG_SETMASK -маска будет
заменена на набор сигналов set.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span style='mso-tab-count:1'>        </span>Если
набор set есть NULL, то первый аргумент игнорируется, а если oset не равен
NULL, то по указанному адресу помещается текущая маска сигналов.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span style='mso-tab-count:1'>        </span><span
style='mso-spacerun:yes'> </span><o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><u><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>Прототипы</span></u></i><i style='mso-bidi-font-style:
normal'><u><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;
mso-ansi-language:EN-US;mso-no-proof:yes'>:<o:p></o:p></span></u></i></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>int
sigpending (sigset_t *set).<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>int
sigsuspend (const sigset_t *set );<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Системный
вызов <b style='mso-bidi-font-weight:normal'>sigpending</b> используется для
получения набора заблокированных сигналов и сигналов, ждущих передачи.
Системный вызов <b style='mso-bidi-font-weight:normal'>sigsuspend</b> замещает
текущую маску набором<span style='mso-spacerun:yes'>  </span><b
style='mso-bidi-font-weight:normal'>set</b> и приостанавливает выполнение
процесса до получения сигналов, диспозиция которых установлена, либо на
завершение процесса, либо на вызов функции-обработчика/<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><u><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Примеры:<o:p></o:p></span></u></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>/* -
перехват и самостоятельная обработка сигнала </span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;
mso-ansi-language:EN-US;mso-no-proof:yes'>SIGINT</span></i><i style='mso-bidi-font-style:
normal'><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:
yes'> */<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;signal.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>void catch_int(int sigmo)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>printf(“\n</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>Сигнал</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'> signo=%d\n”,signo);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>printf</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>(“Возврат из обработчика”);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>main</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>()<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>{ static struct sigaction act;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> 
</span>act.sa_handler=catch_int;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> 
</span>sigfillset(&amp;act.sa_mask);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> 
</span>sigaction(SIGINT, &amp;act,NULL);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>printf(“</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>Вызов</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'> sleep(1)\n”);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>sleep(1);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span></span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>…<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'>  </span></span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;
mso-ansi-language:EN-US;mso-no-proof:yes'>printf</span></i><i style='mso-bidi-font-style:
normal'><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:
yes'>(“Завершение программы\</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>n</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>”);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'>  </span></span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;
mso-ansi-language:EN-US;mso-no-proof:yes'>exit</span></i><i style='mso-bidi-font-style:
normal'><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:
yes'>(0);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>}<o:p></o:p></span></i></p>

<div style='mso-element:para-border-div;border:none;border-bottom:solid windowtext 1.5pt;
padding:0cm 0cm 1.0pt 0cm'>

<p class=Iauiue style='text-align:justify;border:none;mso-border-bottom-alt:
solid windowtext 1.5pt;padding:0cm;mso-padding-alt:0cm 0cm 1.0pt 0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

</div>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>/*
установка<span style='mso-spacerun:yes'>  </span>игнорирования на сигнал </span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>SIGTERM</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'><o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'>    </span>с последующим возвратом к старому
обработчику */<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;signal.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>main()<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>{ static struct sigaction act,old_ act;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> 
</span>sigaction(SIGTERM, NULL,&amp;old_act);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> 
</span>act.sa_handler=SIG_IGN;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> 
</span>sigaction(SIGTERM, &amp;act,NULL);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>…<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> 
</span>sigaction(SIGTERM, &amp;old_act,NULL);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>exit(0);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>}<o:p></o:p></span></i></p>

<div style='mso-element:para-border-div;border:none;border-bottom:solid windowtext 1.5pt;
padding:0cm 0cm 1.0pt 0cm'>

<p class=Iauiue style='text-align:justify;border:none;mso-border-bottom-alt:
solid windowtext 1.5pt;padding:0cm;mso-padding-alt:0cm 0cm 1.0pt 0cm'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

</div>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;signal.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;sys/types.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;sys/stat.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;fcntl.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;unistd.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>int (*mysignal) (int sig_no, void (*hndlr)(int) ) <o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> </span>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>struct
sigaction act, oact;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> 
</span>act.sa_handler=hndlr;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> 
</span>sigemptyset(&amp;act.sa_mask);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>act.sa_flags=0;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>if (sig_no !=
SIGALARM) act.sa_flags |= SA_RESTART;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>if
(sigaction(sig_no, &amp;act, &amp;oact) &lt; 0) return (SIG_ERR);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>return
(oact.sa_handler);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> </span>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> </span>static void
sig_hndlr(int sig_no)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> </span>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>printf(“</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>Получен</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'> </span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>сигнал</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> %i<span
style='mso-spacerun:yes'>  </span>\n”,sig_no);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> </span>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>main()<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> </span>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> 
</span>mysignal(SIGINT, sig_hndlr);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> 
</span>mysignal(SIGUSR1, SIG_DFL);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> 
</span>mysignal(SIGUSR2, SIG_IGN);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span></span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>while(1)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'>  </span>pause();<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'> </span>}<o:p></o:p></span></i></p>

<div style='mso-element:para-border-div;border:none;border-bottom:solid windowtext 1.5pt;
padding:0cm 0cm 1.0pt 0cm'>

<p class=Iauiue style='text-align:justify;border:none;mso-border-bottom-alt:
solid windowtext 1.5pt;padding:0cm;mso-padding-alt:0cm 0cm 1.0pt 0cm'><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

</div>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>/*
взаимодействие родственных процессов ( отец и сын )<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'>    </span>с</span></i><i style='mso-bidi-font-style:
normal'><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'> </span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>помощью</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> </span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>сигнала</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'> SIGUSR1 */<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;signal.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>int ntimes=0;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>void p_action(int sig)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>{ </span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>printf</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>(“Родитель получил сигнал %</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>d</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>\</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>n</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>”,++</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>ntimes</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>); }<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>void c_actiom(int sig)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>{ printf(“</span></i><i style='mso-bidi-font-style:
normal'><span style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:
yes'>Сын</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'> </span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>получил</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'> </span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>сигнал</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'> %d\n”,++ntimes); }<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>main()<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>pid_t pid,
ppid;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>static
sig_action<span style='mso-spacerun:yes'>  </span>p_act,c_act;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> 
</span>p_act.sa_handler=p_action;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> 
</span>sigaction(SIGUSR1,&amp;p_act,NULL);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>switch
(pid=fork())<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>    </span>case 0 :
c_act.sa_handler=c_action;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>                 </span>sigaction(SIGUSR1,&amp;c_act,NULL);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>                
</span>ppid=getppid();<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>               
</span>for(;;)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>                </span>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>                 
</span>sleep(10);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>                 
</span>kill(ppid,SIGUSR1);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>                 
</span>pause();<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>               </span>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>              
</span>break;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>    </span>default: for
(;;)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>                
</span>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>                  
</span>pause();<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>                 
</span>sleep</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>(1);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'>                  </span></span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>kill</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>(</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>pid</span></i><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>,</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;mso-no-proof:yes'>SIGUSR</span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>1);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'>                </span>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'>  </span>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>}</span></i><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=Iauiue align=center style='text-align:center'><span style='font-size:
14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<h3><a name="_Toc41918465"></a><a name="_Toc215646295"><span style='mso-bookmark:
_Toc41918465'><span style='text-transform:uppercase;mso-no-proof:yes'>4.1.4. О</span><span
style='mso-no-proof:yes'>граничения для процессов</span></span></a><span
style='mso-no-proof:yes'><o:p></o:p></span></h3>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Так как ОС
UNIX является многозадачной системой, то в ходе работы несколько<span
style='mso-spacerun:yes'>  </span>процессов могут конкурировать между собой за
доступ к различным ресурсам. Для<span style='mso-spacerun:yes'> 
</span>справедливого распределения ресурсов (память, дисковое пространство)
каждому из процессов устанавливается индивидуальный набор ограничений.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Для
получения информации о текущих ограничениях используются системные вызовы:<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;sys/times.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;sys/resource.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>int getrlimit (int resource, struct rlimit *rlp);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>int setrlimit (int resource, struct rlimit *rlp);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>struct rlimit<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>    </span>rlim_t
rlim_cur;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>    </span></span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>rlim_t rlim_max;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-spacerun:yes'>  </span>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span style='mso-tab-count:1'>        </span>Параметр
<b style='mso-bidi-font-weight:normal'>resource</b> определяет вид ресурса, для
которого нужно узнать или изменить<span style='mso-spacerun:yes'> 
</span>ограничения. Параметр <b style='mso-bidi-font-weight:normal'>rlim_cur</b>
определяет изменяемое ограничение, т.е. текущее ограничение<span
style='mso-spacerun:yes'>  </span>процесса на данный ресурс. Параметр <b
style='mso-bidi-font-weight:normal'>rlim_max</b> определяет жесткое
ограничение, т.е. максимально возможное значение для данного ресурса.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Любой
процесс может изменить текущее значение ограничения ресурса до максимально
возможного значения. Жесткое ограничение может быть изменено в сторону
увеличения только процессом с привилегиями суперпользователя. Обычные процессы
могут только уменьшать его. Обычно ограничения устанавливаются при
инициализации системы и затем наследуются порожденными процессами, хотя они
могут изменяться и потом. Максимально возможный предел потребления ресурса
может иметь значение, определяемое физическим ограничением системы. В этом
случае в поле <b style='mso-bidi-font-weight:normal'>rlim_max</b> должно быть
установлено значение RLIM_INFINITY.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify;text-indent:1.0cm'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>В системе
определены следующие ограничения:<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-tab-count:1'>        </span>RLIMIT_CORE</span></i><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'> -
максимальный размер создаваемого файла <b style='mso-bidi-font-weight:normal'>core</b>,
содержащего<span style='mso-spacerun:yes'>  </span>в памяти образ процесса.
Если значение установлен в 0, то файл создаваться не будет.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-tab-count:1'>        </span>RLIMIT_CPU</span></i><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'> -
максимальное время использования процессора в секундах. При превышении
промежутка времени процессу посылается сигнал SIGXCPU.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-tab-count:1'>        </span>RLIMIT_DATA</span></i><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'> -
максимальный размер сегмента данных процесса в байтах. При достижении этого
предела последующие вызовы функций распределения памяти<span
style='mso-spacerun:yes'>  </span>завершаются ошибкой ENOMEM.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-tab-count:1'>        </span>RLIMIT_FSIZE</span></i><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'> -
максимальный размер файла, который может создать процесс. Если установить этот
параметр в 0, то процесс не может создавать файлы. При достижении файлом
заданного предела посылается сигнал SIGXFSZ.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-tab-count:1'>        </span>RLIMIT_NOFILE</span></i><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'> -
максимальное количество назначенных файловых<span style='mso-spacerun:yes'> 
</span>дескрипторов процесса (т.е. максимальное число файлов, которые могут
быть<span style='mso-spacerun:yes'>  </span>открыты процессом одновременно).
Если процесс попытается получить больше<span style='mso-spacerun:yes'> 
</span>дескрипторов, чем задано, то ему возвращается ошибка EMFILE.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-tab-count:1'>        </span>RLIMIT_STACK </span></i><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>-
максимальный размер стека процесса. При попытке выхода за предел процессу
отправляется сигнал SIGSEGV.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-tab-count:1'>        </span>RLIMIT_VMEM</span></i><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'> - максимальный
размер отображаемой памяти процесса в байтах. При превышении этого предела,
использование функций распределения памяти возвращают ошибку ENOMEM.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-tab-count:1'>        </span>RLIMIT_NPROC</span></i><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'> -
максимальное число процессов с одним реальным UID. Если достигнут предел, то
вызов <b style='mso-bidi-font-weight:normal'>fork</b> завершится с ошибкой
EAGAIN.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-tab-count:1'>        </span>RLIMIT_RSS</span></i><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'> -
максимальный размер в байтах резидентной части процесса. Определяет
максимальный размер выделяемый процессу физической памяти. Если система ощущает
нехватку оперативной памяти, то она освободит память за счет<span
style='mso-spacerun:yes'>  </span>процессов превышавших свой ресурс.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'><span
style='mso-tab-count:1'>        </span>RLIMIT_MEMLOCK</span></i><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'> -
максимальный размер в байтах физической памяти, которую процесс может
заблокировать с помощью системного вызова m</span><span lang=EN-US
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'>al</span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>lock. При превышении размера m</span><span lang=EN-US
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:EN-US;
mso-no-proof:yes'>al</span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>lock завершается с ошибкой EAGAIN.<o:p></o:p></span></p>

<p class=Iauiue style='text-align:justify'><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><u><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>Пример:<o:p></o:p></span></u></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-no-proof:yes'>/*<span
style='mso-spacerun:yes'>  </span>получение ограничения для процесса */<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'>#include &lt;stdio.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> </span>#include
&lt;sys/time.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> </span>#include
&lt;sys/resource.h&gt;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> </span>void
disp_limit(int resource, char *r_name)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> </span>{<span
style='mso-spacerun:yes'>  </span>struct rlimit rlm;<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>   
</span>getrlimit(resource, &amp;rlm);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>   
</span>printf(&quot;%-13s&quot;, r_name);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>    </span>if (rlm.rlim_cur
== RLIM_INFINITY) printf(&quot;INFINITY \n&quot;);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>    </span>else
printf(&quot;\n%10ld &quot;, rlm.rlim_cur);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>    </span>if
(rlm.rlim_max == RLIM_INFINITY) printf(&quot;INFINITY \n&quot;);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>    </span>else
printf(&quot;\n%10ld &quot;, rlm.rlim_max);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'>  </span>}<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> </span>main(void)<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> </span>{<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> 
</span>disp_limit(RLIMIT_NOFILE,&quot;RLIMIT_CORE&quot;);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> 
</span>disp_limit(RLIMIT_NOFILE,&quot;RLIMIT_FSIZE&quot;);<o:p></o:p></span></i></p>

<p class=Iauiue style='text-align:justify'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-ansi-language:
EN-US;mso-no-proof:yes'><span style='mso-spacerun:yes'> </span></span></i><i
style='mso-bidi-font-style:normal'><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;mso-no-proof:yes'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<h3><a name="_Toc215646296"><span style='text-transform:uppercase;mso-no-proof:
yes'>4.1.5. Д</span><span style='mso-no-proof:yes'>ополнительные средства
межпроцессного взаимодействия</span></a><span style='mso-no-proof:yes'><o:p></o:p></span></h3>

<p class=MsoNormal style='text-align:justify'><span style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
normal'><span style='mso-bidi-font-size:14.0pt'><span style='mso-tab-count:
1'>        </span></span></b><span style='mso-bidi-font-size:14.0pt'>4.1.5.1
Введение и основные понятия<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt'><span style='mso-tab-count:1'>        </span><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt'><span style='mso-tab-count:1'>        </span>ОС </span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;mso-ansi-language:EN-US'>UNIX</span><span
style='mso-bidi-font-size:14.0pt'> предлагает множество дополнительных
механизмов межпроцессного взаимодействия. Их наличие дает </span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;mso-ansi-language:EN-US'>UNIX</span><span
style='mso-bidi-font-size:14.0pt'> богатые возможности в области связи между
процессами и позволяет разработчику использовать различные подходы при
программировании многозадачных систем. Дополнительные средства межпроцессного
взаимодействия, которые будут рассмотрены, можно разбить на следующие
категории:<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt'><span style='mso-tab-count:1'>        </span>- передача сообщений;<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt'><span style='mso-tab-count:1'>        </span>-семафоры;<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt'><span style='mso-tab-count:1'>        </span>-разделяемая память.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt'><span style='mso-tab-count:1'>        </span>Эти средства широко
применяются и ведут свое начало от системы </span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;mso-ansi-language:EN-US'>UNIX</span><span
lang=EN-US style='mso-bidi-font-size:14.0pt'> </span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;mso-ansi-language:EN-US'>System</span><span
lang=EN-US style='mso-bidi-font-size:14.0pt'> </span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;mso-ansi-language:EN-US'>V</span><span
style='mso-bidi-font-size:14.0pt'>, поэтому их иногда называют </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;mso-ansi-language:EN-US'>IPC</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt'> </span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;mso-ansi-language:EN-US'>System</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt'> </span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;mso-ansi-language:EN-US'>V</span></i><span style='mso-bidi-font-size:
14.0pt'>. Следует заметить, что вышеназванные дополнительные средства были
определены в последних версиях стандарта </span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;mso-ansi-language:EN-US'>POSIX</span><span
style='mso-bidi-font-size:14.0pt'>.<a style='mso-footnote-id:ftn1' href="#_ftn1"
name="_ftnref1" title=""><span class=MsoFootnoteReference><span
style='mso-special-character:footnote'><![if !supportFootnotes]><span
class=MsoFootnoteReference><span style='font-size:14.0pt;font-family:"Times New Roman";
mso-fareast-font-family:"Times New Roman";mso-ansi-language:RU;mso-fareast-language:
RU;mso-bidi-language:AR-SA'>[1]</span></span><![endif]></span></span></a><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
normal'><span style='mso-bidi-font-size:14.0pt'><span style='mso-tab-count:
1'>        </span>Ключи средств межпроцессного взаимодействия<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Программный
интерфейс всех трех средств </span><i><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>IPC</span></i><i><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black'> </span></i><i><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>System</span></i><i><span
style='mso-bidi-font-size:14.0pt;color:black'> V </span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>однороден, что отра­жает схожесть
их реализации в ядре. Наиболее важным из общих свойств являет­ся <i>ключ </i>(</span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>key</span><span
style='mso-bidi-font-size:14.0pt;color:black'>). Ключи - это числа,
обозначающие объект межпроцессного взаи­модействия в системе </span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>UNIX</span><span
style='mso-bidi-font-size:14.0pt;color:black'> примерно так же, как имя файла
обозначает файл. Другими словами, ключ позволяет ресурсу межпроцессного
взаимодействия со­вместно использоваться несколькими процессами. Обозначаемый
ключом объект может быть очередью сообщения, набором семафоров или сегментом
разделяемой памяти. Ключ имеет тип </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>key</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>_</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>t</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>, состав которого зависит от
реализации и опреде­ляется в системном заголовочном файле <i style='mso-bidi-font-style:
normal'>&lt;</i></span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>sys</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>/</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>types</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'> .</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>h</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>&gt;.</span></i><span style='mso-bidi-font-size:14.0pt;color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Ключи не
являются именами файлов и несут меньший смысл. Они должны выбираться осторожно
во избежание конфликта между различными программами, в этом помогает применение
дополнительной опции – «версии проекта». В ОС </span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>UNIX</span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black'> </span><span
style='mso-bidi-font-size:14.0pt;color:black'>существует простая библиотечная
функция </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>ftok</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>, которая образует ключ по указанному
файлу.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><span
style='mso-tab-count:1'>        </span>Описание</span></b><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>#include &lt;sys/ipc.h&gt;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>key_t ftok(const char *path, int id);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><span
style='mso-tab-count:2'>                </span><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><span
style='mso-tab-count:1'>        </span></span><span style='mso-bidi-font-size:
14.0pt;color:black'>Эта процедура возвращает номер ключа на основе информации,
связанной с файлом </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>path</span></i><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>. </span><span style='mso-bidi-font-size:
14.0pt;color:black'>Параметр </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>id</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> также учитывается и обеспечивает
еще один уровень уникальности - «версию проекта»; другими словами, для одного
имени </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>path</span></i><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'> </span><span style='mso-bidi-font-size:
14.0pt;color:black'>бу­дут получены разные ключи при разных значениях </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>id</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>. Процедура </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>f<span style='mso-bidi-font-weight:
bold'>tok</span></span></i><span lang=EN-US style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'> </span><span style='mso-bidi-font-size:
14.0pt;color:black'>не слиш­ком удобна: например, если удалить файл, а затем создать
другой с таким же име­нем, то возвращаемый после этого ключ будет другим. Она
завершится неудачей и вернет значение (</span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>key</span><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>t</span><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>)<span style='mso-spacerun:yes'>  
</span>-1</span><span style='mso-bidi-font-size:14.0pt;color:black'> и в
случае, если файл </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>path</span></i><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'> </span><span style='mso-bidi-font-size:
14.0pt;color:black'>не существует. Проце­дуру </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>f<span style='mso-bidi-font-weight:bold'>tok</span></span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>можно
применять в приложениях, использующих функции межпро­цессного взаимодействия
для работы с определенными файлами или при приме­нении для генерации ключа
файла, являющегося постоянной и неотъемлемой частью приложения.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><span
style='mso-tab-count:1'>        </span>Операция </span></b><b style='mso-bidi-font-weight:
normal'><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>get</span></i></b><span
style='mso-bidi-font-size:14.0pt;color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Программа
применяет ключ для создания объекта межпроцессного взаимодей­ствия или
получения доступа к существующему объекту. Обе операции вызыва­ются при помощи
операции </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>get</span></i><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>. </span><span style='mso-bidi-font-size:
14.0pt;color:black'>Результатом операции </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>get</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>является его
цело­численный <i>идентификатор </i>(</span><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>facility</span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black'> </span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>identifier</span><span
style='mso-bidi-font-size:14.0pt;color:black'>), который может использоваться
при вызовах других процедур межпроцессного взаимодействия. Если продолжить
аналогию с именами файлов, то операция </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>get</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>похожа на
вызов </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>creat</span></i><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'> </span><span style='mso-bidi-font-size:
14.0pt;color:black'>или </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>open</span></i><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>, </span><span style='mso-bidi-font-size:
14.0pt;color:black'>а идентификатор средства межпроцессного взаимодействия
ведет себя подобно дескриптору файла. В действительности, в отличие от
дескрипторов файла, иден­тификатор средства межпроцессного взаимодействия
является уникальным. Раз­личные процессы будут использовать одно и то же
значение идентификатора для объекта межпроцессного взаимодействия.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>В качестве
примера рассмотрим вызов </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>msgget</span></i><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'> </span><span style='mso-bidi-font-size:
14.0pt;color:black'>для создания новой очереди со­<span style='mso-bidi-font-weight:
bold'>общений </span>(что представляет собой очередь сообщений, обсудим позже):<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'><o:p>&nbsp;</o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'><span style='mso-tab-count:1'>        </span></span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>mqid =
msgget( (key_t)0100, 0644 | IPC_CREAT | IPC_EXCL);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><span
style='mso-tab-count:1'>        </span></span><span style='mso-bidi-font-size:
14.0pt;color:black'>Первый аргумент вызова, </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>msgget</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>, </span><span
style='mso-bidi-font-size:14.0pt;color:black'>является ключом очереди сообщений.
В слу­чае успеха процедура вернет неотрицательное значение в переменной </span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>mqid</span><span
style='mso-bidi-font-size:14.0pt;color:black'>, кото­рая служит идентификатором
очереди сообщений. Соответствующие вызовы для семафоров и объектов разделяемой
памяти называются соответственно </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>semget</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> и </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>shmget</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><b><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><b><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Структуры
данных статуса<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>При создании
объекта межпроцессного взаимодействия система также созда­ет <i>структуру
статуса средства межпроцессного взаимодействия</i><span style='mso-bidi-font-style:
italic'> </span>(</span><span lang=EN-US style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US'>IPC</span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black'> </span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>facility</span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black'> </span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>status</span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black'> </span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>structure</span><span
style='mso-bidi-font-size:14.0pt;color:black'>), содержащую всю управляющую
информацию, связанную с объектом. Для сообщений, семафоров и разделяемой памяти
существуют разные типы структуры статуса. Каждый тип содержит информацию,
свойственную этому средству межпроцессного взаимодействия. Тем не менее все три
типа структу­ры статуса содержат общую структуру прав доступа. Структура прав
доступа </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>ipc</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>perm</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>содержит
следующие элементы:<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'><o:p>&nbsp;</o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>uid</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>t</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'> </span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>cuid</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>; /*
Идентификатор пользователя создателя объекта */ <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>gid</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>t</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'> </span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>cgid</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>; /*
Идентификатор группы создателя объекта */ <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>uid</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>t</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'> </span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>uid</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>;<span
style='mso-spacerun:yes'>    </span>/* Действующий идентификатор пользователя
*/<span style='mso-spacerun:yes'>      </span><o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>gid</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>t</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'> </span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>gid</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>;<span
style='mso-spacerun:yes'>    </span>/* Действующий идентификатор группы */ <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>mode</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>t</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'> </span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>umode</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>;<span
style='mso-spacerun:yes'>     </span>/* Права доступа */<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Права доступа
определяют, может ли пользователь выполнять «чтение» из объекта (получать
информацию о нем) или «запись» в объект (работать с ним). Коды прав доступа
образуются точно таким же образом, как и для файлов. Поэто­му значение <span
style='mso-bidi-font-weight:bold'>0644 </span>для элемента </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>umode</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>означает, что
владелец может выполнять чтение и запись объекта, а другие пользователи -
только чтение из него. <span style='mso-tab-count:1'>       </span>Обратите
внимание, что права доступа, заданные элементом </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>umode</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>, </span><span
style='mso-bidi-font-size:14.0pt;color:black'>применяются в сочета­нии с действующими
идентификаторами пользователя и группы (записанными в элементах </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>uid</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>и </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>gid</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>).<a
style='mso-footnote-id:ftn2' href="#_ftn2" name="_ftnref2" title=""><span
class=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]><span
class=MsoFootnoteReference><span style='font-size:14.0pt;font-family:"Times New Roman";
mso-fareast-font-family:"Times New Roman";color:black;mso-ansi-language:RU;
mso-fareast-language:RU;mso-bidi-language:AR-SA;mso-bidi-font-weight:bold'>[2]</span></span><![endif]></span></span></a>
</span><span style='mso-bidi-font-size:14.0pt;color:black'>Очевидно также, что права
на выполнение в данном случае не имеют значения. Как обычно, суперпользователь
имеет неограниченные полномочия. В отличие от других конструкций </span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>UNIX</span><span
style='mso-bidi-font-size:14.0pt;color:black'>, значение переменной </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>umask</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>пользователя
не действует при создании средства межпроцессного взаимодействия.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><span
style='mso-tab-count:1'>        </span><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><span
style='mso-tab-count:1'>        </span></span></b><span style='mso-bidi-font-size:
14.0pt;color:black'>4.1.5.2. Очереди сообщений<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>В сущности,
сообщение является просто последовательностью символов или байтов
(необязательно заканчивающейся нулевым символом). Сообщения переда­ются между
процессами при помощи <i>очередей сообщений</i><span style='mso-bidi-font-style:
italic'> </span>(</span><span lang=EN-US style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US'>message</span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black'> </span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>queues</span><span
style='mso-bidi-font-size:14.0pt;color:black'>), которые можно создавать или
получать к ним доступ при помощи вызова </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>msgget</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>. </span><span
style='mso-bidi-font-size:14.0pt;color:black'>После создания очереди процесс
может помещать в нее сообщения при помощи вызова </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>msgsnd</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>, </span><span
style='mso-bidi-font-size:14.0pt;color:black'>если он имеет соответствующие
права доступа. Затем другой процесс может считать это сообщение при помощи
примитива </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>msgrcv</span></i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'>, </span><span style='mso-bidi-font-size:
14.0pt;color:black'>который извлекает сообще­ние из очереди. Таким образом,
обработка сообщений аналогична обмену данными при помощи вызовов чтения и
записи для каналов (рассмотренном в разделе 7.1.2). <o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Функция </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>msgget</span></i><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black'> </span><span style='mso-bidi-font-size:
14.0pt;color:black'>определяется следующим образом:<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><span
style='mso-tab-count:1'>        </span><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><span
style='mso-tab-count:1'>        </span>Описание</span></b><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>#include &lt;sys/msg.h&gt;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>int msgget (key_t key, int permflags);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><span
style='mso-tab-count:1'>        </span></span><span style='mso-bidi-font-size:
14.0pt;color:black'>Этот вызов лучше всего представить как аналог вызова </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>open</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> или </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>creat</span></i><span style='mso-bidi-font-size:14.0pt;
color:black'>. Параметр </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>key</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>, </span></i><span style='mso-bidi-font-size:14.0pt;color:black'>который,
в сущнос<span style='mso-bidi-font-weight:bold'>ти, является </span>простым
числом, идентифицирует очередь сообщений в системе. В случае успеш­ного вызова,
после создания новой очереди или доступа к уже существующей, вызов </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>msgget</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> вернет ненулевое целое значение,
которое называется <i>идентифика­тором очереди сообщений</i><span
style='mso-bidi-font-style:italic'> </span>(</span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>message</span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black'> </span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>queue</span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black'> </span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>identifier</span><span
style='mso-bidi-font-size:14.0pt;color:black'>).<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Параметр </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>permflags</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black'> </span><span
style='mso-bidi-font-size:14.0pt;color:black'>указывает выполняемое вызовом </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>msgget</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> действие, которое задается при
помощи двух констант, определенных в файле &lt;</span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>sys</span><span
style='mso-bidi-font-size:14.0pt;color:black'>/</span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>ipc</span><span
style='mso-bidi-font-size:14.0pt;color:black'>.</span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>h</span><span
style='mso-bidi-font-size:14.0pt;color:black'>&gt;; они могут использоваться по
отдельности или объединяться при помощи операции побитового ИЛИ:<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'><span
style='mso-tab-count:1'>        </span></span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>IPC</span><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>_</span><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>CREAT</span><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'><span
style='mso-spacerun:yes'>  </span></span><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US'>При задании этого флага вызов </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US'>msgget</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US'>
создает новую очередь сообщений для данного значения, если она <span
style='mso-bidi-font-weight:bold'>еще не </span>существует. Если продолжить
аналогию с файлами, то при задании этого флага вызов </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US'>msgget</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US'>
выполняется в соответствии с вызовом </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US'>creat</span></i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US'>, хотя очередь сообщений и <span
style='mso-bidi-font-weight:bold'>не </span>будет «перезаписана», если она уже
существует. Если <span style='mso-bidi-font-weight:bold'>же </span>флаг </span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>IPC</span><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>_</span><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>CREAT</span><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'> не </span><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US'>установ­лен
и очередь с этим ключом существует, то вызов </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US'>msgget</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US'> вер­нет
идентификатор существующей очереди сообщений<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'><span
style='mso-tab-count:1'>        </span></span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>IPC</span><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>_</span><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>EXCL</span><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'><span
style='mso-spacerun:yes'>  </span></span><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US'>Если установлен этот флаг и флаг </span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>IPC</span><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>_</span><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>CREAT</span><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>, </span><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US'>то
вызов пред­назначается только для создания очереди сообщений. Поэто­му, если
очередь с ключом </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US'>key</span></i><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US'> уже существует, то вызов </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US'>msgget</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US'>
завершится неудачей и вернет значение -1. Переменная </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US'>errno</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US'> будет
при этом содержать значение </span><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>EEXIST</span><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>При создании
очереди сообщений младшие девять бит переменной </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>permflags</span></i><span style='mso-bidi-font-size:
14.0pt;color:black'> используются для задания прав доступа к очереди сообщений
аналогично коду доступа к файлу. Они хранятся в структуре </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>ipc</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>perm</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>, создаваемой одновременно с самой
очередью.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Теперь можно
вернуться к примеру. <o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'><span style='mso-tab-count:1'>        </span><o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'><span style='mso-tab-count:1'>        </span></span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>mqid = msgget(
(key_t)0100, 0644 | IPC_CREAT | IPC_EXCL);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><span
style='mso-tab-count:1'>        </span><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><span
style='mso-tab-count:1'>        </span></span><span style='mso-bidi-font-size:
14.0pt;color:black'>Этот вызов предназначен для создания (и только создания)
очереди сообще­ний для значения ключа равного (</span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>key</span><span
style='mso-bidi-font-size:14.0pt;color:black'>_</span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>t</span><span
style='mso-bidi-font-size:14.0pt;color:black'>) <span style='mso-bidi-font-weight:
bold'>0100. </span>В случае успешного завершения вызова очередь будет иметь код
доступа <span style='mso-bidi-font-weight:bold'>0644. </span>Этот код интерпретируется
таким же образом, как и код доступа к файлу, обозначая, что создатель очереди
может отправлять и принимать сообщения, а члены его группы и все остальные
могут выполнять только чтение. При необходимости для изменения прав доступа или
владельца очереди может использоваться вызов </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>msgctl</span></i><span style='mso-bidi-font-size:14.0pt;
color:black'>.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><span
style='mso-tab-count:1'>        </span>Работа с очередью сообщений: примитивы </span></b><b
style='mso-bidi-font-weight:normal'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>msgsnd</span></i></b><b
style='mso-bidi-font-weight:normal'><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black'> </span></i></b><b
style='mso-bidi-font-weight:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>и </span></b><b style='mso-bidi-font-weight:normal'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>msgrcv</span></i></b><b
style='mso-bidi-font-weight:normal'><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black'><o:p></o:p></span></i></b></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>После создания
очереди сообщений для работы с ней могут использоваться два следующих
примитива:<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><b><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-style:italic'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><b><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-style:italic'>Описание</span></b><b><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-style:italic'><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>#include &lt;sys/msg.h&gt;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>int
msgsnd(int mqid, const void *message, size_t size, int flags);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>int
msgrcv(int mqid, void *message, size_t size, long msg_type, int flags);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><span
style='mso-tab-count:1'>        </span></span><span style='mso-bidi-font-size:
14.0pt;color:black'>Первый из вызовов, </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>msgsnd</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>, </span><span
style='mso-bidi-font-size:14.0pt;color:black'>используется для добавления
сообщения в оче­редь, обозначенную идентификатором </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>mqid</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Сообщение содержится
в структуре </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>message</span></i><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'> </span><span style='mso-bidi-font-size:
14.0pt;color:black'>- шаблоне, определенном пользо­вателем и имеющем следующую
форму:<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'><o:p>&nbsp;</o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>struct
mymsg<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>long
mtype; <span style='mso-tab-count:4'>                           </span>/* </span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>Тип</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:
bold'> </span></i><i style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>сообщения</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'> */<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>char
mtext[SOMEVALUE];<span style='mso-spacerun:yes'>        </span>/* </span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>Текст</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:
bold'> </span></i><i style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>сообщения</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'> */ <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>};<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><span
style='mso-tab-count:1'>        </span><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><span
style='mso-tab-count:1'>        </span></span><span style='mso-bidi-font-size:
14.0pt;color:black'>Значение поля </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>mtype</span></i><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'> </span><span style='mso-bidi-font-size:
14.0pt;color:black'>может использоваться программистом для разбиения сообщений
на категории. При этом значимыми являются только положительные значения;
отрицательные или нулевые не могут использоваться (это будет видно из дальнейшего
описания операций передачи сообщений). Массив </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>mtext</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>служит для
хранения данных сообщения (постоянная </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>SOMEVALUE</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>выбрана
совершенно произвольно). Длина посылаемого сообщения задается параметром </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>size</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>вызова </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>msgsnd</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>и может быть
в диапазоне от нуля до меньшего из двух значений </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>SOMEVALUE</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>и
максимального размера сообщения, определенного в системе.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Параметр </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>f<span style='mso-bidi-font-weight:
bold'>lsgs</span></span></i><span lang=EN-US style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'> </span><span style='mso-bidi-font-size:
14.0pt;color:black'>вызова </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>msgsnd</span></i><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'> </span><span style='mso-bidi-font-size:
14.0pt;color:black'>может нести только один флаг: </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>IPC</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>NOWAIT</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>. </span><span
style='mso-bidi-font-size:14.0pt;color:black'>При неустановленном параметре </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>IPC</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>NOWAIT</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>вызывающий
процесс приостано­вит работу, если для посылки сообщения недостаточно системных
ресурсов. На практике это произойдет, если полная длина сообщений в очереди
превысит мак­симум, заданный для очереди или всей системы. Если флаг </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>IPC</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>NOWAIT</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>установ­лен,
тогда при невозможности послать сообщение возврат из вызова произойдет немедленно.
Возвращаемое значение будет равно -1, и переменная </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>errno</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>будет иметь
значение </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>EAGAIN</span></i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'>, </span><span style='mso-bidi-font-size:
14.0pt;color:black'>означающее необходимость повторения попытки.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Вызов </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>msgsend</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>также может
завершиться неудачей из-за установленных прав доступа. Например, если ни
действующий идентификатор пользователя, ни дей­ствующий идентификатор группы
процесса не связаны с очередью, и установлен код доступа к очереди <span
style='mso-bidi-font-weight:bold'>0660, </span>то вызов </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>msgsnd</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>для этой
очереди завершится неуда­чей. Переменная </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>errno</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>получит
значение </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>EACCES</span></i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'>.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'>Для чтения из очереди, заданной
идентификатором </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>mqid</span></i><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>, используется вызов </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>msgrcv</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>.
Чтение разрешено, если процесс имеет права доступа к очереди на чтение. Успешное
чтение сообщения приводит к удалению его из очереди.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'>На этот раз переменная </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>message</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black'> </span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>используется для хранения
полученного со­общения, а параметр </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>size</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> задает максимальную длину
сообщений, которые мо­гут находиться в этой структуре. Успешный вызов
возвращает длину полученно­го сообщения.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Параметр </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>msg</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>type</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> определяет тип принимаемого
сообщения, он помогает вы­брать нужное из находящихся в очереди сообщений. Если
параметр </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>msg</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>_</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>type</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> равен нулю, из очереди
считывается первое сообщение, то есть то, которое было послано первым. При
ненулевом положительном значении параметра </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>msg</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>type</span></i><span style='mso-bidi-font-size:14.0pt;
color:black'> считывает­ся первое сообщение из очереди с заданным типом
сообщения. Например, если оче­редь содержит сообщения со значениями </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>mtype</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> 999, 5 и 1, а параметр </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>msg</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>type</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> в вызове </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>msgrcv</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> имеет значение 5, то считывается
сообщение типа 5. И, наконец, если параметр </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>msg</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>type</span></i><span style='mso-bidi-font-size:14.0pt;
color:black'> имеет ненулевое отрицательное значение, то считывается первое сообщение
с наименьшим значением </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>mtype</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>, которое меньше или равно мо­дулю
параметра </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>msg</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>_</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>type</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>. Этот алгоритм кажется сложным,
но выражает простое правило: если вернуться к нашему предыдущему примеру с
тремя сообщениями со значениями </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>mtype</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> 999, 5 и 1, то при значении
параметра </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>msg</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>_</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>type</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> в вызове </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>msgrcv</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> равном -999 и троекратном вызове
сообщения будут получены в порядке 1, 5, 999.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Последний
параметр </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>flags</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> содержит управляющую информацию.
В этом пара­метре могут быть независимо установлены два флага - </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>IPS</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>NOWAIT</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>и </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>MSG</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>_</span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>NOERROR</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>. </span><span
style='mso-bidi-font-size:14.0pt;color:black'>Флаг </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>IPC</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>_</span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>NOWAIT</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>имеет обычный
смысл - если он не задан, то процесс будет при­остановлен при отсутствии в очереди
подходящих сообщений, и возврат из вызо­ва произойдет после поступления сообщения
соответствующего типа. Если же этот флаг установлен, то возврат из вызова при
любых обстоятельствах произой­дет немедленно.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>При
установленном флаге </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>MSG</span></i><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>NOERROR</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>сообщение
будет усечено, если его длина больше, чем </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>size</span></i><span style='mso-bidi-font-size:14.0pt;
color:black'> байт, без этого флага попытка чтения длинного сообще­ния приводит
к неудаче вызова </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>msgrcv</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>. К сожалению, узнать о том, что
усечение имело место, невозможно.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><span
style='mso-tab-count:1'>        </span>Пример передачи сообщений: очередь с
приоритетами<o:p></o:p></span></b></p>

<p class=msonormalcxspmiddle style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>         </span>В этом
разделе разработаем простое приложение для передачи сообщений. Его целью
является реализация очереди, в которой для каждого элемента может быть задан
приоритет. Серверный процесс будет выбирать элементы из очереди и об­рабатывать
их каким-либо образом. Например, элементы очереди могут быть име­нами файлов, а
серверный процесс может копировать их на принтер. Этот пример аналогичен примеру
использования </span><span lang=EN-US style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US'>FIFO</span><span style='mso-bidi-font-size:
14.0pt;color:black'>.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Отправной
точкой будет следующий заголовочный файл </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>q</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black'>.</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>h</span></i><span style='mso-bidi-font-size:14.0pt;
color:black'>:<o:p></o:p></span></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><o:p>&nbsp;</o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>/* </span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>q</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>.</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>h</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'> – заголовок для
примера очереди сообщений */<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>#include &lt;sys/types.h&gt;<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>#include &lt;sys/ipc.h&gt;<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>#include &lt;sys/msg.h&gt;<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>#include &lt;string.h&gt;<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>#include &lt;errno.h&gt;<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>#define QKEY<span style='mso-spacerun:yes'>    
</span><span style='mso-tab-count:1'>          </span>(key_t) 0105<span
style='mso-spacerun:yes'>  </span>/* </span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>Ключ</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US'> </span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>очереди</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'> */<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>#</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>define</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black'> </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>QPERM</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'><span style='mso-tab-count:1'>  </span>0660<span
style='mso-spacerun:yes'>          </span><span style='mso-tab-count:1'> </span><span
style='mso-spacerun:yes'>  </span>/* Права доступа */<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>#</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>define</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black'> </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>MAXOBN</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'><span style='mso-tab-count:1'>         </span><span
style='mso-spacerun:yes'>    </span>50 <span style='mso-tab-count:2'>          </span><span
style='mso-spacerun:yes'>  </span>/* Макс. длина имени объекта */<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>#define MAXPRIOR<span style='mso-spacerun:yes'> 
</span>10<span style='mso-spacerun:yes'>               </span>/* </span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>Максимальный</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'> </span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>приоритет</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>
*/<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'><o:p>&nbsp;</o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>struct q_entry<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>{<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'><span style='mso-tab-count:1'>         </span>long
mtype;<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'><span style='mso-tab-count:1'>         </span>char</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black'> </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>mtext</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'> [</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>MAXOBN</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>+1];<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>};<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><o:p>&nbsp;</o:p></span></p>

<p class=msonormalcxspmiddle style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>         </span>Первая часть
этого файла содержит необходимые включаемые файлы. Определение </span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>QKEY</span><span
style='mso-bidi-font-size:14.0pt;color:black'> задает значение ключа, которое
будет обозначать очередь сообщений в системе. Определение </span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>QPERM</span><span
style='mso-bidi-font-size:14.0pt;color:black'> устанавливает связанные с
очередью права доступа. Так как код доступа равен 0660, то владелец очереди и
члены его группы смогут выполнять чтение и запись. Как увидим позже,
определения </span><span lang=EN-US style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US'>MAXOBN</span><span style='mso-bidi-font-size:
14.0pt;color:black'> и </span><span lang=EN-US style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US'>MAXPRIOR</span><span style='mso-bidi-font-size:
14.0pt;color:black'> будут налагать ограничения на сообщения, помещаемые в
очередь. Последняя часть этого включаемого файла содержит определение структуры
</span><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>q</span><span style='mso-bidi-font-size:14.0pt;
color:black'>_</span><span lang=EN-US style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US'>entry</span><span style='mso-bidi-font-size:
14.0pt;color:black'>. Структуры этого типа будут использоваться в качестве
сообщений, передаваемых и принимаемых следующими процедурами.<o:p></o:p></span></p>

<p class=msonormalcxspmiddle style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'>Первая рассматриваемая процедура называется </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>enter</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>, она помещает в очередь имя
объекта, заканчивающееся нулевым символом, и имеет следующую форму:<o:p></o:p></span></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><o:p>&nbsp;</o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>/* Процедура </span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>enter</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'> – поместить объект в очередь */<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><o:p>&nbsp;</o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>#include “q.h”<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'><o:p>&nbsp;</o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>int enter (char *objname, int priority)<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>{<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><span
style='mso-tab-count:1'>         </span></span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>int</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black'> </span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>len</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>, </span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>s</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>qid</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>;<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><span
style='mso-tab-count:1'>         </span></span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>struct</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black'> </span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>q</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>entry</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black'> </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>s</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>_</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>entry</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>;<span style='mso-tab-count:1'> </span>/* Структура для хранения
сообщений */<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><span
style='mso-tab-count:1'>         </span><o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><span
style='mso-tab-count:1'>         </span>/* Проверка длины имени и уровня
приоритета */<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><o:p>&nbsp;</o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><span
style='mso-tab-count:1'>         </span></span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>if( (len = strlen(objname)) &gt; MAXOBN )<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'><span style='mso-tab-count:1'>         </span></span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>{<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><span
style='mso-tab-count:2'>                   </span></span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>warn</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'> (“ Слишком длинное
имя “);<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><span
style='mso-tab-count:2'>                   </span></span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>return</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'> (-1);<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>}<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>if</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black'> (</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>priority</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black'> &gt; </span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>MAXPRIOR</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'> || </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>priority</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'> &lt;0 )<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>{<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><span
style='mso-tab-count:1'>         </span></span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>warn</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black'> (“ Недопустимый уровень
приоритета ”);<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><span
style='mso-tab-count:1'>         </span></span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>return</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black'> (-1);<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>}<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>/* Инициализация
очереди сообщений, если это необходимо */<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>if( (s_qid = init_queue() ) == -1)<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'><span style='mso-tab-count:1'>         </span>return</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'> (-1);<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>/* Инициализация
структуры </span></i><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>s</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>_</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>entry</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'> */<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>s_entry.mtype = (long)priority;<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>strcpy ( s_entry.mtext, objname, MAXOBN );<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>/* Посылаем
сообщение, выполнив ожидание, если это необходимо*/<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>if (msgsnd(s_qid, &amp;s_entry, len, 0) == -1)<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>{<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'><span style='mso-tab-count:1'>         </span>perror(“</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>Ошибка</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'> </span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>вызова</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>
msgsnd”);<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'><span style='mso-tab-count:1'>         </span>return
(-1);<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>}<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>else</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black'><o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><span
style='mso-tab-count:1'>         </span></span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>return</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black'> (0);<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Первое
действие, выполняемое процедурой </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>enter</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>, заключается в проверке длины
имени объекта и уровня приоритета. Обратите внимание на то, что мини­мальное
значение переменной приоритета </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>priority</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> равно 1, так как нулевое зна­чение
приведет к неудачному завершению вызова </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>msgsnd</span></i><span style='mso-bidi-font-size:14.0pt;
color:black'>. Затем процедура </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>enter</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> «открывает» очередь, вызывая
процедуру </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>init</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>_</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>gueue</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>, реализацию которой при­ведем
позже.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>После
завершения этих действий процедура формирует сообщение и пытается послать его
при помощи вызова </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>msgsnd</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>. Здесь для хранения сообщения
исполь­зована структура </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>s</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>_</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>entry</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> типа </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>q</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>entry</span></i><span style='mso-bidi-font-size:14.0pt;
color:black'>, и последний параметр вызова </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>msgsnd</span></i><span style='mso-bidi-font-size:14.0pt;
color:black'> равен нулю. Это означает, что система приостановит выполнение
текущего про­цесса, если очередь заполнена (так как не задан флаг </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>IPC</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>NOWAIT</span></i><b><span
style='mso-bidi-font-size:14.0pt;color:black'>).<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'>Процедура </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>enter</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> сообщает о возникших проблемах
при помощи функции </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>warn</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> или библиотечной функции </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>perror</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>. Для простоты функция </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>warn</span></i><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black'> </span><span style='mso-bidi-font-size:
14.0pt;color:black'>реализо­вана следующим образом:<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'><o:p>&nbsp;</o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'>#</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>include</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'> &lt;</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>stdio</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>.</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>h</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>&gt;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>int
warn(char *s)<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'><span
style='mso-spacerun:yes'> </span>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>fprintf
( stderr,<span style='mso-spacerun:yes'>  </span>&quot;</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>Предупреждение</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>: %s\n&quot;, s);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>В реальных
системах функция </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>warn</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> должна записывать сообщения в
специ­альный файл протокола.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Назначение
функции </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>init</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>_</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>queue</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black'> </span><span
style='mso-bidi-font-size:14.0pt;color:black'>очевидно. Она инициализирует идентифи­катор
очереди сообщений или возвращает идентификатор очереди сообщений, ко­торый с
ней уже связан.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'><o:p>&nbsp;</o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>/* Инициализация очереди — получить идентификатор очереди */<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>#include
&quot;q.h&quot;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>int
init_queue(void)<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>int</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'> </span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>queue</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>id</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>;<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>/* Попытка создания или открытия очереди сообщений */ <o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>if (<span
style='mso-spacerun:yes'>  </span>(queue_id = msgget(QKEY, IPC_CREAT | QPERM))
== -1)<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>perror(“ </span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>Ошибка</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US'> </span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>вызова</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'> msgget”);<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>return (queue_id);<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Следующая
процедура, </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>serve</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>, используется серверным
процессом для получения сообщений из очереди и противоположна процедуре </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>enter</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>/* Процедура </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>serve</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'> —
принимает и обрабатывает сообщение очереди с наивысшим приоритетом */<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>#include
&quot;q.h&quot;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>int
serve(void) <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>int
mlen, r_qid;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>struct
q_entry r_entry;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>/* Инициализация очереди сообщений, если это необходимо */<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>if((r_qid
= init_queue()) == -1) <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>return</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'> (-1);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>/* Получить и обработать следующее сообщение */<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>for(;;)<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>if((mlen
= msgrcv(r_qid, &amp;r_entry, MAXOBN,<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'><span
style='mso-spacerun:yes'>                                    </span>(-1 *
MAXPRIOR), MSG_NOERROR)) == -1)<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>perror(&quot;</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>Ошибка</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:
bold'> </span></i><i style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>вызова</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:
bold'> <span lang=EN-US>msgrcv&quot;);<o:p></o:p></span></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>return</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'> (-1) ;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>else</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'> </span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'><o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>/* Убедиться, что это строка */ <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>r_entry.mtext[mlen]='\0';<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i><span style='mso-bidi-font-size:
14.0pt;color:black;text-transform:uppercase;mso-fareast-language:EN-US'>/* </span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>Обработать
имя объекта */ <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>proc</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>obj</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>(&amp;</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>r</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>entry</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>}<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><o:p>&nbsp;</o:p></span></p>

<p class=msonormalcxspmiddle style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>         </span>Обратите
внимание на вызов </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>msgrcv</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>. Так как в качестве параметра
типа зада­но отрицательное значение <span style='mso-bidi-font-weight:bold'>(-1
* </span></span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>MAXPRIOR</span></i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'>), </span><span style='mso-bidi-font-size:
14.0pt;color:black'>то система вначале проверяет оче­редь на наличие сообщений
со значением </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>mtype</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> равным 1, затем равным 2 и так
далее, до значения </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>MAXPRIOR</span></i><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'> </span><span
style='mso-bidi-font-size:14.0pt;color:black'>включительно. Другими словами,
сообщения с наи­меньшим номером будут иметь наивысший приоритет. Процедура </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>proc</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>obj</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black'> </span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>работает с объектом. Для системы
печати она может просто копировать файл <span style='mso-bidi-font-weight:bold'>на
</span>принтер.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Две следующих
простых программы демонстрируют взаимодействие этих процедур: программа </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>etest</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> помещает элемент в очередь, а
программа </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>stest</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black'> </span><span
style='mso-bidi-font-size:14.0pt;color:black'>обрабатывает его (в действительности
она всего лишь выводит содержимое и тип сообщения).<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><b><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-style:italic'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><b><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-style:italic'><span style='mso-tab-count:1'>        </span>Программа
</span></b><b><i><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>etest</span></i></b><b><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-style:italic'><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><i><span style='mso-bidi-font-size:
14.0pt;color:black;text-transform:uppercase'>/* </span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>Программа </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>etest</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'> - ввод
имен объектов в очередь */<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>#include &lt;stdio.h&gt;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>#include &lt;stdlib.h&gt;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>#include &quot;q.h&quot;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>main(int
argc, char **argv) <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>int
priority;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>if(argc
!= 3 ) <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>fprintf(stderr,
&quot;</span></i><i style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>Применение</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>: %s </span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>имя</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'> </span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>приоритет</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>\n, argv[0]);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>exit(1);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'><span style='mso-tab-count:
1'>        </span>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>if((priority
= atoi(argv[2])) &lt;= 0 || priority &gt; MAXPRIOR)<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>warn(&quot;</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>Недопустимый</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:
bold'> </span></i><i style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>приоритет</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>&quot;);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>exit(2);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'><span
style='mso-tab-count:1'>        </span>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>if(enter(argv[1],
priority) &lt; 0) <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>warn</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>(&quot;Ошибка
в процедуре </span></i><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>enter</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>&quot;); <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>exit</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>(3);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><span
style='mso-tab-count:1'>        </span>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>exit</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>(0) ;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><b><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-style:italic'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><b><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-style:italic'>Программа </span></b><b><i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>stest</span></i></b><b><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-style:italic'><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><i><span style='mso-bidi-font-size:
14.0pt;color:black;text-transform:uppercase;mso-fareast-language:EN-US'>/* </span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>Программа </span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>stest</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'> - простой сервер для очереди */ <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>#include
&lt;stdio.h&gt; <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>#include
&quot;q.h&quot;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>main()
<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>pid_t
pid;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>switch(pid
= fork())<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>case</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'> 0:<span
style='mso-tab-count:1'>     </span> <span style='mso-tab-count:1'>       </span>/*
Дочерний процесс */<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>serve</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>();<sub><o:p></o:p></sub></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>break</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>;<span
style='mso-tab-count:1'>      </span> /* Сервер не существует */<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>case</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'> </span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>-1:<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>warn</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>(“Не удалось
запустить сервер”);<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>break</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>;<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>default</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>:<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>printf</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>(“Серверный
процесс с идентификатором %</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>d</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>\</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>n</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>”, </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>pid</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>);<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>}<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>exit(
pid != -1 ? 0 : 1);<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>}<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>int
proc_obj( struct q_entry *msg)<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>printf(“\n</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>Приоритет</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>: %ld </span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>имя</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>: %s\n”, msg-&gt;mtype,
msg-&gt;mtext);<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'>}<o:p></o:p></span></i></p>

<p class=msonormalcxspmiddle style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><o:p>&nbsp;</o:p></span></p>

<p class=msonormalcxspmiddle style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>         </span>Ниже следует
пример использования этих двух простых программ. Перед за­пуском программы </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>stest</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>в очередь
вводятся четыре простых сообщения при по­мощи программы </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>etest</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>. </span><span
style='mso-bidi-font-size:14.0pt;color:black'>Обратите внимание на порядок, в
котором выводятся сообщения:<o:p></o:p></span></p>

<p class=msonormalcxspmiddle style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><o:p>&nbsp;</o:p></span></p>

<p class=msonormalcxspmiddle style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'>$ </span><span lang=EN-US style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US'>etest</span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black'> </span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>objname</span><span
style='mso-bidi-font-size:14.0pt;color:black'>1 3<o:p></o:p></span></p>

<p class=msonormalcxspmiddle style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>$ etest
objname2 4<o:p></o:p></span></p>

<p class=msonormalcxspmiddle style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>$ etest
objname3 1<o:p></o:p></span></p>

<p class=msonormalcxspmiddle style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>$ etest
objname4 9<o:p></o:p></span></p>

<p class=msonormalcxspmiddle style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'>$ </span><span lang=EN-US style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US'>etest</span><span style='mso-bidi-font-size:
14.0pt;color:black'><o:p></o:p></span></p>

<p class=msonormalcxspmiddle style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'>Серверный процесс с идентификатором 2545<o:p></o:p></span></p>

<p class=msonormalcxspmiddle style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'>$<o:p></o:p></span></p>

<p class=msonormalcxspmiddle style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'>Приоритет 1 имя </span><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>objname</span><span
style='mso-bidi-font-size:14.0pt;color:black'>3<o:p></o:p></span></p>

<p class=msonormalcxspmiddle style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'>Приоритет 3 имя </span><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>objname</span><span
style='mso-bidi-font-size:14.0pt;color:black'>1<o:p></o:p></span></p>

<p class=msonormalcxspmiddle style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'>Приоритет 4 имя </span><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>objname</span><span
style='mso-bidi-font-size:14.0pt;color:black'>2<o:p></o:p></span></p>

<p class=msonormalcxspmiddle style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'>Приоритет 9 имя </span><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>objname</span><span
style='mso-bidi-font-size:14.0pt;color:black'>4<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><span
style='mso-tab-count:1'>        </span>Системный вызов </span></b><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>msgctl</span></b><b
style='mso-bidi-font-weight:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Процедура </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>msgctl</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>служит трем целям:
она позволяет процессу получать ин­формацию о статусе очереди сообщений, изменять
некоторые из связанных с оче­редью ограничений или удалять очередь из системы.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><b><i><span style='mso-bidi-font-size:
14.0pt;color:black'><o:p>&nbsp;</o:p></span></i></b></p>

<p class=MsoNormal style='text-align:justify'><b><i><span style='mso-bidi-font-size:
14.0pt;color:black'>Описание</span></i></b><b><i><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><o:p></o:p></span></i></b></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>#include
&lt;sys/msg.h&gt;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>int
msgctl(int mqid, int command, struct msqid_ds *msq_stat);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><span
style='mso-tab-count:1'>        </span></span><span style='mso-bidi-font-size:
14.0pt;color:black'>Переменная </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>mqid</span></i><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'> </span><span style='mso-bidi-font-size:
14.0pt;color:black'>должна быть допустимым идентификатором очереди. Про­пуская
пока параметр </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>command</span></i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'>, </span><span style='mso-bidi-font-size:
14.0pt;color:black'>обратимся к третьему параметру </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>msq</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>stat</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>, </span><span
style='mso-bidi-font-size:14.0pt;color:black'>кото­рый содержит адрес структуры
</span><i style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>msqid</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>ds</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>. </span><span
style='mso-bidi-font-size:14.0pt;color:black'>Эта структура определяется в
файле <i style='mso-bidi-font-style:normal'><span style='mso-bidi-font-weight:
bold'>&lt;</span></i></span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>sys</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>/</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>msg</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>.</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>h</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>&gt;</span></i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'> </span><span style='mso-bidi-font-size:
14.0pt;color:black'>и содержит следующие элементы:<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><o:p>&nbsp;</o:p></span></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:2.0pt;border-collapse:collapse;mso-padding-alt:0cm 2.0pt 0cm 2.0pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;height:10.8pt'>
  <td width=384 colspan=2 valign=top style='width:230.5pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:10.8pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
  mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>struct
  ipc_perm<span style='mso-spacerun:yes'>   </span>msg_perm;<o:p></o:p></span></i></p>
  </td>
  <td width=26 valign=top style='width:15.85pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:10.8pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
  bold'>/*<o:p></o:p></span></i></p>
  </td>
  <td width=363 valign=top style='width:218.05pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:10.8pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
  bold'>Владелец/права доступа */<o:p></o:p></span></i></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1;height:10.8pt'>
  <td width=165 valign=top style='width:99.25pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:10.8pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
  mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>msgqnum_t<o:p></o:p></span></i></p>
  </td>
  <td width=219 valign=top style='width:131.25pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:10.8pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
  mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>msg_qnum;<o:p></o:p></span></i></p>
  </td>
  <td width=26 valign=top style='width:15.85pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:10.8pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
  bold'>/*<o:p></o:p></span></i></p>
  </td>
  <td width=363 valign=top style='width:218.05pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:10.8pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
  bold'>Число сообщений в очереди */<o:p></o:p></span></i></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:2;height:10.8pt'>
  <td width=165 valign=top style='width:99.25pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:10.8pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
  mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>msglen_t<o:p></o:p></span></i></p>
  </td>
  <td width=219 valign=top style='width:131.25pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:10.8pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
  mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>msg_qbytes;<o:p></o:p></span></i></p>
  </td>
  <td width=26 valign=top style='width:15.85pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:10.8pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
  bold'>/*<o:p></o:p></span></i></p>
  </td>
  <td width=363 valign=top style='width:218.05pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:10.8pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
  bold'>Макс. число байтов в очереди */<o:p></o:p></span></i></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:3;height:11.75pt'>
  <td width=165 valign=top style='width:99.25pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:11.75pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
  mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>pid</span></i><i
  style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
  color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>_</span></i><i
  style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
  14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
  mso-bidi-font-weight:bold'>t</span></i><i style='mso-bidi-font-style:normal'><span
  style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
  mso-bidi-font-weight:bold'><o:p></o:p></span></i></p>
  </td>
  <td width=219 valign=top style='width:131.25pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:11.75pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
  mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>msg</span></i><i
  style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
  color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>_</span></i><i
  style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
  14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
  mso-bidi-font-weight:bold'>lspid</span></i><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
  EN-US;mso-bidi-font-weight:bold'>;<o:p></o:p></span></i></p>
  </td>
  <td width=26 valign=top style='width:15.85pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:11.75pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
  bold'>/*<o:p></o:p></span></i></p>
  </td>
  <td width=363 valign=top style='width:218.05pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:11.75pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
  bold'>Идентификатор процесса,<o:p></o:p></span></i></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:4;height:9.85pt'>
  <td width=165 valign=top style='width:99.25pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:9.85pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt'><o:p>&nbsp;</o:p></span></i></p>
  </td>
  <td width=219 valign=top style='width:131.25pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:9.85pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt'><o:p>&nbsp;</o:p></span></i></p>
  </td>
  <td width=390 colspan=2 valign=top style='width:233.9pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:9.85pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
  bold'>последним вызвавшего </span></i><i style='mso-bidi-font-style:normal'><span
  lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:
  EN-US;mso-bidi-font-weight:bold'>msgsnd</span></i><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
  bold'> */<o:p></o:p></span></i></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:5;height:12.0pt'>
  <td width=165 valign=top style='width:99.25pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:12.0pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
  mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>pid</span></i><i
  style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
  color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>_</span></i><i
  style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
  14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
  mso-bidi-font-weight:bold'>t</span></i><i style='mso-bidi-font-style:normal'><span
  style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
  mso-bidi-font-weight:bold'><o:p></o:p></span></i></p>
  </td>
  <td width=219 valign=top style='width:131.25pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:12.0pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
  mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>msg</span></i><i
  style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
  color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>_</span></i><i
  style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
  14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
  mso-bidi-font-weight:bold'>lrpid</span></i><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
  EN-US;mso-bidi-font-weight:bold'>;<o:p></o:p></span></i></p>
  </td>
  <td width=26 valign=top style='width:15.85pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:12.0pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
  bold'>/*<o:p></o:p></span></i></p>
  </td>
  <td width=363 valign=top style='width:218.05pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:12.0pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
  bold'>Идентификатор процесса,<o:p></o:p></span></i></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:6;height:10.3pt'>
  <td width=165 valign=top style='width:99.25pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:10.3pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt'><o:p>&nbsp;</o:p></span></i></p>
  </td>
  <td width=219 valign=top style='width:131.25pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:10.3pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt'><o:p>&nbsp;</o:p></span></i></p>
  </td>
  <td width=390 colspan=2 valign=top style='width:233.9pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:10.3pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
  bold'>последним вызвавшего </span></i><i style='mso-bidi-font-style:normal'><span
  lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:
  EN-US;mso-bidi-font-weight:bold'>msgrcv </span></i><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
  bold'>*/<o:p></o:p></span></i></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:7;height:11.3pt'>
  <td width=165 valign=top style='width:99.25pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:11.3pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
  mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>time_t<o:p></o:p></span></i></p>
  </td>
  <td width=219 valign=top style='width:131.25pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:11.3pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
  mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>msg_stime;<o:p></o:p></span></i></p>
  </td>
  <td width=26 valign=top style='width:15.85pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:11.3pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
  bold'>/*<o:p></o:p></span></i></p>
  </td>
  <td width=363 valign=top style='width:218.05pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:11.3pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
  bold'>Время посл. вызова </span></i><i style='mso-bidi-font-style:normal'><span
  lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:
  EN-US;mso-bidi-font-weight:bold'>msgsnd</span></i><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
  bold'> */<o:p></o:p></span></i></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:8;height:11.05pt'>
  <td width=165 valign=top style='width:99.25pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:11.05pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
  mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>time</span></i><i
  style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
  color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>_</span></i><i
  style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
  14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
  mso-bidi-font-weight:bold'>t</span></i><i style='mso-bidi-font-style:normal'><span
  style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
  mso-bidi-font-weight:bold'><o:p></o:p></span></i></p>
  </td>
  <td width=219 valign=top style='width:131.25pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:11.05pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
  mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>msg</span></i><i
  style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
  color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>_</span></i><i
  style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
  14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
  mso-bidi-font-weight:bold'>rtime</span></i><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
  EN-US;mso-bidi-font-weight:bold'>;<o:p></o:p></span></i></p>
  </td>
  <td width=26 valign=top style='width:15.85pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:11.05pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
  bold'>/*<o:p></o:p></span></i></p>
  </td>
  <td width=363 valign=top style='width:218.05pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:11.05pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
  bold'>Время посл. вызова </span></i><i style='mso-bidi-font-style:normal'><span
  lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:
  EN-US;mso-bidi-font-weight:bold'>msgrcv</span></i><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
  bold'> */<o:p></o:p></span></i></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:9;mso-yfti-lastrow:yes;height:10.3pt'>
  <td width=165 valign=top style='width:99.25pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:10.3pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
  mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>time</span></i><i
  style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
  color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>_</span></i><i
  style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
  14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
  mso-bidi-font-weight:bold'>t</span></i><i style='mso-bidi-font-style:normal'><span
  style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
  mso-bidi-font-weight:bold'><o:p></o:p></span></i></p>
  </td>
  <td width=219 valign=top style='width:131.25pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:10.3pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
  mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>msg</span></i><i
  style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
  color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>_</span></i><i
  style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
  14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
  mso-bidi-font-weight:bold'>ctime</span></i><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
  EN-US;mso-bidi-font-weight:bold'>;<o:p></o:p></span></i></p>
  </td>
  <td width=26 valign=top style='width:15.85pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:10.3pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
  bold'>/*<o:p></o:p></span></i></p>
  </td>
  <td width=363 valign=top style='width:218.05pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:10.3pt'>
  <p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
  normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
  bold'>Время посл. изменения */<o:p></o:p></span></i></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Структуры </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>ipc</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>perm</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>, </span><span
style='mso-bidi-font-size:14.0pt;color:black'>с которыми уже встречались ранее,
содержат связанную с очередью информацию о владельце и правах доступа. Типы </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>msgqnum</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>_</span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>t</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>, </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>msglen</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>t</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>, </span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>pid</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>t</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>и </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>time</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>t</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'> </span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>зависят от конкретной системы.
Переменные типа </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>time</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>t</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>содер­жат
число секунд, прошедшее с 00:00 по гринвичскому времени 1 января <st1:metricconverter
ProductID="1970 г" w:st="on">1970 г</st1:metricconverter>. (Следующий пример
покажет, как можно преобразовать такие значения в удобо­читаемый формат.)<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Параметр </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>command</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>в вызове </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>msgctl</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>сообщает
системе, какую операцию она должна выполнить. Существуют три возможных значения
этого параметра, каж­дое из которых может быть применено к одному из трех
средств межпроцессного взаимодействия. Они обозначаются следующими константами,
определенными в файле <i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-weight:bold'>&lt;</span></i></span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>sys</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>/</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>ipc</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>.</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>h</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>&gt;.</span></i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'><span style='mso-tab-count:1'>        </span></span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>IPC</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>STAT</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'><span style='mso-spacerun:yes'>  </span></span><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US'>Сообщает
системе, что нужно поместить информацию о стату­се объекта в структуру </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>msg</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>stat</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>.</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'><span style='mso-tab-count:1'>        </span></span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>IPC</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>SET</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'> </span><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'><span
style='mso-spacerun:yes'>   </span></span><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US'>Используется для задания значений
управляющих параметров </span><span style='mso-bidi-font-size:14.0pt;
color:black'>очереди сообщений, содержащихся в структуре </span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>msg</span><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>stat</span><span style='mso-bidi-font-size:14.0pt;
color:black'>. При этом могут быть изменены только следующие поля:<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'><span
style='mso-spacerun:yes'>        </span><i style='mso-bidi-font-style:normal'><span
style='mso-spacerun:yes'>                         </span></i></span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>msq</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>stat</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>.</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>msg</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>perm</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>.</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>uid</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'><span style='mso-spacerun:yes'>  </span><o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'><span
style='mso-spacerun:yes'>                                 </span></span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>msq_stat.msg_perm.gid<span
style='mso-spacerun:yes'>  </span><o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'><span
style='mso-spacerun:yes'>                                 </span>msq_stat.msg_perm.mode<span
style='mso-spacerun:yes'>  </span><o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'><span
style='mso-spacerun:yes'>                             </span><span
style='mso-spacerun:yes'>    </span>msq</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>stat</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>.</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>msg</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>qbytes</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'><o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Операция </span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>IPC</span><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>SET</span><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'> </span><span style='mso-bidi-font-size:
14.0pt;color:black'>завершится успехом только в случае ее вы­полнения
суперпользователем или текущим владельцем очере­ди, заданным параметром </span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>msq</span><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>stat</span><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'> .</span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>msg</span><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>perm</span><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>.</span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>uid</span><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>. </span><span style='mso-bidi-font-size:
14.0pt;color:black'>Кроме того, только суперпользователь может увеличивать
значение </span><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>msg</span><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>_</span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>qbytes</span><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'> </span><span style='mso-bidi-font-size:
14.0pt;color:black'>- максимальное количество байтов, которое мо­жет находиться
в очереди<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'><span style='mso-tab-count:1'>        </span></span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>IPC</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>RMID</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'><span
style='mso-spacerun:yes'>  </span></span><span style='mso-bidi-font-size:14.0pt;
color:black'>Эта операция удаляет очередь сообщений из системы. Она так­же
может быть выполнена только суперпользователем или вла­дельцем очереди. Если
параметр </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>command</span></i><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'> </span><span style='mso-bidi-font-size:
14.0pt;color:black'>принимает значение </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>IPC</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>RMID</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>, </span><span
style='mso-bidi-font-size:14.0pt;color:black'>то параметр </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>msg</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>stat</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>задается
равным </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>NULL</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'><o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Следующий
пример, программа </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>show</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>msg</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>, </span><span
style='mso-bidi-font-size:14.0pt;color:black'>выводит часть информации о ста­тусе
объекта очереди сообщений. Программа должна вызываться так: <o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'>$ </span></i><i><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>show</span></i><i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'>_</span></i><i><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>msg</span></i><i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'> значение_ключа<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Программа </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>show</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>msg</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>использует
библиотечную процедуру </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>ctime</span></i><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'> </span><span style='mso-bidi-font-size:
14.0pt;color:black'>для преоб­разования значений структуры </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>time</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>t</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> </span><span style='mso-bidi-font-size:14.0pt;color:black'>в привычную
запись. <o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'>Текст программы </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>show</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>msg</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>:<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>/* Программа </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>showmsg</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> - выводит данные об очереди сообщений */<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>#include
&lt;sys/types.h&gt; <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>#include
&lt;sys/ipc.h&gt;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>#include
&lt;sys/msg.h&gt;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>#include
&lt;stdio.h&gt;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>#include
&lt;time.h&gt;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>void
mqstat_print (key_t, int, struct msqid_ds *);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>main
(int argc, char **argv) <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>key_t
mkey; <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>int
msq_id;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>struct
msqid_ds msq_status;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>if(argc
!= 2) <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify;tab-stops:489.05pt'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>fprintf(stderr,<span style='mso-spacerun:yes'> 
</span>&quot;</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>Применение</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>:
showmsg </span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>значение</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>_</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>ключа</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>\</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>п</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>&quot;); <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify;tab-stops:489.05pt'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>exit</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>(1) ;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>/* Получаем идентификатор очереди сообщений */<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>mkey = (key_t)atoi(argv[1]);
<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>if(( msq_id = msgget(mkey,
0)) == -1) <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>perror(&quot;</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>Ошибка</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:
bold'> </span></i><i style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>вызова</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'> msgget&quot;); <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>exit(2);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>/* </span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>Получаем</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:
EN-US;mso-bidi-font-weight:bold'> </span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>информацию</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'> </span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>о</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'> </span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>статусе</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'> */ <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>if(msgctl(msq_id, IPC_STAT,
&amp;msq_status) == -1) <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>perror(&quot;</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>Ошибка</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:
bold'> </span></i><i style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>вызова</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'> msgctl&quot;);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>exit(3);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>/* </span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>Выводим</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:
EN-US;mso-bidi-font-weight:bold'> </span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>информацию</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'> </span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>о</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'> </span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>статусе</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'> */ <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>mqstat_print(mkey, msq_id,
&amp;msq_status) <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>exit(0);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>void
mqstat_print(key_t mkey, int mqid, struct msqld_ds *mstat) <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>printf
(&quot;\</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>пКлюч</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'> %d, msg_qid
%d\n\n&quot;, mkey, mqid);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>printf</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'> (&quot;%</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>d</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'> сообщений в очереди\п\п&quot;, </span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>mstat</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>-&gt;</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>msg</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>qnum</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>printf</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>
(&quot;Последнее сообщение послано процессом %</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>d</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'> в %</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>s</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>\</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>n</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>&quot;,<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'><span style='mso-spacerun:yes'> </span></span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>mstat</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>-&gt;</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>msg</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>lspid</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>, </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>ctime</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>(&amp;(</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>mstat</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>-&gt;</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>msg</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>stime</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>)));<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>printf</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>
(&quot;Последнее сообщение принято процессом %</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>d</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'> в %</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>s</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>\</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>n</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>&quot;, <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>mstat-&gt;msg_lrpid,
ctime(&amp;(mstat-&gt;msg_rtime)));<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><span
style='mso-tab-count:1'>        </span></span></b><span style='mso-bidi-font-size:
14.0pt;color:black'>4.1.5.3. Семафоры<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><span
style='mso-tab-count:1'>        </span><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><span
style='mso-tab-count:1'>        </span>Семафоры как теоретическая конструкция<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>В информатике
понятие <i>семафор</i><span style='mso-bidi-font-style:italic'> </span>(</span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>semaphore</span><span
style='mso-bidi-font-size:14.0pt;color:black'>) было впервые введено голланд­ским
теоретиком Е.В. Дейкстрой (</span><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>E</span><span style='mso-bidi-font-size:
14.0pt;color:black'>.</span><span lang=EN-US style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US'>W</span><span style='mso-bidi-font-size:
14.0pt;color:black'>. </span><span lang=EN-US style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US'>Dijkstra</span><span style='mso-bidi-font-size:
14.0pt;color:black'>) для решения задач синхрониза­ции процессов. Семафор </span><i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>sem</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-style:italic'> </span><span style='mso-bidi-font-size:14.0pt;
color:black'>может рассматриваться как целочисленная перемен­ная, для которой
определены следующие операции:<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><i><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>p(sem) </span></i><i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>или</span></i><i><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'> wait (sem)<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>if</span></i><i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'> (</span></i><i><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>sem</span></i><i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'> !=0)<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'>уменьшить </span></i><i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>sem</span></i><i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'> на единицу <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>else</span></i><i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'><o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'>ждать, пока </span></i><i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>sem</span></i><i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'> не станет ненулевым, затем
вычесть единицу<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'><o:p>&nbsp;</o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>v(sem) </span></i><i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>или</span></i><i><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'> signal (sem)<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'>увеличить </span></i><i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>sem</span></i><i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'> на единицу<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>if</span></i><i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'> (очередь ожидающих процессов не
пуста)<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'>продолжить выполнение первого
процесса в очереди ожидания</span></i><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold;mso-bidi-font-style:italic'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Обратите
внимание, что обозначения <i style='mso-bidi-font-style:normal'>р</i> и </span><i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>v</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-style:italic'> </span><span style='mso-bidi-font-size:14.0pt;
color:black'>происходят от голландских терми­нов для понятий <i>ожидания</i><span
style='mso-bidi-font-style:italic'> </span>(</span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>wait</span><span
style='mso-bidi-font-size:14.0pt;color:black'>) и <i>сигнализации</i><span
style='mso-bidi-font-style:italic'> </span>(</span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>signal</span><span
style='mso-bidi-font-size:14.0pt;color:black'>), причем последнее по­нятие не
следует путать с обычными сигналами </span><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>UNIX</span><span style='mso-bidi-font-size:
14.0pt;color:black'>.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Действия
проверки и установки в обеих операциях должны составлять одно атомарное
действие, чтобы только один процесс мог изменять семафор </span><i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>sem</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-style:italic'> </span><span style='mso-bidi-font-size:14.0pt;
color:black'>в каж­дый момент времени.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><span
style='mso-tab-count:1'>        </span>Системный вызов </span></b><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>semget</span></b><b
style='mso-bidi-font-weight:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><span
style='mso-tab-count:1'>        </span>Описание<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>#</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>include</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'> &lt;</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>sys</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>\</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>sem</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>.</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>h</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>&gt;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>int semget(key_t key, int nsems, int permflags);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><span
style='mso-tab-count:1'>        </span></span><span style='mso-bidi-font-size:
14.0pt;color:black'>Вызов </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>semget</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> аналогичен вызову </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>msgget</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>. Дополнительный параметр </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>nsems</span></i><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'> </span><span
style='mso-bidi-font-size:14.0pt;color:black'>задает требуемое число семафоров
в наборе семафоров; это важный момент - семафорные операции в </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>System</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'> V </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>IPC</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> приспособлены для работы с
наборами семафоров, а не с отдельными объектами семафоров. На рис. 8.2 показан
набор семафоров. Ниже увидим, что использование целого набора семафоров
усложняет интерфейс процедур работы с семафорами.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'>Значение, возвращаемое в результате успешного вызова </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>semget</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>, является <i>идентификатором
набора семафоров</i><span style='mso-bidi-font-style:italic'> </span>(</span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>semaphore
set identifier</span><span style='mso-bidi-font-size:14.0pt;color:black'>),
который ведет себя<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><!--[if gte vml 1]><v:shape id="_x0000_i1027" type="#_x0000_t75"
 style='width:263.4pt;height:109.8pt'>
 <v:imagedata src="Тема4.files/image003.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=351 height=146
src="Тема4.files/image004.jpg" v:shapes="_x0000_i1027"><![endif]><span
style='mso-spacerun:yes'>      </span></span><b style='mso-bidi-font-weight:
normal'><span style='font-size:10.0pt;mso-bidi-font-size:14.0pt;color:black'><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
normal'><span style='font-size:10.0pt;mso-bidi-font-size:14.0pt;color:black'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:2'>                </span>Рис.
4.1. Набор семафоров<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'>почти так же, как идентификатор очереди сообщений.
Идентификатор набора семафоров обозначен на рис. 4.1 как </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>semid</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>. Следуя обычной практике языка
С, ин­декс семафора в наборе может принимать значения от 0 до </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>nsems</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>-1</span></i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'>. <o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>С каждым
семафором в наборе связаны следующие значения: <o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-style:italic'><span style='mso-tab-count:1'>        </span></span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-style:italic'>semval</span><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-style:italic'><span style='mso-spacerun:yes'>    
</span></span><span style='mso-bidi-font-size:14.0pt;color:black'>Значение
семафора, положительное целое число. Устанавливается при помощи системных
вызовов работы с семафорами, то есть к зна­чениям семафоров нельзя получить
прямой доступ из программы, как к другим объектам данных.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-style:italic'><span style='mso-tab-count:1'>        </span></span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-style:italic'>sempid</span><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-style:italic'><span style='mso-spacerun:yes'>   
</span></span><span style='mso-bidi-font-size:14.0pt;color:black'>Идентификатор
процесса, который последним работал с семафором.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-style:italic'><span style='mso-tab-count:1'>        </span></span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-style:italic'>semcnt</span><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-style:italic'><span style='mso-spacerun:yes'>    
</span></span><span style='mso-bidi-font-size:14.0pt;color:black'>Число
процессов, ожидающих увеличения значения семафора.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-style:italic'><span style='mso-tab-count:1'>        </span></span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-style:italic'>semzcnt</span><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-style:italic'><span style='mso-spacerun:yes'>  
</span></span><span style='mso-bidi-font-size:14.0pt;color:black'>Число
процессов, ожидающих обнуления значения семафора.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><b><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-style:italic'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><b><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-style:italic'><span style='mso-tab-count:1'>        </span>Системный
вызов </span></b><b><span lang=EN-US style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US;mso-bidi-font-style:italic'>semctl</span></b><b><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-style:italic'><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><b><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-style:italic'><span style='mso-tab-count:1'>        </span>Описание<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'>#</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>include</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'> &lt;</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>sys</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>/</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>sem</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>.</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>h</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>&gt;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>int
semctl (int semid, int sem_num, int command, union semun ctl_arg);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><span
style='mso-tab-count:1'>        </span></span><span style='mso-bidi-font-size:
14.0pt;color:black'>Из определения видно, что функция </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>semctl</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> намного сложнее, чем </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>msgctl</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>. Па­раметр </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>semid</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> должен быть допустимым
идентификатором семафора, возвращен­ным вызовом </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>semget</span></i><span style='mso-bidi-font-size:14.0pt;
color:black'>. Параметр </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>command
</span></i><span style='mso-bidi-font-size:14.0pt;color:black'>имеет тот же
смысл, что и в вызове </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>msgctl</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>, - задает требуемую команду.
Команды распадаются на три категории: стандартные команды управления средством
межпроцессного взаимодействия (такие как </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>IPC</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>STAT</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>); </span><span
style='mso-bidi-font-size:14.0pt;color:black'>команды, которые воздействуют только
на один семафор; и команды, действующие на весь набор семафоров. Все доступные
команды при­ведены в табл. 8.1.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:12.0pt;
mso-bidi-font-size:14.0pt;color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'>Таблица 8.1. Коды функций вызова </span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>semctl</span><span
style='mso-bidi-font-size:14.0pt;color:black'><o:p></o:p></span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none;mso-border-top-alt:solid black .5pt;
 mso-border-bottom-alt:solid black .5pt;mso-yfti-tbllook:1184;mso-padding-alt:
 0cm 5.4pt 0cm 5.4pt;mso-border-insideh:.5pt solid black;mso-border-insidev:
 .5pt solid black'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
  <td width=821 valign=top style='width:492.7pt;border-top:solid black 1.5pt;
  border-left:none;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
  normal'><span style='mso-bidi-font-size:14.0pt;color:black'>Стандартные
  функции межпроцессного взаимодействия<o:p></o:p></span></b></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1'>
  <td width=821 valign=top style='width:492.7pt;border:none;border-bottom:solid black 1.0pt;
  mso-border-top-alt:solid black 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>IPC</span><span
  style='mso-bidi-font-size:14.0pt;color:black'>_</span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>STAT</span><span
  style='mso-bidi-font-size:14.0pt;color:black'><span
  style='mso-spacerun:yes'>        </span>Поместить информацию о статусе в поле
  </span><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
  mso-ansi-language:EN-US'>ctl</span><span style='mso-bidi-font-size:14.0pt;
  color:black'>_</span><span lang=EN-US style='mso-bidi-font-size:14.0pt;
  color:black;mso-ansi-language:EN-US'>arg</span><span style='mso-bidi-font-size:
  14.0pt;color:black'>.</span><span lang=EN-US style='mso-bidi-font-size:14.0pt;
  color:black;mso-ansi-language:EN-US'>buf</span><span style='mso-bidi-font-size:
  14.0pt;color:black'><o:p></o:p></span></p>
  <p class=MsoNormal style='text-align:justify'><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>IPC</span><span
  style='mso-bidi-font-size:14.0pt;color:black'>_</span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>SET</span><span
  style='mso-bidi-font-size:14.0pt;color:black'><span
  style='mso-spacerun:yes'>           </span>Установить данные о
  владельце/правах доступа<o:p></o:p></span></p>
  <p class=MsoNormal style='text-align:justify'><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>IPC</span><span
  style='mso-bidi-font-size:14.0pt;color:black'>_</span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>RMID</span><span
  style='mso-bidi-font-size:14.0pt;color:black'><span
  style='mso-spacerun:yes'>        </span>Удалить набор семафоров из системы<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:2'>
  <td width=821 valign=top style='width:492.7pt;border:none;border-bottom:solid black 1.0pt;
  mso-border-top-alt:solid black 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
  normal'><span style='mso-bidi-font-size:14.0pt;color:black'>Операции над
  одиночными семафорами<o:p></o:p></span></b></p>
  <p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
  14.0pt;color:black'>(относятся к семафору </span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>sem</span><span
  style='mso-bidi-font-size:14.0pt;color:black'>_</span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>num</span><span
  style='mso-bidi-font-size:14.0pt;color:black'>, значение возвращается вызовом
  </span><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
  mso-ansi-language:EN-US'>semctl</span><span style='mso-bidi-font-size:14.0pt;
  color:black'>)<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:3'>
  <td width=821 valign=top style='width:492.7pt;border:none;border-bottom:solid black 1.0pt;
  mso-border-top-alt:solid black 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>GETVAL</span><span
  style='mso-bidi-font-size:14.0pt;color:black'><span
  style='mso-spacerun:yes'>           </span>Вернуть значение семафора ( то
  есть </span><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
  mso-ansi-language:EN-US'>semval</span><span style='mso-bidi-font-size:14.0pt;
  color:black'> )<o:p></o:p></span></p>
  <p class=MsoNormal style='text-align:justify'><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>SETVAL</span><span
  style='mso-bidi-font-size:14.0pt;color:black'><span
  style='mso-spacerun:yes'>           </span>Установить значение семафора
  равным </span><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
  mso-ansi-language:EN-US'>ctl</span><span style='mso-bidi-font-size:14.0pt;
  color:black'>_</span><span lang=EN-US style='mso-bidi-font-size:14.0pt;
  color:black;mso-ansi-language:EN-US'>arg</span><span style='mso-bidi-font-size:
  14.0pt;color:black'>.</span><span lang=EN-US style='mso-bidi-font-size:14.0pt;
  color:black;mso-ansi-language:EN-US'>val</span><span style='mso-bidi-font-size:
  14.0pt;color:black'><o:p></o:p></span></p>
  <p class=MsoNormal style='text-align:justify'><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>GETPID</span><span
  style='mso-bidi-font-size:14.0pt;color:black'><span
  style='mso-spacerun:yes'>             </span>Вернуть значение </span><span
  lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:
  EN-US'>sempid</span><span style='mso-bidi-font-size:14.0pt;color:black'><o:p></o:p></span></p>
  <p class=MsoNormal style='text-align:justify'><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>GETNCNT</span><span
  style='mso-bidi-font-size:14.0pt;color:black'><span
  style='mso-spacerun:yes'>        </span>Вернуть </span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>semncnt</span><span
  style='mso-bidi-font-size:14.0pt;color:black'> (см. выше)<o:p></o:p></span></p>
  <p class=MsoNormal style='text-align:justify'><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>GETZCNT</span><span
  style='mso-bidi-font-size:14.0pt;color:black'><span
  style='mso-spacerun:yes'>         </span>Вернуть </span><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>semzcnt</span><span
  style='mso-bidi-font-size:14.0pt;color:black'> (см. выше)<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:4'>
  <td width=821 valign=top style='width:492.7pt;border:none;border-bottom:solid black 1.0pt;
  mso-border-top-alt:solid black 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
  normal'><span style='mso-bidi-font-size:14.0pt;color:black'>Операции над
  всеми семафорами<o:p></o:p></span></b></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:5;mso-yfti-lastrow:yes'>
  <td width=821 valign=top style='width:492.7pt;border:none;border-bottom:solid black 1.0pt;
  mso-border-top-alt:solid black 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>GETALL</span><span
  style='mso-bidi-font-size:14.0pt;color:black'><span
  style='mso-spacerun:yes'>            </span>Поместить значение </span><span
  lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:
  EN-US'>semval</span><span style='mso-bidi-font-size:14.0pt;color:black'> в
  массив </span><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
  mso-ansi-language:EN-US'>ctl</span><span style='mso-bidi-font-size:14.0pt;
  color:black'>_</span><span lang=EN-US style='mso-bidi-font-size:14.0pt;
  color:black;mso-ansi-language:EN-US'>arg</span><span style='mso-bidi-font-size:
  14.0pt;color:black'>.</span><span lang=EN-US style='mso-bidi-font-size:14.0pt;
  color:black;mso-ansi-language:EN-US'>array</span><span style='mso-bidi-font-size:
  14.0pt;color:black'><o:p></o:p></span></p>
  <p class=MsoNormal style='text-align:justify'><span lang=EN-US
  style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>SETALL</span><span
  style='mso-bidi-font-size:14.0pt;color:black'><span
  style='mso-spacerun:yes'>             </span>Установить все значения </span><span
  lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:
  EN-US'>semval</span><span style='mso-bidi-font-size:14.0pt;color:black'> из
  массива </span><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
  mso-ansi-language:EN-US'>ctl</span><span style='mso-bidi-font-size:14.0pt;
  color:black'>_</span><span lang=EN-US style='mso-bidi-font-size:14.0pt;
  color:black;mso-ansi-language:EN-US'>arg</span><span style='mso-bidi-font-size:
  14.0pt;color:black'>.</span><span lang=EN-US style='mso-bidi-font-size:14.0pt;
  color:black;mso-ansi-language:EN-US'>array</span><span style='mso-bidi-font-size:
  14.0pt;color:black'><o:p></o:p></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Параметр </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>sem</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>num</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> используется со второй группой возможных
операций вы­зова </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>semctl</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> для задания определенного семафора.
Последний параметр </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>ctl</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>_</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>arg</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>
</span><span style='mso-bidi-font-size:14.0pt;color:black'>является
объединением, определенным следующим образом:<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>union semun</span><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>{ <o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>int val;<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>struct semid_ds *buf; <o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>unsigned short</span><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'> *</span><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>array</span><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>; <o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>};<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Каждый элемент
объединения представляет некоторый тип значения, переда­ваемого вызову </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>semctl</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> при выполнении определенной
команды. Например, если значение </span><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>command</span><span
style='mso-bidi-font-size:14.0pt;color:black'> равно </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>SETVAL</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>, </span><span
style='mso-bidi-font-size:14.0pt;color:black'>то будет использоваться элемент </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>ctl</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>arg</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>.</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>val</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Одно из важных
применений функции </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>setval</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> заключается в установке на­чальных
значений семафоров, так как вызов </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>semget</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> не позволяет процессу сделать
это. Приведенная в качестве примера функция </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>initsem</span></i><span style='mso-bidi-font-size:
14.0pt;color:black'> может использовать­ся для создания одиночного семафора и
получения связанного с ним иденти­фикатора набора семафоров. После создания
семафора (если семафор еще не существовал) функция </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>semctl</span></i><span style='mso-bidi-font-size:14.0pt;
color:black'> присваивает ему начальное значение равное единице.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'><o:p>&nbsp;</o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>/* Функция </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>initsem</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> - инициализация семафора */ <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>#</span></i><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>include</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> &quot;</span></i><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>pv</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>.</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>h</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>&quot; <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>int initsem(key_t semkey)<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;text-transform:uppercase;
mso-ansi-language:EN-US'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>int
status = 0, semid;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>if
( (semid = semget(semkey, 1, SEMPERM|IPC_CREAT|IPC_EXCL))<span
style='mso-spacerun:yes'>  </span>== -1)<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>if(errno
= EEXIST)<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>semid
= semget(semkey, 1, 0) ;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>else<span
style='mso-spacerun:yes'>        </span>/* </span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'>Если</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:
EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'> </span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>семафор</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:
bold'> </span></i><i style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>создается</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'> */<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>union
semun arg; <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>arg.val
= 1;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>status
= semctl(semid, 0, SETVAL, arg);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>if(semid
== -1||<span style='mso-spacerun:yes'>  </span>status == -1) <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>perror(&quot;</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>Ошибка</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:
bold'> </span></i><i style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>вызова</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'> initsem&quot;); <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>return</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'> (-1);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>/* Все в порядке */ <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>return</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'> (</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>semid</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Включаемый
файл </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>pv</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>. </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>h</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> содержит следующие определения:<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>/* Заголовочный файл для примера работы с семафорами */<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US'>#include
&lt;sys/types.h&gt;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US'>#include &lt;sys/ipc.h&gt;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US'>#include &lt;sys/sem.h&gt;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US'>#include &lt;errno.h&gt;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US'>#define <span
style='mso-bidi-font-weight:bold'>SEMPERM<span style='mso-spacerun:yes'>    
</span>0600 <o:p></o:p></span></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US'>#define <span
style='mso-bidi-font-weight:bold'>TRUE<span
style='mso-spacerun:yes'>             </span>1<o:p></o:p></span></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US'>#define <span
style='mso-bidi-font-weight:bold'>FALSE<span
style='mso-spacerun:yes'>           </span>0<o:p></o:p></span></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US'>typedef union _semun <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US'>int val;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US'>struct semid_ds *buf; <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US'>ushort *array;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US'>} </span></i><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US'>semun</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US'>;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US'><span style='mso-tab-count:1'>        </span>Операции над семафорами:
вызов </span></b><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US'>semop</span></b><b style='mso-bidi-font-weight:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US'><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US'><span style='mso-tab-count:1'>        </span>Вызов
</span><i style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US'>semop</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US'> </span><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US'>выполняет основные операции над семафорами.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US'><span style='mso-tab-count:1'>        </span><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US'>Описание</span></b><b style='mso-bidi-font-weight:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US'><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US'>#include &lt;sys/sem.h&gt;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US'>int semop(int semid, struct
sembuf *op_array, size_t num_ops);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><span
style='mso-tab-count:1'>        </span></span><span style='mso-bidi-font-size:
14.0pt;color:black'>Переменная </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>semid</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> является идентификатором набора
семафоров, полученным с помощью вызова </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>semget</span></i><span style='mso-bidi-font-size:14.0pt;
color:black'>. Параметр </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>op</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>_</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>array
</span></i><span style='mso-bidi-font-size:14.0pt;color:black'>является массивом
струк­тур </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>sembuf</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>, определенных в файле <i
style='mso-bidi-font-style:normal'>&lt;</i></span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>sys</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black'>/</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>sem</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black'>.</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>h</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black'>&gt;.</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> Каждая структура </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>sembuf</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> со­держит описание операций,
выполняемых над семафором.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>И снова
основной акцент делается на операции с наборами семафоров, при этом функция </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>semop</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> позволяет выполнять группу
операций как атомарную опе­рацию. Это означает, что пока не появится
возможность одновременного выпол­нения всех операций с отдельными семафорами
набора, не будет выполнена ни одна из этих операций. Если не указано обратного,
процесс приостановит работу до<b> </b>тех пор, пока он не сможет выполнить все
операции сразу.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Рассмотрим
структуру </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>sembuf</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>. Она включает в себя следующие
элементы: </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>unsigned</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'><span style='mso-spacerun:yes'>   </span></span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>short sem</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>_</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>num</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>; <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>short sem_op; <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>short sem_flg;</span></i><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><span
style='mso-tab-count:1'>        </span></span><span style='mso-bidi-font-size:
14.0pt;color:black'>Поле </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>sem</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>_</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>num</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> содержит индекс семафора в
наборе. Если, например, набор со­держит всего один элемент, то значение </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>sem</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>num</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> должно быть равно нулю. <span
style='mso-tab-count:1'>   </span>Поле </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>sem</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>op</span></i><span style='mso-bidi-font-size:14.0pt;
color:black'> содержит целое число со знаком, значение которого сообщает
функции </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>semop</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>, что необходимо сделать. При
этом возможны три случая: <o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><b><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Случай 1: отрицательное
значение </span></b><b><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>sem</span></i></b><b><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>_</span></i></b><b><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>op</span></i></b><b><span
style='mso-bidi-font-size:14.0pt;color:black'><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Это обобщенная
форма команды для работы с семафорами </span><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>p</span><span style='mso-bidi-font-size:
14.0pt;color:black'> (), которая обсуждалась ранее. Действие функции </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>semop</span></i><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'> </span><span
style='mso-bidi-font-size:14.0pt;color:black'>можно описать при помощи
псевдокода следующим образом (обратите внимание, что </span><i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>ABS</span></i><i><span
style='mso-bidi-font-size:14.0pt;color:black'>() </span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>обозначает модуль пере­менной):<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>if(
semval &gt;= ABS(sem_op)<span style='mso-spacerun:yes'>   </span>)<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>semval
= semval - ABS(sem_op);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>else<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>if(
(sem_flg &amp; IPC_NOWAIT)<span style='mso-spacerun:yes'>  </span>) <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'>немедленно вернуть -1<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'><span style='mso-spacerun:yes'> </span></span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>else</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'> </span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'><o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>ждать, пока </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>semval</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'> не
станет больше или равно </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>ABS</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>(</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>sem</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>op</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>) <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>затем, как и выше, вычесть </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>ABS</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>(</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>sem</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>op</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>)<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>} <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Основная идея заключается
в том, что функция </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>semop</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> вначале проверяет значе­ние </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>semval</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>, связанное с семафором </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>sem</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>num</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>. Если значение </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>semval</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> достаточно ве­лико, то оно сразу
уменьшается на указанную величину. В противном случае процесс будет ждать, пока
значение </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>semval</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black'> </span><span
style='mso-bidi-font-size:14.0pt;color:black'>не станет достаточно большим. Тем
не менее, если в переменной </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>sem</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>_</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>f
lg</span></i><span style='mso-bidi-font-size:14.0pt;color:black'> установлен
флаг </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>IPC</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>NOWAIT</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>, </span><span
style='mso-bidi-font-size:14.0pt;color:black'>то возврат из вызова </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>sem</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>op</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> произойдет немедленно, и
переменная </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>errno</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> будет содержать код ошибки </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>EAGAIN</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><span
style='mso-tab-count:1'>        </span>Случай 2: положительное значение </span></b><b><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>sem</span></b><b><span
style='mso-bidi-font-size:14.0pt;color:black'>_</span></b><b><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>op</span></b><b><span
style='mso-bidi-font-size:14.0pt;color:black'><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Это соответствует
традиционной операции </span><span lang=EN-US style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US'>v</span><span style='mso-bidi-font-size:
14.0pt;color:black'> (). Значение переменной </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>sem</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>op</span></i><span style='mso-bidi-font-size:14.0pt;
color:black'> просто прибавляется к соответствующему значению </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>semval</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>. Если есть процессы, ожидающие
изменения значения этого семафора, то они могут продолжить вы­полнение, если
новое значение семафора удовлетворит их условия.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><b style='mso-bidi-font-weight:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><span
style='mso-tab-count:1'>        </span>Случай 3: нулевое значение </span></b><b><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>sem</span></i></b><b><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>_</span></i></b><b><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>op</span></i></b><b><span
style='mso-bidi-font-size:14.0pt;color:black'><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>В этом случае
вызов </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>sem</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>_</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>op</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> будет ждать, пока значение
семафора не станет равным нулю; значение </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>semval</span></i><span style='mso-bidi-font-size:14.0pt;
color:black'> этим вызовом не будет изменяться. Если в пере­менной </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>sem</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>f lg</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> установлен флаг </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>IPC</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>NOWAIT</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>, </span><span
style='mso-bidi-font-size:14.0pt;color:black'>а значение </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>semval</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> еще не равно нулю, то функция </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>semop</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> сразу же вернет сообщение об
ошибке.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><b><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-style:italic'><span
style='mso-tab-count:1'>        </span>Флаг </span></b><b><i><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US'>SEM</span></i></b><b><i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US'>_</span></i></b><b><i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US'>UNDO</span></i></b><b><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-style:italic'><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Это еще один
флаг, который может быть установлен в элементе </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>sem</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>flg</span></i><span style='mso-bidi-font-size:14.0pt;
color:black'> струк­туры </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>sembuf</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>. Он сообщает системе, что нужно
автоматически «отменить» эту опе­рацию после завершения процесса. Для
отслеживания всей последовательности таких операций система поддерживает для
семафора целочисленную переменную </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>semadj</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>. Важно понимать, что переменная </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>semadj</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> связана с процессами, и для раз­ных
процессов один и тот же семафор будет иметь различные значения </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>semadj</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>. Если при выполнении операции </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>semop</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> установлен флаг </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>SEM</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>UNDO</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>, </span><span
style='mso-bidi-font-size:14.0pt;color:black'>то значение переменной </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>sem</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>num</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> просто вычитается из значения </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>semadj</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>. При этом важен знак переменной </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>sem</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>num</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>: значение </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>semadj</span></i><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black'> </span><span style='mso-bidi-font-size:
14.0pt;color:black'>уменьшается, если значение </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>sem</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>num </span></i><span style='mso-bidi-font-size:14.0pt;
color:black'>положительное, и увеличивается, если оно отрицательное. После
выхода из про­цесса система прибавляет все значения </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>semadj</span></i><span style='mso-bidi-font-size:14.0pt;
color:black'> к соответствующим семафорам и, таким образом, сводит на нет
эффект от всех вызовов </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>semop</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>. В общем случае флаг </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>SEM</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>UNDO</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'> </span><span style='mso-bidi-font-size:14.0pt;
color:black'>должен быть всегда установлен, кроме тех случаев, когда значения,
уста­навливаемые процессом, должны сохраняться после завершения процесса. <o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><b><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-style:italic'><span style='mso-tab-count:1'>        </span>Пример
работы с семафорами<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Теперь
продолжим пример, который начали с процедуры </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>initsem</span></i><span style='mso-bidi-font-size:
14.0pt;color:black'>. Он содержит две процедуры </span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>p</span><span
style='mso-bidi-font-size:14.0pt;color:black'>() и </span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>v</span><span
style='mso-bidi-font-size:14.0pt;color:black'>(), реализующие традиционные
операции над семафо­рами. Сначала рассмотрим </span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>p</span><span
style='mso-bidi-font-size:14.0pt;color:black'>():<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>/* Процедура р.с - операция р для семафора */<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>#include
&quot;pv.h&quot;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>int
</span></i><i style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>р</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'> (int semid) <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>struct
sembuf p_buf;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>p_buf.sem_num
= 0; <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>p_buf.sem_op
= -1; <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=DE style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:
DE;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>p_buf.sem_fig =
SEM_UNDO;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>if(semop(semid,
&amp;p_buf, 1) == -1) <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>perror</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>(&quot;Ошибка
операции </span></i><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>p</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>(</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>semid</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>)&quot;); <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>exit</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>(1);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'>}</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'><o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>return</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'> (0);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Обратите
внимание на то, что здесь использован флаг </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>SEM</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>UNDO</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>. </span><span
style='mso-bidi-font-size:14.0pt;color:black'>Теперь рас­смотрим текст
процедуры </span><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>v</span><span style='mso-bidi-font-size:14.0pt;
color:black'>().<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>/* Процедура </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>v</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>.с -
операция </span></i><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>v</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'> для семафора
*/<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>#include &quot;pv.h&quot;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>int
v(int semid)<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>struct
sembuf v_buf;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>v_buf
.sem_num = 0;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=DE style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:
DE;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>v_buf.sem_op = 1;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=DE style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:
DE;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>v_buf .sem_fig =
SEM_UNDO;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>if
(semop (semid, &amp;v_buf, 1) == 1)<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;mso-fareast-font-family:"Arial Unicode MS";
color:black;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>perror</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>(&quot;Ошибка
операции </span></i><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>v</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>(</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>semid</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>)&quot;); <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>exit</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>(1);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>return
</span></i><i style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>(0);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><b><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-style:italic'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><b><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-style:italic'><span style='mso-tab-count:1'>        </span></span></b><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold;
mso-bidi-font-style:italic'>4.1.5.4. Разделяемая память<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Операции с
разделяемой памятью позволяют двум и более процессам совмест­но использовать
область физической памяти (общеизвестно, что обычно облас­ти данных любых двух
программ совершенно отделены друг от друга). Чаще всего разделяемая память
является наиболее производительным механизмом межпроцессного взаимодействия.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Для того,
чтобы сегмент памяти мог использоваться совместно, он должен быть сначала
создан при помощи системного вызова </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>shmget</span></i><b><span style='mso-bidi-font-size:
14.0pt;color:black'>. </span></b><span style='mso-bidi-font-size:14.0pt;
color:black'>После создания сегмента разделяемой памяти процесс может подключаться
к нему при помощи вызова </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>shmat</span></i><b><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'> </span></b><span
style='mso-bidi-font-size:14.0pt;color:black'>и затем использовать его для
своих частных целей. Когда этот сегмент па­мяти больше не нужен, процесс может
отключиться от него при помощи вызова </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>shmdt</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><b><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-style:italic'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><b><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-style:italic'><span style='mso-tab-count:1'>        </span>Системный
вызов </span></b><b><span lang=EN-US style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US;mso-bidi-font-style:italic'>shmget</span></b><b><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-style:italic'><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Сегменты разделяемой
памяти создаются при помощи вызова </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>shmget</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>.</span></i><b><span
style='mso-bidi-font-size:14.0pt;color:black'><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><b><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-style:italic'><span style='mso-tab-count:1'>        </span><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><b><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-style:italic'><span style='mso-tab-count:1'>        </span>Описание</span></b><b><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-style:italic'><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>#include
&lt;sys/shm.h&gt;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>int
shmget(key_t key, size_t size, int permflags);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><span
style='mso-tab-count:1'>        </span><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><span
style='mso-tab-count:1'>        </span></span><span style='mso-bidi-font-size:
14.0pt;color:black'>Этот вызов аналогичен вызовам </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>msgget</span></i><b><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>
</span></b><span style='mso-bidi-font-size:14.0pt;color:black'>и </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>semget</span></i><b><span
style='mso-bidi-font-size:14.0pt;color:black'>. </span></b><span
style='mso-bidi-font-size:14.0pt;color:black'>Наиболее интересным па­раметром
вызова является </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>size</span></i><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>,<b> </b></span><span style='mso-bidi-font-size:
14.0pt;color:black'>который задает требуемый минимальный размер (в байтах)
сегмента памяти. Параметр </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>key</span></i><b><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'> </span></b><span style='mso-bidi-font-size:
14.0pt;color:black'>является значением ключа сегмента па­мяти, параметр </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>permflags</span></i><b><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>
</span></b><span style='mso-bidi-font-size:14.0pt;color:black'>задает права
доступа к сегменту памяти и, кроме того, может содержать флаги </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>IPC</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>CREAT</span></i><b><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>
</span></b><span style='mso-bidi-font-size:14.0pt;color:black'>и </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>IPC</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>EXCL</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><b><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-style:italic'><span style='mso-tab-count:1'>        </span>Операции
с разделяемой памятью: вызовы </span></b><b><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-style:italic'>shmat</span></b><b><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-style:italic'> и </span></b><b><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-style:italic'>shmdt</span></b><b><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-style:italic'><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Сегмент
памяти, созданный вызовом </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>shmget</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>,</span></i><b><span
style='mso-bidi-font-size:14.0pt;color:black'> </span></b><span
style='mso-bidi-font-size:14.0pt;color:black'>является участком <i>физической </i>памяти
и не находится в <i>логическом </i>пространстве данных процесса. Для исполь­зования
разделяемой памяти текущий процесс, а также все другие процессы, вза­имодействующие
с этим сегментом, должны явно подключать этот участок памя­ти к логическому
адресному пространству при помощи вызова </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>shmat</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>:<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><b><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-style:italic'><span style='mso-tab-count:1'>        </span>Описание</span></b><b><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-style:italic'><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>#include
&lt;sys/shm.h&gt;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>void
*shmat(int shmid, const void *daddr, int shmflags);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><span
style='mso-tab-count:1'>        </span><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><span
style='mso-tab-count:1'>        </span></span><span style='mso-bidi-font-size:
14.0pt;color:black'>Вызов </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>shmat</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> связывает участок памяти,
обозначенный идентификатором </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>shmid
</span></i><span style='mso-bidi-font-size:14.0pt;color:black'>(который был
получен в результате вызова </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>shmget</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>) с некоторым допустимым адресом
логического адресного пространства вызывающего процесса. Этот адрес является
значением, возвращаемым вызовом </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>shmat</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>
</span><span style='mso-bidi-font-size:14.0pt;color:black'>(в языке </span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>C</span><span
style='mso-bidi-font-size:14.0pt;color:black'> такие адреса дан­ных обычно
представляются типом </span><span lang=EN-US style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US'>void</span><span style='mso-bidi-font-size:
14.0pt;color:black'> *).<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Параметр </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>daddr</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> позволяет программисту до
некоторой степени управлять вы­бором этого адреса. Если этот параметр равен </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>NULL</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>, </span><span
style='mso-bidi-font-size:14.0pt;color:black'>то участок подключается к первому
доступному адресу, выбранному системой. Это наиболее простой слу­чай использования
вызова </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>shmat</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>. Если параметр </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>daddr</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> не равен </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>NULL</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>, </span><span
style='mso-bidi-font-size:14.0pt;color:black'>то участок будет подключен к
содержащемуся в нем адресу или адресу в ближайшей окрест­ности в зависимости от
флагов, заданных в аргументе </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>shmflags</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>. Этот вариант сложнее, так как
при этом необходимо знать расположение программы в памяти.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Аргумент </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>shmflag</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> может содержать два флага, </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>SHM</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>RDONLY </span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>и </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>SHM</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>RND</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>, </span><span
style='mso-bidi-font-size:14.0pt;color:black'>опре­деленные в заголовочном
файле <i style='mso-bidi-font-style:normal'>&lt;</i></span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>sys</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black'>/</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>shm</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black'>.</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>h</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black'>&gt;.</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> При задании флага </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>SHM</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>RDONLY</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'> </span><span style='mso-bidi-font-size:14.0pt;
color:black'>участок памяти подключается только для чтения. Флаг </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>SHM</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>RMD</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'> </span><span style='mso-bidi-font-size:14.0pt;
color:black'>определяет, если это возможно, способ обработки в вызове </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>shmat</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> ненулевого значения </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>daddr</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>В случае
ошибки вызов </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>shmat</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> вернет значение:<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>(</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>void </span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>*)-1<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Вызов </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>shmdt</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> противоположен вызову </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>shmat</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> и отключает участок разделяемой
памяти от логического адресного пространства процесса (это означает, что про­цесс
больше не может использовать его). Он вызывается очень просто:<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>retval</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'> = </span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>shmdt</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>(</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>memptr</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Возвращаемое
значение </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>retval</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> является целым числом и равно 0
в случае ус­пеха и -1 - в случае ошибки.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><b><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-style:italic'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><b><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-style:italic'><span style='mso-tab-count:1'>        </span>Системный
вызов </span></b><b><i><span lang=EN-US style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US'>shmctl</span></i></b><b><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-style:italic'><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><b><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-style:italic'><span style='mso-tab-count:1'>        </span>Описание<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>#include &lt;sys/shm.h&gt;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>int
shmctl(int shmid, int command, struct shmid ds *shm_stat);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'><span
style='mso-tab-count:1'>        </span></span><span style='mso-bidi-font-size:
14.0pt;color:black'>Этот вызов в точности соответствует вызову </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>msgctl</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>, и параметр </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>command</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> мо­жет, наряду с другими,
принимать значения </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>IPC</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>STAT</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>, </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>IPC</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>SET</span></i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'> </span><span style='mso-bidi-font-size:14.0pt;
color:black'>и </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>IPC</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>RMID</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>. </span><span
style='mso-bidi-font-size:14.0pt;color:black'>В следующем примере этот вызов
будет использован с аргументом </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>command</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> рав­ным </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>IPC</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>RMID</span></i><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><b><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-style:italic'><span style='mso-tab-count:1'>        </span>Пример
работы с разделяемой памятью: программа </span></b><b><i><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>shmcopy</span></i></b><b><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-style:italic'><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>В этом разделе
создадим простую программу </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>shmcopy</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> для демонстрации прак­тического
использования разделяемой памяти. Программа </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>shmcopy</span></i><span style='mso-bidi-font-size:
14.0pt;color:black'> просто копи­рует данные со своего стандартного ввода на
стандартный вывод, но позволяет избежать лишних простоев в вызовах </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>read</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> и </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>write</span></i><span style='mso-bidi-font-size:14.0pt;
color:black'>. При запуске программы </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>shmcopy</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> создаются два процесса, один из
которых выполняет чтение, а другой - запись, и которые совместно используют два
буфера, реализованные в виде сег­ментов разделяемой памяти. Когда первый
процесс считывает данные в первый буфер, второй записывает содержимое второго
буфера, и наоборот. Так как чтение и запись выполняются одновременно,
пропускная способность возрастает. Этот подход используется, например, в
программах, которые выводят информа­цию на ленточный накопитель.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Для
согласования двух процессов (чтобы записывающий процесс не писал в буфер до тех
пор, пока считывающий процесс его не заполнит) будем использо­вать два
семафора. Почти во всех программах, использующих разделяемую па­мять, требуется
дополнительная синхронизация, так как механизм разделяемой памяти не содержит
собственных средств синхронизации.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Программа </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>shmcopy</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> использует следующий
заголовочный файл </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>share</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>_</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>ex</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>.</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>h</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black'>:</span></i><span style='mso-bidi-font-size:14.0pt;color:black'> <i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-weight:bold'>/*
Заголовочный файл для примера работы с разделяемой памятью </span></i></span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>*/<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>#include
&lt;stdio.h&gt; <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>#include
&lt;signal.h&gt; <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>#include
&lt;sys/types.h&gt; <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>#include
&lt;sys/ipc.h&gt; <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>#include
&lt;sys/shm.h&gt; <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>#include
&lt;sys/sem.h&gt;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>#define
SHMKEY1<span style='mso-spacerun:yes'>      </span>(key_t)0x10<span
style='mso-spacerun:yes'>   </span>/* </span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'>Ключ</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:
EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'> </span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>разделяемой</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:
bold'> </span></i><i style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>памяти</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'> */<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>#define
SHMKEY2<span style='mso-spacerun:yes'>      </span>(key_t)0x15<span
style='mso-spacerun:yes'>   </span>/* </span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'>Ключ</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:
EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'> </span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>разделяемой</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:
bold'> </span></i><i style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>памяти</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'> */<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>#define
SEMKEY<span style='mso-spacerun:yes'>        </span>(key_t)0x20<span
style='mso-spacerun:yes'>   </span>/* </span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'>Ключ</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:
EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'> </span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>семафора</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'> */<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>/* Размер буфера для чтения и записи */ <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>#</span></i><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>define SIZ</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> 5*</span></i><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>BUFSIZ</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'><o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>/* В этой структуре будут находиться данные и счетчик чтения */ <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>struct databuf <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>int
d_nread;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>char
d_buf[SIZ];<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>};<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>typedef
union semun <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>int
val;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>struct
semid_ds *buf; <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>ushort</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'> *</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>array</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>; <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'>} </span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>semun</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Напомним, что
постоянная </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>BUFSIZ</span></i><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'> </span><span
style='mso-bidi-font-size:14.0pt;color:black'>определена в файле <i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-weight:bold'>&lt;</span></i></span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>stdio</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>.</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>h</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>&gt;</span></i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'> </span><span style='mso-bidi-font-size:
14.0pt;color:black'>и задает оптимальный размер порций данных при работе с
файловой системой. Шаблон </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>databuf</span></i><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'> </span><span
style='mso-bidi-font-size:14.0pt;color:black'>показывает структуру, которая
связывается с каждым сегментом раз­деляемой памяти. В частности, элемент </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>d</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>nread</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> позволит процессу, выполняю­щему
чтение, передавать другому, осуществляющему запись, через участок разде­ляемой
памяти число считанных символов.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Следующий файл
содержит процедуры для инициализации двух участков раз­деляемой памяти и набора
семафоров. Он также содержит процедуру </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>remobj</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>, ко­торая удаляет различные
объекты межпроцессного взаимодействия в конце рабо­ты программы. Обратите
внимание на способ вызова </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>shmat</span></i><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'> </span><span
style='mso-bidi-font-size:14.0pt;color:black'>для подключения участков
разделяемой памяти к адресному пространству процесса.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>/* Процедуры инициализации */<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>#</span></i><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>include</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> &quot;</span></i><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>share</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>ex</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>.</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>h</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>&quot;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>#define
IFLAGS<span style='mso-spacerun:yes'>    </span>(IPC_CREAT | IPC_EXCL) <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>#define
ERR<span style='mso-spacerun:yes'>     </span>((struct databuf *) -1)<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>static
int shmid1, shmid2, semid;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>void
getseg(struct databuf **p1, struct databuf **p2)<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>/* </span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>Создать</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:
EN-US;mso-bidi-font-weight:bold'> </span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>участок</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'> </span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>разделяемой</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'> </span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>памяти</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'> */ <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>if((shmid1 = shmget(SHMKEY1,
sizeof(struct databuf),<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>0600 | IFLAGS)) == -1) <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>fatal(&quot;shmget&quot;); <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>if((shmid2 = shmget(SHMKEY2,
sizeof(struct databuf), <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>0600 | </span></i><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>IFLAGS</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>)) ==
-1) <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>fatal</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>(&quot;</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>shmget</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>&quot;);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>/* Подключить участки разделяемой памяти */<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>if((*p1 = (struct databuf
*)shmat(shmid1,0,0)) == ERR)<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>fatal<span
style='mso-spacerun:yes'>  </span>(&quot;shmat&quot;); <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>if((*p2
= (struct databuf *)shmat(shmid2,0,0)) == ERR)<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>fatal
(&quot;shmat&quot;);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>int
getsem(void)<span style='mso-spacerun:yes'>                 </span>/* </span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>Получить</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:
bold'> </span></i><i style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>набор</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:
bold'> </span></i><i style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>семафоров</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'> */<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>union
semun x; <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>x.val
= 0;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>/* </span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>Создать</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:
EN-US;mso-bidi-font-weight:bold'> </span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>два</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'> </span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>набора</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'> </span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>семафоров</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'> */<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>if((semid
= semget(SEMKEY, 2, 0600 | IFLAGS)) == -1) <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>fatal</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>(&quot;</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>semget</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>&quot;);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>/* Задать начальные значения */ <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>if(semctl(semid, 0, SETVAL,
x) == -1)<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>fatal(&quot;semctl&quot;);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>if(semctl(semid,
1, SETVAL, x) == -1)<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>fatal</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>(&quot;</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>semctl</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>&quot;); <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>return</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>(</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>semid</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>); <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>/* Удалить идентификаторы разделяемой памяти <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'><span style='mso-spacerun:yes'>    </span>и идентификатор набора
семафоров */ <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>void</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'> </span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>remobj</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>(</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>void</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>) <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>if(shmctl(shmid1,
IPC_RMID, NULL) == -1)<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>fatal(&quot;shmctl&quot;);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>if(shmctl(shmid2,
IPC_RMID, NULL) == -1)<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>fatal(&quot;shmctl&quot;);
<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>if(semctl(semid,
0, IPC_RMID, NULL) == -1)<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>fatal</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>(&quot;</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>semctl</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>&quot;);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Ошибки в этих
процедурах обрабатываются при помощи процедуры </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>fatal</span></i><span style='mso-bidi-font-size:14.0pt;
color:black'>, ко­торая использовалась в предыдущих примерах. Она просто вызывает
</span><i style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>perror</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>, а затем </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>exit</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Ниже следует
функция </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>main</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> для программы </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>strcopy</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>. Она вызывает процедуры
инициализации, а затем создает процесс для чтения (родительский) и для за­писи
(дочерний). Обратите внимание на то, что именно выполняющий запись процесс вызывает
процедуру </span><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>remobj</span><span style='mso-bidi-font-size:14.0pt;
color:black'> при завершении программы.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>/* </span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>Программа</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:
EN-US;mso-bidi-font-weight:bold'> <span lang=EN-US>shmcopy - </span></span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>функция</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:
EN-US;mso-bidi-font-weight:bold'> <span lang=EN-US>main */<o:p></o:p></span></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>#nclude
&quot;share_ex.h&quot; <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>main()
<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>int
semid; <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>pid_t
pid;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>struct</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'> </span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>databuf</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'> *</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>buf</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>1, *</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>buf</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>2;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>/* Инициализация набора семафоров */ <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>semid</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'> = </span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>getsem</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>();<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>/* Создать и подключить участки разделяемой памяти */ <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>getseg(&amp;buf1,
&amp;buf2);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>switch
(pid = fork()){ <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>case
-1:<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>fatal(&quot;fork&quot;);
<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>case
0: /* </span></i><i style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>Дочерний</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:
bold'> </span></i><i style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>процесс</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'> */<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>writer(semid,
buf1, buf2);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>remobj()
;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>break;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>default:
/* </span></i><i style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>Родительский</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:
bold'> </span></i><i style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>процесс</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'> */ <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>reader(semid,
buf1, buf2); <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>break;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>exit</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'> (0);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Функция </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>main</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> создает объекты межпроцессного
взаимодействия до вызова </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>fork</span></i><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>. </span><span style='mso-bidi-font-size:
14.0pt;color:black'>Обратите внимание на то, что адреса, определяющие сегменты
разделяемой памяти (которые находятся в переменных </span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>buf</span><span
style='mso-bidi-font-size:14.0pt;color:black'>1 и </span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>buf</span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black'> </span><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>2), </span><span
style='mso-bidi-font-size:14.0pt;color:black'>будут заданы в обоих про­цессах.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Процедура </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>reader</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> принимает данные со стандартного
ввода, то есть из дескриптора файла 0, и является первой функцией,
представляющей интерес. Ей пе­редается идентификатор набора семафоров в
параметре </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>semid</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> и адреса двух уча­стков разделяемой
памяти в переменных </span><span lang=EN-US style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US'>buf</span><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'>1 </span><span style='mso-bidi-font-size:
14.0pt;color:black'>и </span><span lang=EN-US style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US'>buf</span><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'>2.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>/* Процедура </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>reader</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'> -
выполняет чтение из файла */<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'>#</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>include</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'> &quot;</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>share</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>_</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>ex</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>.</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>h</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>&quot;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>/* Определения процедур р() и </span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>v</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>() для двух семафоров */ </span></i><i><span
style='mso-bidi-font-size:14.0pt;color:black'><o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>struct
sembuf p1 = {0,-1,0}, p2 = {1,-1,0};<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>struct
sembuf v1 = {0,1,0}, v2 = {1,1,0};<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>void
reader(int semid, struct databuf *buf1,<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>struct
databuf *buf2)<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>for(;;)
<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>/* </span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>Считать</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:
EN-US;mso-bidi-font-weight:bold'> </span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>в</span></i><i style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'> </span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>буфер</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'> buf1 */<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>buf1-&gt;d_nread
= read(0, buf1-&gt;d_buf, SIZ);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>/* Точка синхронизации */ <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>semop</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>(</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>semid</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>, &amp;</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>v</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>1, 1); <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>semop</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>(</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>semid</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>, &amp;</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>p</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>2, 1);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>/* Чтобы процедура </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>writer</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'> не
была приостановлена */ <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>if (buf1-&gt;d_nread &lt;=0)
<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>return;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>buf2-&gt;d_nread
= read(0, buf2-&gt;d_buf, SIZ);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>semop(semid,
&amp;v2, 1); <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>semop(semid,
&amp;p1, 1);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>if
(buf2-&gt;d_nread &lt;=0) <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>return;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i><span style='mso-bidi-font-size:
14.0pt;color:black'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Структуры </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>sembuf</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> просто определяют операции </span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>p</span><span
style='mso-bidi-font-size:14.0pt;color:black'> () и </span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>v</span><span
style='mso-bidi-font-size:14.0pt;color:black'> () для набора из двух семафоров.
Но на этот раз они используются не для блокировки критических участков кода, а
для синхронизации процедур, выполняющих чтение и запись. Процедура </span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>reader</span><span
style='mso-bidi-font-size:14.0pt;color:black'> использует операцию </span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>v</span><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>2 </span><span style='mso-bidi-font-size:
14.0pt;color:black'>для сообщения о том, что она завершила чтение и ожидает,
вызвав </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>semop</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> с параметром </span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>p</span><span
style='mso-bidi-font-size:14.0pt;color:black'>1, пока процедура </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>writer</span></i><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black'> </span><span style='mso-bidi-font-size:
14.0pt;color:black'>не сообщит о завершении записи. Это станет более очевидным
при описании проце­дуры </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>writer</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>. Возможны другие подходы,
включающие или четыре бинарных се­мафора, или семафоры, имеющие более двух
значений.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>Последней
процедурой, вызываемой программой </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>shmcopy</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>, является процедура </span><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>writer</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'>:<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>/* Процедура </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>writer</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'> -
выполняет запись */ <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>#</span></i><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>include</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'> &quot;</span></i><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>share</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:bold'>_</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>ex</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>.</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-bidi-font-weight:bold'>h</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>&quot;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>extern</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'> </span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>struct</span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'> </span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>sembuf</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'> </span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>p</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>1, </span></i><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>p</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>2;<span
style='mso-spacerun:yes'>    </span>/* Определены в </span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>reader</span></i><i style='mso-bidi-font-style:normal'><span
style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'>.с */<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>extern
struct sembuf v1, v2;<span style='mso-spacerun:yes'>    </span>/* </span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>Определены</span></i><i
style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:
bold'> </span></i><i style='mso-bidi-font-style:normal'><span style='mso-bidi-font-size:
14.0pt;color:black;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>в</span></i><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US;mso-fareast-language:EN-US;
mso-bidi-font-weight:bold'> reader.</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-fareast-language:
EN-US;mso-bidi-font-weight:bold'>с</span></i><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>
*/<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>void
writer(int semid, struct databuf *buf1, struct databuf *buf2)<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>{<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>for(;;)<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>{</span></i><i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-fareast-language:EN-US'><o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>semop(semid,
&amp;p1, 1); <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>semop(semid,
&amp;v2, 1);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>if(buf1-&gt;d_nread
&lt;= 0) <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>return;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>write(1,
buf1-&gt;d_buf, buf1-&gt;d_nread) ;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>semop(semid,
&amp;p2, 1); <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>semop(semid,
&amp;v1, 1);<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>if(buf2-&gt;d_nread
&lt;= 0) <o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>return;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-font-weight:bold'>write(1,
buf2-&gt;d_buf, buf2-&gt;d_nread) ;<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'>}<o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>И снова
следует обратить внимание на использование набора семафоров для согласования
работы процедур </span><i style='mso-bidi-font-style:normal'><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>reader</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> и </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>writer</span></i><span style='mso-bidi-font-size:14.0pt;
color:black'>. На этот раз процедура </span><i style='mso-bidi-font-style:normal'><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>writer</span></i><span
style='mso-bidi-font-size:14.0pt;color:black'> использует операцию </span><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>v</span><span style='mso-bidi-font-size:14.0pt;
color:black;mso-bidi-font-weight:bold'>2 </span><span style='mso-bidi-font-size:
14.0pt;color:black'>для сигнализации и ждет </span><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US'>p</span><span
style='mso-bidi-font-size:14.0pt;color:black'>1. Важно также отметить, что
значения </span><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>bufl</span><span style='mso-bidi-font-size:14.0pt;
color:black'>-&gt;</span><span lang=EN-US style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US'>d</span><span style='mso-bidi-font-size:
14.0pt;color:black'>_</span><span lang=EN-US style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US'>nread</span><span style='mso-bidi-font-size:
14.0pt;color:black'> и </span><span lang=EN-US style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US'>buf</span><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'>2</span><span style='mso-bidi-font-size:
14.0pt;color:black'>-&gt;</span><span lang=EN-US style='mso-bidi-font-size:
14.0pt;color:black;mso-ansi-language:EN-US'>d</span><span style='mso-bidi-font-size:
14.0pt;color:black'>_</span><span lang=EN-US style='mso-bidi-font-size:14.0pt;
color:black;mso-ansi-language:EN-US'>nread</span><span style='mso-bidi-font-size:
14.0pt;color:black'> устанавливаются процессом, выполняющим чтение.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-size:
14.0pt;color:black'><span style='mso-tab-count:1'>        </span>После
компиляции можно использовать программу </span><i style='mso-bidi-font-style:
normal'><span lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;
mso-ansi-language:EN-US'>shmcopy</span></i><span style='mso-bidi-font-size:
14.0pt;color:black'> при помощи по­добной команды:<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'>$ </span></i><i><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>shmcopy </span></i><i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'>&lt; </span></i><i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>big </span></i><i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'>&gt; /</span></i><i><span
lang=EN-US style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>tmp</span></i><i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'>/</span></i><i><span lang=EN-US
style='mso-bidi-font-size:14.0pt;color:black;mso-ansi-language:EN-US;
mso-bidi-font-weight:bold'>big</span></i><i><span style='mso-bidi-font-size:
14.0pt;color:black;mso-bidi-font-weight:bold'>.</span></i><i style='mso-bidi-font-style:
normal'><span style='mso-bidi-font-size:14.0pt;color:black;mso-bidi-font-weight:
bold'><o:p></o:p></span></i></p>

<p class=MsoNormal style='text-align:justify'><b><span style='mso-bidi-font-size:
14.0pt;mso-font-kerning:16.0pt'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><b><span style='mso-bidi-font-size:
14.0pt;mso-font-kerning:16.0pt'><o:p>&nbsp;</o:p></span></b></p>

</div>

<div style='mso-element:footnote-list'><![if !supportFootnotes]><br clear=all>

<hr align=left size=1 width="33%">

<![endif]>

<div style='mso-element:footnote' id=ftn1>

<p class=MsoFootnoteText><a style='mso-footnote-id:ftn1' href="#_ftnref1"
name="_ftn1" title=""><span class=MsoFootnoteReference><span style='font-size:
11.0pt;font-family:"Times New Roman"'><span style='mso-special-character:footnote'><![if !supportFootnotes]><span
class=MsoFootnoteReference><span style='font-size:11.0pt;font-family:"Times New Roman";
mso-fareast-font-family:"Times New Roman";mso-ansi-language:RU;mso-fareast-language:
RU;mso-bidi-language:AR-SA'>[1]</span></span><![endif]></span></span></span></a><span
style='font-size:11.0pt;font-family:"Times New Roman"'> В базовом документе </span><span
lang=EN-US style='font-size:11.0pt;font-family:"Times New Roman";mso-ansi-language:
EN-US'>POSIX</span><span style='font-size:11.0pt;font-family:"Times New Roman"'>
1003.1 средства </span><span lang=EN-US style='font-size:11.0pt;font-family:
"Times New Roman";mso-ansi-language:EN-US'>IPC System V</span><span
style='font-size:11.0pt;font-family:"Times New Roman"'> не вводятся.<o:p></o:p></span></p>

</div>

<div style='mso-element:footnote' id=ftn2>

<p class=MsoFooter><a style='mso-footnote-id:ftn2' href="#_ftnref2" name="_ftn2"
title=""></a><span class=MsoFootnoteReference>2</span> Более точный порядок
разрешения доступа к объекту <span lang=EN-US style='mso-ansi-language:EN-US'>IPC</span>
описан в спецификации <span lang=EN-US style='mso-ansi-language:EN-US'>SUSV</span>2.
<i style='mso-bidi-font-style:normal'><o:p></o:p></i></p>

<p class=MsoFootnoteText><o:p>&nbsp;</o:p></p>

</div>

</div>

</body>

</html>
